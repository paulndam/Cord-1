{"ast":null,"code":"var _jsxFileName = \"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/AddGuildModal.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { Button, Divider, Modal, ModalBody, ModalCloseButton, ModalContent, ModalFooter, ModalHeader, ModalOverlay, Text, VStack } from \"@chakra-ui/react\";\nimport { createGuild, joinGuild } from \"api/handler/guilds\";\nimport { Form, Formik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { useQueryClient } from \"react-query\";\nimport { useHistory } from \"react-router-dom\";\nimport userStore from \"stores/userStore\";\nimport { gKey } from \"utils/querykeys\";\nimport toErrorMap from \"utils/toErrorMap\";\nimport { GuildSchema } from \"validation/guild.schema\";\nimport InputField from \"components/shared/InputField\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddGuildModal({\n  isOpen,\n  onClose\n}) {\n  _s();\n\n  const [screen, setScreen] = useState(\"START\");\n\n  const goBack = () => setScreen(\"START\");\n\n  const submitClose = () => {\n    setScreen(\"START\");\n    onClose();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: submitClose,\n    isCentered: true,\n    size: \"sm\",\n    children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), screen === \"INVITE\" && /*#__PURE__*/_jsxDEV(JoinServerModal, {\n      goBack: goBack,\n      submitClose: submitClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this), screen === \"CREATE\" && /*#__PURE__*/_jsxDEV(CreateServerModal, {\n      goBack: goBack,\n      submitClose: submitClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this), screen === \"START\" && /*#__PURE__*/_jsxDEV(ModalContent, {\n      bg: \"brandGray.light\",\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        children: \"Create a server\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        pb: 6,\n        children: /*#__PURE__*/_jsxDEV(VStack, {\n          spacing: \"5\",\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            textAlign: \"center\",\n            children: \"Your server is where you and your friends hang out. Make yours and start talking.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            background: \"highlight.standard\",\n            color: \"white\",\n            type: \"submit\",\n            _hover: {\n              bg: \"highlight.hover\"\n            },\n            _active: {\n              bg: \"highlight.active\"\n            },\n            _focus: {\n              boxShadow: \"none\"\n            },\n            w: \"full\",\n            onClick: () => setScreen(\"CREATE\"),\n            children: \"Create My Own\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: \"Have an invite already?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            mt: \"4\",\n            background: \"highlight.standard\",\n            color: \"white\",\n            type: \"submit\",\n            _hover: {\n              bg: \"highlight.hover\"\n            },\n            _active: {\n              bg: \"highlight.active\"\n            },\n            _focus: {\n              boxShadow: \"none\"\n            },\n            w: \"full\",\n            onClick: () => setScreen(\"INVITE\"),\n            children: \"Join a Server\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddGuildModal, \"3pWzx/BC763lMpaSiQlT+V5suuo=\");\n\n_c = AddGuildModal;\n\nfunction JoinServerModal({\n  goBack,\n  submitClose\n}) {\n  _s2();\n\n  const cache = useQueryClient();\n  const history = useHistory();\n\n  async function handleJoinServer(values, {\n    setErrors\n  }) {\n    if (values.length === \"\") {\n      setErrors({\n        link: \"Please enter a valid link\"\n      });\n    } else {\n      try {\n        const {\n          data\n        } = await joinGuild(values);\n\n        if (data) {\n          cache.invalidateQueries(gKey);\n          submitClose();\n          history.push(`/channels/${data.id}/${data.default_channel_id}`);\n        }\n      } catch (error) {\n        var _error$response;\n\n        const status = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status;\n\n        if (status === 404 || status === 400) {\n          var _error$response2, _error$response2$data;\n\n          setErrors({\n            link: error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message\n          });\n        } else {\n          setErrors(toErrorMap(error));\n        }\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(ModalContent, {\n    bg: \"brandGray.light\",\n    children: /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: {\n        link: \"\"\n      },\n      onSubmit: handleJoinServer,\n      children: ({\n        isSubmitting\n      }) => /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          textAlign: \"center\",\n          fontWeight: \"bold\",\n          pb: \"0\",\n          children: \"Join a Server\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          pb: 3,\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            fontSize: \"14px\",\n            textColor: \"brandGray.accent\",\n            children: \"Enter an invite below to join an existing server\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(InputField, {\n            label: \"invite link\",\n            name: \"link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            mt: \"4\",\n            fontSize: \"12px\",\n            fontWeight: \"semibold\",\n            textColor: \"brandGray.accent\",\n            textTransform: \"uppercase\",\n            children: \"invite links should look like\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            mt: \"2\",\n            fontSize: \"12px\",\n            textColor: \"brandGray.accent\",\n            children: \"drqgi2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            fontSize: \"12px\",\n            textColor: \"brandGray.accent\",\n            children: \"https://discord.gg/drqgi2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          bg: \"brandGray.dark\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            mr: 6,\n            variant: \"link\",\n            onClick: goBack,\n            fontSize: \"14px\",\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            background: \"highlight.standard\",\n            color: \"white\",\n            type: \"submit\",\n            _hover: {\n              bg: \"highlight.hover\"\n            },\n            _active: {\n              bg: \"highlight.active\"\n            },\n            _focus: {\n              boxShadow: \"none\"\n            },\n            isLoading: isSubmitting,\n            fontSize: \"14px\",\n            children: \"Join Server\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(JoinServerModal, \"zJWnDWN8SNTrrK5nHccd6xyx9EE=\", false, function () {\n  return [useQueryClient, useHistory];\n});\n\n_c2 = JoinServerModal;\n\nfunction CreateServerModal({\n  goBack,\n  submitClose\n}) {\n  _s3();\n\n  const current = userStore(state => state.current);\n  const history = useHistory();\n  const cache = useQueryClient();\n\n  async function handleCreateServer(values, {\n    setErrors\n  }) {\n    try {\n      const {\n        data\n      } = await createGuild(values);\n\n      if (data) {\n        cache.setQueryData(gKey, guilds => {\n          return [...guilds, data];\n        });\n        submitClose();\n        history.push(`/channels/${data.id}/${data.default_channel_id}`);\n      }\n    } catch (errors) {\n      setErrors(toErrorMap(errors));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(ModalContent, {\n    bg: \"brandGray.light\",\n    children: /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: {\n        name: `${current.username}'s server`\n      },\n      validationSchema: GuildSchema,\n      onSubmit: handleCreateServer,\n      children: ({\n        isSubmitting,\n        values\n      }) => /*#__PURE__*/_jsxDEV(Form, {\n        initialValues: {\n          name: `${current.username}'s server ðŸ˜Ž `\n        },\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          textAlign: \"center\",\n          fontWeight: \"bold\",\n          pb: \"0\",\n          children: \"Create your server\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          pb: 3,\n          children: /*#__PURE__*/_jsxDEV(InputField, {\n            label: \"server name\",\n            name: \"name\",\n            value: values.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          bg: \"brandGray.dark\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            mr: 6,\n            fontSize: \"14px\",\n            variant: \"link\",\n            onClick: goBack,\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            background: \"highlight.standard\",\n            color: \"white\",\n            type: \"submit\",\n            _hover: {\n              bg: \"highlight.hover\"\n            },\n            _active: {\n              bg: \"highlight.active\"\n            },\n            _focus: {\n              boxShadow: \"none\"\n            },\n            isLoading: isSubmitting,\n            fontSize: \"14px\",\n            children: \"Create\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(CreateServerModal, \"T3TzDlbLm3QfNlxpG6WmJW4ZHPE=\", false, function () {\n  return [useHistory, useQueryClient];\n});\n\n_c3 = CreateServerModal;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"AddGuildModal\");\n$RefreshReg$(_c2, \"JoinServerModal\");\n$RefreshReg$(_c3, \"CreateServerModal\");","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/AddGuildModal.js"],"names":["Button","Divider","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","Text","VStack","createGuild","joinGuild","Form","Formik","React","useState","useQueryClient","useHistory","userStore","gKey","toErrorMap","GuildSchema","InputField","AddGuildModal","isOpen","onClose","screen","setScreen","goBack","submitClose","bg","boxShadow","JoinServerModal","cache","history","handleJoinServer","values","setErrors","length","link","data","invalidateQueries","push","id","default_channel_id","error","status","response","message","isSubmitting","CreateServerModal","current","state","handleCreateServer","setQueryData","guilds","errors","name","username"],"mappings":";;;;;AAAA,SACEA,MADF,EAEEC,OAFF,EAGEC,KAHF,EAIEC,SAJF,EAKEC,gBALF,EAMEC,YANF,EAOEC,WAPF,EAQEC,WARF,EASEC,YATF,EAUEC,IAVF,EAWEC,MAXF,QAYO,kBAZP;AAaA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,oBAAvC;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,QAA7B;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;;AAEA,eAAe,SAASC,aAAT,CAAuB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAvB,EAA4C;AAAA;;AACzD,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAC,OAAD,CAApC;;AAEA,QAAMa,MAAM,GAAG,MAAMD,SAAS,CAAC,OAAD,CAA9B;;AACA,QAAME,WAAW,GAAG,MAAM;AACxBF,IAAAA,SAAS,CAAC,OAAD,CAAT;AACAF,IAAAA,OAAO;AACR,GAHD;;AAKA,sBACE,QAAC,KAAD;AAAO,IAAA,MAAM,EAAED,MAAf;AAAuB,IAAA,OAAO,EAAEK,WAAhC;AAA6C,IAAA,UAAU,MAAvD;AAAwD,IAAA,IAAI,EAAC,IAA7D;AAAA,4BACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,YADF,EAEGH,MAAM,KAAK,QAAX,iBACC,QAAC,eAAD;AAAiB,MAAA,MAAM,EAAEE,MAAzB;AAAiC,MAAA,WAAW,EAAEC;AAA9C;AAAA;AAAA;AAAA;AAAA,YAHJ,EAKGH,MAAM,KAAK,QAAX,iBACC,QAAC,iBAAD;AAAmB,MAAA,MAAM,EAAEE,MAA3B;AAAmC,MAAA,WAAW,EAAEC;AAAhD;AAAA;AAAA;AAAA;AAAA,YANJ,EAQGH,MAAM,KAAK,OAAX,iBACC,QAAC,YAAD;AAAc,MAAA,EAAE,EAAC,iBAAjB;AAAA,8BACE,QAAC,WAAD;AAAa,QAAA,SAAS,EAAC,QAAvB;AAAgC,QAAA,UAAU,EAAC,MAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA,cAJF,eAKE,QAAC,SAAD;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA,+BACE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,GAAhB;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAME,QAAC,MAAD;AACE,YAAA,UAAU,EAAC,oBADb;AAEE,YAAA,KAAK,EAAC,OAFR;AAGE,YAAA,IAAI,EAAC,QAHP;AAIE,YAAA,MAAM,EAAE;AAAEI,cAAAA,EAAE,EAAE;AAAN,aAJV;AAKE,YAAA,OAAO,EAAE;AAAEA,cAAAA,EAAE,EAAE;AAAN,aALX;AAME,YAAA,MAAM,EAAE;AAAEC,cAAAA,SAAS,EAAE;AAAb,aANV;AAOE,YAAA,CAAC,EAAC,MAPJ;AAQE,YAAA,OAAO,EAAE,MAAMJ,SAAS,CAAC,QAAD,CAR1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,eAmBE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,kBAnBF,eAqBE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBArBF,eAuBE,QAAC,MAAD;AACE,YAAA,EAAE,EAAC,GADL;AAEE,YAAA,UAAU,EAAC,oBAFb;AAGE,YAAA,KAAK,EAAC,OAHR;AAIE,YAAA,IAAI,EAAC,QAJP;AAKE,YAAA,MAAM,EAAE;AAAEG,cAAAA,EAAE,EAAE;AAAN,aALV;AAME,YAAA,OAAO,EAAE;AAAEA,cAAAA,EAAE,EAAE;AAAN,aANX;AAOE,YAAA,MAAM,EAAE;AAAEC,cAAAA,SAAS,EAAE;AAAb,aAPV;AAQE,YAAA,CAAC,EAAC,MARJ;AASE,YAAA,OAAO,EAAE,MAAMJ,SAAS,CAAC,QAAD,CAT1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cALF;AAAA;AAAA;AAAA;AAAA;AAAA,YATJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA0DD;;GAnEuBJ,a;;KAAAA,a;;AAqExB,SAASS,eAAT,CAAyB;AAAEJ,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAzB,EAAkD;AAAA;;AAChD,QAAMI,KAAK,GAAGjB,cAAc,EAA5B;AACA,QAAMkB,OAAO,GAAGjB,UAAU,EAA1B;;AACA,iBAAekB,gBAAf,CAAgCC,MAAhC,EAAwC;AAAEC,IAAAA;AAAF,GAAxC,EAAuD;AACrD,QAAID,MAAM,CAACE,MAAP,KAAkB,EAAtB,EAA0B;AACxBD,MAAAA,SAAS,CAAC;AAAEE,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAT;AACD,KAFD,MAEO;AACL,UAAI;AACF,cAAM;AAAEC,UAAAA;AAAF,YAAW,MAAM7B,SAAS,CAACyB,MAAD,CAAhC;;AACA,YAAII,IAAJ,EAAU;AACRP,UAAAA,KAAK,CAACQ,iBAAN,CAAwBtB,IAAxB;AACAU,UAAAA,WAAW;AACXK,UAAAA,OAAO,CAACQ,IAAR,CAAc,aAAYF,IAAI,CAACG,EAAG,IAAGH,IAAI,CAACI,kBAAmB,EAA7D;AACD;AACF,OAPD,CAOE,OAAOC,KAAP,EAAc;AAAA;;AACd,cAAMC,MAAM,GAAGD,KAAH,aAAGA,KAAH,0CAAGA,KAAK,CAAEE,QAAV,oDAAG,gBAAiBD,MAAhC;;AACA,YAAIA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK,GAAjC,EAAsC;AAAA;;AACpCT,UAAAA,SAAS,CAAC;AAAEE,YAAAA,IAAI,EAAEM,KAAF,aAAEA,KAAF,2CAAEA,KAAK,CAAEE,QAAT,8EAAE,iBAAiBP,IAAnB,0DAAE,sBAAuBQ;AAA/B,WAAD,CAAT;AACD,SAFD,MAEO;AACLX,UAAAA,SAAS,CAACjB,UAAU,CAACyB,KAAD,CAAX,CAAT;AACD;AACF;AACF;AACF;;AAED,sBACE,QAAC,YAAD;AAAc,IAAA,EAAE,EAAC,iBAAjB;AAAA,2BACE,QAAC,MAAD;AAAQ,MAAA,aAAa,EAAE;AAAEN,QAAAA,IAAI,EAAE;AAAR,OAAvB;AAAqC,MAAA,QAAQ,EAAEJ,gBAA/C;AAAA,gBACG,CAAC;AAAEc,QAAAA;AAAF,OAAD,kBACC,QAAC,IAAD;AAAA,gCACE,QAAC,WAAD;AAAa,UAAA,SAAS,EAAC,QAAvB;AAAgC,UAAA,UAAU,EAAC,MAA3C;AAAkD,UAAA,EAAE,EAAC,GAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE,QAAC,SAAD;AAAW,UAAA,EAAE,EAAE,CAAf;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,QAAQ,EAAC,MAAf;AAAsB,YAAA,SAAS,EAAC,kBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,UAAD;AAAY,YAAA,KAAK,EAAC,aAAlB;AAAgC,YAAA,IAAI,EAAC;AAArC;AAAA;AAAA;AAAA;AAAA,kBAJF,eAME,QAAC,IAAD;AACE,YAAA,EAAE,EAAC,GADL;AAEE,YAAA,QAAQ,EAAC,MAFX;AAGE,YAAA,UAAU,EAAC,UAHb;AAIE,YAAA,SAAS,EAAC,kBAJZ;AAKE,YAAA,aAAa,EAAC,WALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,eAgBE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,GAAT;AAAa,YAAA,QAAQ,EAAC,MAAtB;AAA6B,YAAA,SAAS,EAAC,kBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBF,eAmBE,QAAC,IAAD;AAAM,YAAA,QAAQ,EAAC,MAAf;AAAsB,YAAA,SAAS,EAAC,kBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,eA6BE,QAAC,WAAD;AAAa,UAAA,EAAE,EAAC,gBAAhB;AAAA,kCACE,QAAC,MAAD;AAAQ,YAAA,EAAE,EAAE,CAAZ;AAAe,YAAA,OAAO,EAAC,MAAvB;AAA8B,YAAA,OAAO,EAAErB,MAAvC;AAA+C,YAAA,QAAQ,EAAE,MAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,MAAD;AACE,YAAA,UAAU,EAAC,oBADb;AAEE,YAAA,KAAK,EAAC,OAFR;AAGE,YAAA,IAAI,EAAC,QAHP;AAIE,YAAA,MAAM,EAAE;AAAEE,cAAAA,EAAE,EAAE;AAAN,aAJV;AAKE,YAAA,OAAO,EAAE;AAAEA,cAAAA,EAAE,EAAE;AAAN,aALX;AAME,YAAA,MAAM,EAAE;AAAEC,cAAAA,SAAS,EAAE;AAAb,aANV;AAOE,YAAA,SAAS,EAAEkB,YAPb;AAQE,YAAA,QAAQ,EAAE,MARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAuDD;;IAhFQjB,e;UACOhB,c,EACEC,U;;;MAFTe,e;;AAkFT,SAASkB,iBAAT,CAA2B;AAAEtB,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAA3B,EAAoD;AAAA;;AAClD,QAAMsB,OAAO,GAAGjC,SAAS,CAAEkC,KAAD,IAAWA,KAAK,CAACD,OAAlB,CAAzB;AACA,QAAMjB,OAAO,GAAGjB,UAAU,EAA1B;AACA,QAAMgB,KAAK,GAAGjB,cAAc,EAA5B;;AAEA,iBAAeqC,kBAAf,CAAkCjB,MAAlC,EAA0C;AAAEC,IAAAA;AAAF,GAA1C,EAAyD;AACvD,QAAI;AACF,YAAM;AAAEG,QAAAA;AAAF,UAAW,MAAM9B,WAAW,CAAC0B,MAAD,CAAlC;;AACA,UAAII,IAAJ,EAAU;AACRP,QAAAA,KAAK,CAACqB,YAAN,CAAmBnC,IAAnB,EAA0BoC,MAAD,IAAY;AACnC,iBAAO,CAAC,GAAGA,MAAJ,EAAYf,IAAZ,CAAP;AACD,SAFD;AAGAX,QAAAA,WAAW;AACXK,QAAAA,OAAO,CAACQ,IAAR,CAAc,aAAYF,IAAI,CAACG,EAAG,IAAGH,IAAI,CAACI,kBAAmB,EAA7D;AACD;AACF,KATD,CASE,OAAOY,MAAP,EAAe;AACfnB,MAAAA,SAAS,CAACjB,UAAU,CAACoC,MAAD,CAAX,CAAT;AACD;AACF;;AAED,sBACE,QAAC,YAAD;AAAc,IAAA,EAAE,EAAC,iBAAjB;AAAA,2BACE,QAAC,MAAD;AACE,MAAA,aAAa,EAAE;AACbC,QAAAA,IAAI,EAAG,GAAEN,OAAO,CAACO,QAAS;AADb,OADjB;AAIE,MAAA,gBAAgB,EAAErC,WAJpB;AAKE,MAAA,QAAQ,EAAEgC,kBALZ;AAAA,gBAOG,CAAC;AAAEJ,QAAAA,YAAF;AAAgBb,QAAAA;AAAhB,OAAD,kBACC,QAAC,IAAD;AAAM,QAAA,aAAa,EAAE;AAAEqB,UAAAA,IAAI,EAAG,GAAEN,OAAO,CAACO,QAAS;AAA5B,SAArB;AAAA,gCACE,QAAC,WAAD;AAAa,UAAA,SAAS,EAAC,QAAvB;AAAgC,UAAA,UAAU,EAAC,MAA3C;AAAkD,UAAA,EAAE,EAAC,GAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE,QAAC,SAAD;AAAW,UAAA,EAAE,EAAE,CAAf;AAAA,iCACE,QAAC,UAAD;AAAY,YAAA,KAAK,EAAC,aAAlB;AAAgC,YAAA,IAAI,EAAC,MAArC;AAA4C,YAAA,KAAK,EAAEtB,MAAM,CAACqB;AAA1D;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBALF,eASE,QAAC,WAAD;AAAa,UAAA,EAAE,EAAC,gBAAhB;AAAA,kCACE,QAAC,MAAD;AAAQ,YAAA,EAAE,EAAE,CAAZ;AAAe,YAAA,QAAQ,EAAE,MAAzB;AAAiC,YAAA,OAAO,EAAC,MAAzC;AAAgD,YAAA,OAAO,EAAE7B,MAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,MAAD;AACE,YAAA,UAAU,EAAC,oBADb;AAEE,YAAA,KAAK,EAAC,OAFR;AAGE,YAAA,IAAI,EAAC,QAHP;AAIE,YAAA,MAAM,EAAE;AAAEE,cAAAA,EAAE,EAAE;AAAN,aAJV;AAKE,YAAA,OAAO,EAAE;AAAEA,cAAAA,EAAE,EAAE;AAAN,aALX;AAME,YAAA,MAAM,EAAE;AAAEC,cAAAA,SAAS,EAAE;AAAb,aANV;AAOE,YAAA,SAAS,EAAEkB,YAPb;AAQE,YAAA,QAAQ,EAAE,MARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AARJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAyCD;;IA7DQC,iB;UAESjC,U,EACFD,c;;;MAHPkC,iB","sourcesContent":["import {\n  Button,\n  Divider,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Text,\n  VStack,\n} from \"@chakra-ui/react\";\nimport { createGuild, joinGuild } from \"api/handler/guilds\";\nimport { Form, Formik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { useQueryClient } from \"react-query\";\nimport { useHistory } from \"react-router-dom\";\nimport userStore from \"stores/userStore\";\nimport { gKey } from \"utils/querykeys\";\nimport toErrorMap from \"utils/toErrorMap\";\nimport { GuildSchema } from \"validation/guild.schema\";\nimport InputField from \"components/shared/InputField\";\n\nexport default function AddGuildModal({ isOpen, onClose }) {\n  const [screen, setScreen] = useState(\"START\");\n\n  const goBack = () => setScreen(\"START\");\n  const submitClose = () => {\n    setScreen(\"START\");\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={submitClose} isCentered size=\"sm\">\n      <ModalOverlay />\n      {screen === \"INVITE\" && (\n        <JoinServerModal goBack={goBack} submitClose={submitClose} />\n      )}\n      {screen === \"CREATE\" && (\n        <CreateServerModal goBack={goBack} submitClose={submitClose} />\n      )}\n      {screen === \"START\" && (\n        <ModalContent bg=\"brandGray.light\">\n          <ModalHeader textAlign=\"center\" fontWeight=\"bold\">\n            Create a server\n          </ModalHeader>\n          <ModalCloseButton />\n          <ModalBody pb={6}>\n            <VStack spacing=\"5\">\n              <Text textAlign=\"center\">\n                Your server is where you and your friends hang out. Make yours\n                and start talking.\n              </Text>\n\n              <Button\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                w=\"full\"\n                onClick={() => setScreen(\"CREATE\")}\n              >\n                Create My Own\n              </Button>\n\n              <Divider />\n\n              <Text>Have an invite already?</Text>\n\n              <Button\n                mt=\"4\"\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                w=\"full\"\n                onClick={() => setScreen(\"INVITE\")}\n              >\n                Join a Server\n              </Button>\n            </VStack>\n          </ModalBody>\n        </ModalContent>\n      )}\n    </Modal>\n  );\n}\n\nfunction JoinServerModal({ goBack, submitClose }) {\n  const cache = useQueryClient();\n  const history = useHistory();\n  async function handleJoinServer(values, { setErrors }) {\n    if (values.length === \"\") {\n      setErrors({ link: \"Please enter a valid link\" });\n    } else {\n      try {\n        const { data } = await joinGuild(values);\n        if (data) {\n          cache.invalidateQueries(gKey);\n          submitClose();\n          history.push(`/channels/${data.id}/${data.default_channel_id}`);\n        }\n      } catch (error) {\n        const status = error?.response?.status;\n        if (status === 404 || status === 400) {\n          setErrors({ link: error?.response?.data?.message });\n        } else {\n          setErrors(toErrorMap(error));\n        }\n      }\n    }\n  }\n\n  return (\n    <ModalContent bg=\"brandGray.light\">\n      <Formik initialValues={{ link: \"\" }} onSubmit={handleJoinServer}>\n        {({ isSubmitting }) => (\n          <Form>\n            <ModalHeader textAlign=\"center\" fontWeight=\"bold\" pb=\"0\">\n              Join a Server\n            </ModalHeader>\n            <ModalCloseButton />\n            <ModalBody pb={3}>\n              <Text fontSize=\"14px\" textColor=\"brandGray.accent\">\n                Enter an invite below to join an existing server\n              </Text>\n              <InputField label=\"invite link\" name=\"link\" />\n\n              <Text\n                mt=\"4\"\n                fontSize=\"12px\"\n                fontWeight=\"semibold\"\n                textColor=\"brandGray.accent\"\n                textTransform=\"uppercase\"\n              >\n                invite links should look like\n              </Text>\n\n              <Text mt=\"2\" fontSize=\"12px\" textColor=\"brandGray.accent\">\n                drqgi2\n              </Text>\n              <Text fontSize=\"12px\" textColor=\"brandGray.accent\">\n                https://discord.gg/drqgi2\n              </Text>\n            </ModalBody>\n\n            <ModalFooter bg=\"brandGray.dark\">\n              <Button mr={6} variant=\"link\" onClick={goBack} fontSize={\"14px\"}>\n                Back\n              </Button>\n              <Button\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                isLoading={isSubmitting}\n                fontSize={\"14px\"}\n              >\n                Join Server\n              </Button>\n            </ModalFooter>\n          </Form>\n        )}\n      </Formik>\n    </ModalContent>\n  );\n}\n\nfunction CreateServerModal({ goBack, submitClose }) {\n  const current = userStore((state) => state.current);\n  const history = useHistory();\n  const cache = useQueryClient();\n\n  async function handleCreateServer(values, { setErrors }) {\n    try {\n      const { data } = await createGuild(values);\n      if (data) {\n        cache.setQueryData(gKey, (guilds) => {\n          return [...guilds, data];\n        });\n        submitClose();\n        history.push(`/channels/${data.id}/${data.default_channel_id}`);\n      }\n    } catch (errors) {\n      setErrors(toErrorMap(errors));\n    }\n  }\n\n  return (\n    <ModalContent bg=\"brandGray.light\">\n      <Formik\n        initialValues={{\n          name: `${current.username}'s server`,\n        }}\n        validationSchema={GuildSchema}\n        onSubmit={handleCreateServer}\n      >\n        {({ isSubmitting, values }) => (\n          <Form initialValues={{ name: `${current.username}'s server ðŸ˜Ž ` }}>\n            <ModalHeader textAlign=\"center\" fontWeight=\"bold\" pb=\"0\">\n              Create your server\n            </ModalHeader>\n            <ModalCloseButton />\n            <ModalBody pb={3}>\n              <InputField label=\"server name\" name=\"name\" value={values.name} />\n            </ModalBody>\n\n            <ModalFooter bg=\"brandGray.dark\">\n              <Button mr={6} fontSize={\"14px\"} variant=\"link\" onClick={goBack}>\n                Back\n              </Button>\n              <Button\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                isLoading={isSubmitting}\n                fontSize={\"14px\"}\n              >\n                Create\n              </Button>\n            </ModalFooter>\n          </Form>\n        )}\n      </Formik>\n    </ModalContent>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}