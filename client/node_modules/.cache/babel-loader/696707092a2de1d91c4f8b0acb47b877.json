{"ast":null,"code":"import _toConsumableArray from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Divider,Modal,ModalBody,ModalCloseButton,ModalContent,ModalFooter,ModalHeader,ModalOverlay,Text,VStack}from\"@chakra-ui/react\";import{createGuild,joinGuild}from\"api/handler/guilds\";import{Form,Formik}from\"formik\";import React,{useState}from\"react\";import{useQueryClient}from\"react-query\";import{useHistory}from\"react-router-dom\";import userStore from\"stores/userStore\";import{gKey}from\"utils/querykeys\";import toErrorMap from\"utils/toErrorMap\";import{GuildSchema}from\"validation/guild.schema\";import InputField from\"components/shared/InputField\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddGuildModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose;var _useState=useState(\"START\"),_useState2=_slicedToArray(_useState,2),screen=_useState2[0],setScreen=_useState2[1];var goBack=function goBack(){return setScreen(\"START\");};var submitClose=function submitClose(){setScreen(\"START\");onClose();};return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:submitClose,isCentered:true,size:\"sm\",children:[/*#__PURE__*/_jsx(ModalOverlay,{}),screen===\"INVITE\"&&/*#__PURE__*/_jsx(JoinServerModal,{goBack:goBack,submitClose:submitClose}),screen===\"CREATE\"&&/*#__PURE__*/_jsx(CreateServerModal,{goBack:goBack,submitClose:submitClose}),screen===\"START\"&&/*#__PURE__*/_jsxs(ModalContent,{bg:\"brandGray.light\",children:[/*#__PURE__*/_jsx(ModalHeader,{textAlign:\"center\",fontWeight:\"bold\",children:\"Create a server\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsx(ModalBody,{pb:6,children:/*#__PURE__*/_jsxs(VStack,{spacing:\"5\",children:[/*#__PURE__*/_jsx(Text,{textAlign:\"center\",children:\"Your server is where you and your friends hang out. Make yours and start talking.\"}),/*#__PURE__*/_jsx(Button,{background:\"highlight.standard\",color:\"white\",type:\"submit\",_hover:{bg:\"highlight.hover\"},_active:{bg:\"highlight.active\"},_focus:{boxShadow:\"none\"},w:\"full\",onClick:function onClick(){return setScreen(\"CREATE\");},children:\"Create My Own\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Text,{children:\"Have an invite already?\"}),/*#__PURE__*/_jsx(Button,{mt:\"4\",background:\"highlight.standard\",color:\"white\",type:\"submit\",_hover:{bg:\"highlight.hover\"},_active:{bg:\"highlight.active\"},_focus:{boxShadow:\"none\"},w:\"full\",onClick:function onClick(){return setScreen(\"INVITE\");},children:\"Join a Server\"})]})})]})]});}function JoinServerModal(_ref2){var goBack=_ref2.goBack,submitClose=_ref2.submitClose;var cache=useQueryClient();var history=useHistory();function handleJoinServer(_x,_x2){return _handleJoinServer.apply(this,arguments);}function _handleJoinServer(){_handleJoinServer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref3){var setErrors,_yield$joinGuild,data,_error$response,status,_error$response2,_error$response2$data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref3.setErrors;if(!(values.length===\"\")){_context.next=5;break;}setErrors({link:\"Please enter a valid link\"});_context.next=17;break;case 5:_context.prev=5;_context.next=8;return joinGuild(values);case 8:_yield$joinGuild=_context.sent;data=_yield$joinGuild.data;if(data){cache.invalidateQueries(gKey);submitClose();history.push(\"/channels/\".concat(data.id,\"/\").concat(data.default_channel_id));}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);status=_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:_error$response.status;if(status===404||status===400){setErrors({link:_context.t0===null||_context.t0===void 0?void 0:(_error$response2=_context.t0.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message});}else{setErrors(toErrorMap(_context.t0));}case 17:case\"end\":return _context.stop();}}},_callee,null,[[5,13]]);}));return _handleJoinServer.apply(this,arguments);}return/*#__PURE__*/_jsx(ModalContent,{bg:\"brandGray.light\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{link:\"\"},onSubmit:handleJoinServer,children:function children(_ref4){var isSubmitting=_ref4.isSubmitting;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(ModalHeader,{textAlign:\"center\",fontWeight:\"bold\",pb:\"0\",children:\"Join a Server\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsxs(ModalBody,{pb:3,children:[/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",textColor:\"brandGray.accent\",children:\"Enter an invite below to join an existing server\"}),/*#__PURE__*/_jsx(InputField,{label:\"invite link\",name:\"link\"}),/*#__PURE__*/_jsx(Text,{mt:\"4\",fontSize:\"12px\",fontWeight:\"semibold\",textColor:\"brandGray.accent\",textTransform:\"uppercase\",children:\"invite links should look like\"}),/*#__PURE__*/_jsx(Text,{mt:\"2\",fontSize:\"12px\",textColor:\"brandGray.accent\",children:\"drqgi2\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",textColor:\"brandGray.accent\",children:\"https://discord.gg/drqgi2\"})]}),/*#__PURE__*/_jsxs(ModalFooter,{bg:\"brandGray.dark\",children:[/*#__PURE__*/_jsx(Button,{mr:6,variant:\"link\",onClick:goBack,fontSize:\"14px\",children:\"Back\"}),/*#__PURE__*/_jsx(Button,{background:\"highlight.standard\",color:\"white\",type:\"submit\",_hover:{bg:\"highlight.hover\"},_active:{bg:\"highlight.active\"},_focus:{boxShadow:\"none\"},isLoading:isSubmitting,fontSize:\"14px\",children:\"Join Server\"})]})]});}})});}function CreateServerModal(_ref5){var goBack=_ref5.goBack,submitClose=_ref5.submitClose;var current=userStore(function(state){return state.current;});var history=useHistory();var cache=useQueryClient();function handleCreateServer(_x3,_x4){return _handleCreateServer.apply(this,arguments);}function _handleCreateServer(){_handleCreateServer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values,_ref6){var setErrors,_yield$createGuild,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setErrors=_ref6.setErrors;_context2.prev=1;_context2.next=4;return createGuild(values);case 4:_yield$createGuild=_context2.sent;data=_yield$createGuild.data;if(data){cache.setQueryData(gKey,function(guilds){return[].concat(_toConsumableArray(guilds),[data]);});submitClose();history.push(\"/channels/\".concat(data.id,\"/\").concat(data.default_channel_id));}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);setErrors(toErrorMap(_context2.t0));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return _handleCreateServer.apply(this,arguments);}return/*#__PURE__*/_jsx(ModalContent,{bg:\"brandGray.light\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{name:\"\".concat(current.username,\"'s server\")},validationSchema:GuildSchema,onSubmit:handleCreateServer,children:function children(_ref7){var isSubmitting=_ref7.isSubmitting,values=_ref7.values;return/*#__PURE__*/_jsxs(Form,{initialValues:{name:\"\".concat(current.username,\"'s server \\uD83D\\uDE0E \")},children:[/*#__PURE__*/_jsx(ModalHeader,{textAlign:\"center\",fontWeight:\"bold\",pb:\"0\",children:\"Create your server\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsx(ModalBody,{pb:3,children:/*#__PURE__*/_jsx(InputField,{label:\"server name\",name:\"name\",value:values.name})}),/*#__PURE__*/_jsxs(ModalFooter,{bg:\"brandGray.dark\",children:[/*#__PURE__*/_jsx(Button,{mr:6,fontSize:\"14px\",variant:\"link\",onClick:goBack,children:\"Back\"}),/*#__PURE__*/_jsx(Button,{background:\"highlight.standard\",color:\"white\",type:\"submit\",_hover:{bg:\"highlight.hover\"},_active:{bg:\"highlight.active\"},_focus:{boxShadow:\"none\"},isLoading:isSubmitting,fontSize:\"14px\",children:\"Create\"})]})]});}})});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/AddGuildModal.js"],"names":["Button","Divider","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","Text","VStack","createGuild","joinGuild","Form","Formik","React","useState","useQueryClient","useHistory","userStore","gKey","toErrorMap","GuildSchema","InputField","AddGuildModal","isOpen","onClose","screen","setScreen","goBack","submitClose","bg","boxShadow","JoinServerModal","cache","history","handleJoinServer","values","setErrors","length","link","data","invalidateQueries","push","id","default_channel_id","status","response","message","isSubmitting","CreateServerModal","current","state","handleCreateServer","setQueryData","guilds","name","username"],"mappings":"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","sourcesContent":["import {\n  Button,\n  Divider,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Text,\n  VStack,\n} from \"@chakra-ui/react\";\nimport { createGuild, joinGuild } from \"api/handler/guilds\";\nimport { Form, Formik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { useQueryClient } from \"react-query\";\nimport { useHistory } from \"react-router-dom\";\nimport userStore from \"stores/userStore\";\nimport { gKey } from \"utils/querykeys\";\nimport toErrorMap from \"utils/toErrorMap\";\nimport { GuildSchema } from \"validation/guild.schema\";\nimport InputField from \"components/shared/InputField\";\n\nexport default function AddGuildModal({ isOpen, onClose }) {\n  const [screen, setScreen] = useState(\"START\");\n\n  const goBack = () => setScreen(\"START\");\n  const submitClose = () => {\n    setScreen(\"START\");\n    onClose();\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={submitClose} isCentered size=\"sm\">\n      <ModalOverlay />\n      {screen === \"INVITE\" && (\n        <JoinServerModal goBack={goBack} submitClose={submitClose} />\n      )}\n      {screen === \"CREATE\" && (\n        <CreateServerModal goBack={goBack} submitClose={submitClose} />\n      )}\n      {screen === \"START\" && (\n        <ModalContent bg=\"brandGray.light\">\n          <ModalHeader textAlign=\"center\" fontWeight=\"bold\">\n            Create a server\n          </ModalHeader>\n          <ModalCloseButton />\n          <ModalBody pb={6}>\n            <VStack spacing=\"5\">\n              <Text textAlign=\"center\">\n                Your server is where you and your friends hang out. Make yours\n                and start talking.\n              </Text>\n\n              <Button\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                w=\"full\"\n                onClick={() => setScreen(\"CREATE\")}\n              >\n                Create My Own\n              </Button>\n\n              <Divider />\n\n              <Text>Have an invite already?</Text>\n\n              <Button\n                mt=\"4\"\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                w=\"full\"\n                onClick={() => setScreen(\"INVITE\")}\n              >\n                Join a Server\n              </Button>\n            </VStack>\n          </ModalBody>\n        </ModalContent>\n      )}\n    </Modal>\n  );\n}\n\nfunction JoinServerModal({ goBack, submitClose }) {\n  const cache = useQueryClient();\n  const history = useHistory();\n  async function handleJoinServer(values, { setErrors }) {\n    if (values.length === \"\") {\n      setErrors({ link: \"Please enter a valid link\" });\n    } else {\n      try {\n        const { data } = await joinGuild(values);\n        if (data) {\n          cache.invalidateQueries(gKey);\n          submitClose();\n          history.push(`/channels/${data.id}/${data.default_channel_id}`);\n        }\n      } catch (error) {\n        const status = error?.response?.status;\n        if (status === 404 || status === 400) {\n          setErrors({ link: error?.response?.data?.message });\n        } else {\n          setErrors(toErrorMap(error));\n        }\n      }\n    }\n  }\n\n  return (\n    <ModalContent bg=\"brandGray.light\">\n      <Formik initialValues={{ link: \"\" }} onSubmit={handleJoinServer}>\n        {({ isSubmitting }) => (\n          <Form>\n            <ModalHeader textAlign=\"center\" fontWeight=\"bold\" pb=\"0\">\n              Join a Server\n            </ModalHeader>\n            <ModalCloseButton />\n            <ModalBody pb={3}>\n              <Text fontSize=\"14px\" textColor=\"brandGray.accent\">\n                Enter an invite below to join an existing server\n              </Text>\n              <InputField label=\"invite link\" name=\"link\" />\n\n              <Text\n                mt=\"4\"\n                fontSize=\"12px\"\n                fontWeight=\"semibold\"\n                textColor=\"brandGray.accent\"\n                textTransform=\"uppercase\"\n              >\n                invite links should look like\n              </Text>\n\n              <Text mt=\"2\" fontSize=\"12px\" textColor=\"brandGray.accent\">\n                drqgi2\n              </Text>\n              <Text fontSize=\"12px\" textColor=\"brandGray.accent\">\n                https://discord.gg/drqgi2\n              </Text>\n            </ModalBody>\n\n            <ModalFooter bg=\"brandGray.dark\">\n              <Button mr={6} variant=\"link\" onClick={goBack} fontSize={\"14px\"}>\n                Back\n              </Button>\n              <Button\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                isLoading={isSubmitting}\n                fontSize={\"14px\"}\n              >\n                Join Server\n              </Button>\n            </ModalFooter>\n          </Form>\n        )}\n      </Formik>\n    </ModalContent>\n  );\n}\n\nfunction CreateServerModal({ goBack, submitClose }) {\n  const current = userStore((state) => state.current);\n  const history = useHistory();\n  const cache = useQueryClient();\n\n  async function handleCreateServer(values, { setErrors }) {\n    try {\n      const { data } = await createGuild(values);\n      if (data) {\n        cache.setQueryData(gKey, (guilds) => {\n          return [...guilds, data];\n        });\n        submitClose();\n        history.push(`/channels/${data.id}/${data.default_channel_id}`);\n      }\n    } catch (errors) {\n      setErrors(toErrorMap(errors));\n    }\n  }\n\n  return (\n    <ModalContent bg=\"brandGray.light\">\n      <Formik\n        initialValues={{\n          name: `${current.username}'s server`,\n        }}\n        validationSchema={GuildSchema}\n        onSubmit={handleCreateServer}\n      >\n        {({ isSubmitting, values }) => (\n          <Form initialValues={{ name: `${current.username}'s server ðŸ˜Ž ` }}>\n            <ModalHeader textAlign=\"center\" fontWeight=\"bold\" pb=\"0\">\n              Create your server\n            </ModalHeader>\n            <ModalCloseButton />\n            <ModalBody pb={3}>\n              <InputField label=\"server name\" name=\"name\" value={values.name} />\n            </ModalBody>\n\n            <ModalFooter bg=\"brandGray.dark\">\n              <Button mr={6} fontSize={\"14px\"} variant=\"link\" onClick={goBack}>\n                Back\n              </Button>\n              <Button\n                background=\"highlight.standard\"\n                color=\"white\"\n                type=\"submit\"\n                _hover={{ bg: \"highlight.hover\" }}\n                _active={{ bg: \"highlight.active\" }}\n                _focus={{ boxShadow: \"none\" }}\n                isLoading={isSubmitting}\n                fontSize={\"14px\"}\n              >\n                Create\n              </Button>\n            </ModalFooter>\n          </Form>\n        )}\n      </Formik>\n    </ModalContent>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}