{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Avatar,Box,Flex,IconButton,ListItem,Text}from\"@chakra-ui/react\";import{acceptFriendRequest,declineFriendRequest}from\"api/handler/account\";import StyledTooltip from\"components/sections/StyledTooltip\";import React from\"react\";import{AiOutlineClose}from\"react-icons/ai\";import{BiCheck}from\"react-icons/bi\";import{useQueryClient}from\"react-query\";import{fKey,rKey}from\"utils/querykeys\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RequestListItem(_ref){var request=_ref.request;var cache=useQueryClient();var acceptRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$acceptFriendRe,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return acceptFriendRequest(request.id);case 2:_yield$acceptFriendRe=_context.sent;data=_yield$acceptFriendRe.data;if(!data){_context.next=8;break;}cache.setQueryData(rKey,function(d){return d===null||d===void 0?void 0:d.filter(function(r){return r.id!==request.id;});});_context.next=8;return cache.invalidateQueries(fKey);case 8:case\"end\":return _context.stop();}}},_callee);}));return function acceptRequest(){return _ref2.apply(this,arguments);};}();var declineRequest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$declineFriendR,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return declineFriendRequest(request.id);case 2:_yield$declineFriendR=_context2.sent;data=_yield$declineFriendR.data;if(data){cache.setQueryData(rKey,function(d){return d===null||d===void 0?void 0:d.filter(function(r){return r.id!==request.id;});});}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function declineRequest(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(ListItem,{p:\"3\",mx:\"3\",_hover:{bg:\"brandGray.dark\",borderRadius:\"5px\"},children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Avatar,{size:\"sm\",src:request.image}),/*#__PURE__*/_jsxs(Box,{ml:\"2\",children:[/*#__PURE__*/_jsx(Text,{children:request.username}),/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",children:request.type===1?\"Incoming Friend Request\":\"Outgoing Friend Request\"})]})]}),/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[request.type===1&&/*#__PURE__*/_jsx(StyledTooltip,{label:\"Accept\",position:\"top\",children:/*#__PURE__*/_jsx(IconButton,{icon:/*#__PURE__*/_jsx(BiCheck,{}),borderRadius:\"50%\",\"aria-label\":\"accept request\",fontSize:\"28px\",onClick:acceptRequest,mr:\"2\"})}),/*#__PURE__*/_jsx(StyledTooltip,{label:\"Decline\",position:\"top\",children:/*#__PURE__*/_jsx(IconButton,{icon:/*#__PURE__*/_jsx(AiOutlineClose,{}),borderRadius:\"50%\",\"aria-label\":\"decline request\",fontSize:\"20px\",onClick:declineRequest})})]})]})});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/items/RequestListItem.js"],"names":["Avatar","Box","Flex","IconButton","ListItem","Text","acceptFriendRequest","declineFriendRequest","StyledTooltip","React","AiOutlineClose","BiCheck","useQueryClient","fKey","rKey","RequestListItem","request","cache","acceptRequest","id","data","setQueryData","d","filter","r","invalidateQueries","declineRequest","bg","borderRadius","image","username","type"],"mappings":"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","sourcesContent":["import {\n  Avatar,\n  Box,\n  Flex,\n  IconButton,\n  ListItem,\n  Text,\n} from \"@chakra-ui/react\";\nimport { acceptFriendRequest, declineFriendRequest } from \"api/handler/account\";\nimport StyledTooltip from \"components/sections/StyledTooltip\";\nimport React from \"react\";\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { BiCheck } from \"react-icons/bi\";\nimport { useQueryClient } from \"react-query\";\nimport { fKey, rKey } from \"utils/querykeys\";\n\nexport default function RequestListItem({ request }) {\n  const cache = useQueryClient();\n\n  const acceptRequest = async () => {\n    const { data } = await acceptFriendRequest(request.id);\n    if (data) {\n      cache.setQueryData(rKey, (d) => {\n        return d?.filter((r) => r.id !== request.id);\n      });\n      await cache.invalidateQueries(fKey);\n    }\n  };\n\n  const declineRequest = async () => {\n    const { data } = await declineFriendRequest(request.id);\n    if (data) {\n      cache.setQueryData(rKey, (d) => {\n        return d?.filter((r) => r.id !== request.id);\n      });\n    }\n  };\n\n  return (\n    <ListItem\n      p=\"3\"\n      mx=\"3\"\n      _hover={{\n        bg: \"brandGray.dark\",\n        borderRadius: \"5px\",\n      }}\n    >\n      <Flex align=\"center\" justify=\"space-between\">\n        <Flex align=\"center\">\n          <Avatar size=\"sm\" src={request.image} />\n          <Box ml=\"2\">\n            <Text>{request.username}</Text>\n            <Text fontSize={\"12px\"}>\n              {request.type === 1\n                ? \"Incoming Friend Request\"\n                : \"Outgoing Friend Request\"}\n            </Text>\n          </Box>\n        </Flex>\n        <Flex align={\"center\"}>\n          {request.type === 1 && (\n            <StyledTooltip label={\"Accept\"} position={\"top\"}>\n              <IconButton\n                icon={<BiCheck />}\n                borderRadius=\"50%\"\n                aria-label=\"accept request\"\n                fontSize={\"28px\"}\n                onClick={acceptRequest}\n                mr={\"2\"}\n              />\n            </StyledTooltip>\n          )}\n          <StyledTooltip label={\"Decline\"} position={\"top\"}>\n            <IconButton\n              icon={<AiOutlineClose />}\n              borderRadius=\"50%\"\n              aria-label=\"decline request\"\n              fontSize={\"20px\"}\n              onClick={declineRequest}\n            />\n          </StyledTooltip>\n        </Flex>\n      </Flex>\n    </ListItem>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}