{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Flex,Text,useDisclosure}from\"@chakra-ui/react\";import{sendFriendRequest}from\"api/handler/account\";import{getOrCreateDirectMessage}from\"api/handler/dm\";import ModActionModal from\"components/modals/ModActionModal\";import RemoveFriendModal from\"components/modals/RemoveFriendModal\";import React,{useState}from\"react\";import{Item,Menu,theme}from\"react-contexify\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function MemberContextMenu(_ref){var member=_ref.member,isOwner=_ref.isOwner,id=_ref.id;var history=useHistory();var _useDisclosure=useDisclosure(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose;var _useDisclosure2=useDisclosure(),modIsOpen=_useDisclosure2.isOpen,modOnOpen=_useDisclosure2.onOpen,modOnClose=_useDisclosure2.onClose;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isBan=_useState2[0],setIsBan=_useState2[1];var getOrCreateDM=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getOrCreateDir,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getOrCreateDirectMessage(member.id);case 2:_yield$getOrCreateDir=_context.sent;data=_yield$getOrCreateDir.data;if(data){history.push(\"/channels/me/\".concat(data.id));}case 5:case\"end\":return _context.stop();}}},_callee);}));return function getOrCreateDM(){return _ref2.apply(this,arguments);};}();var handleFriendClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(member.isFriend){_context2.next=5;break;}_context2.next=3;return sendFriendRequest(member.id);case 3:_context2.next=6;break;case 5:onOpen();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleFriendClick(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Menu,{id:id,theme:theme.dark,children:[/*#__PURE__*/_jsx(Item,{onClick:getOrCreateDM,className:\"menu-item\",children:/*#__PURE__*/_jsx(Flex,{align:\"center\",justify:\"space-between\",w:\"full\",children:/*#__PURE__*/_jsx(Text,{children:\"Message\"})})}),/*#__PURE__*/_jsx(Item,{onClick:handleFriendClick,className:\"menu-item\",children:/*#__PURE__*/_jsx(Flex,{align:\"center\",justify:\"space-between\",w:\"full\",children:/*#__PURE__*/_jsxs(Text,{children:[member.isFriend?\"Remove\":\"Add\",\" Friend\"]})})}),isOwner&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Item,{onClick:function onClick(){setIsBan(false);modOnOpen();},className:\"delete-item\",children:/*#__PURE__*/_jsx(Flex,{align:\"center\",justify:\"space-between\",w:\"full\",children:/*#__PURE__*/_jsxs(Text,{children:[\"Kick \",member.username]})})}),/*#__PURE__*/_jsx(Item,{onClick:function onClick(){setIsBan(true);modOnOpen();},className:\"delete-item\",children:/*#__PURE__*/_jsx(Flex,{align:\"center\",justify:\"space-between\",w:\"full\",children:/*#__PURE__*/_jsxs(Text,{children:[\"Ban \",member.username]})})})]})]}),isOpen&&/*#__PURE__*/_jsx(RemoveFriendModal,{id:member.id,isOpen:true,onClose:onClose}),modIsOpen&&/*#__PURE__*/_jsx(ModActionModal,{member:member,isOpen:modIsOpen,isBan:isBan,onClose:modOnClose})]});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/menus/MemberContextMenu.js"],"names":["Flex","Text","useDisclosure","sendFriendRequest","getOrCreateDirectMessage","ModActionModal","RemoveFriendModal","React","useState","Item","Menu","theme","useHistory","MemberContextMenu","member","isOwner","id","history","isOpen","onOpen","onClose","modIsOpen","modOnOpen","modOnClose","isBan","setIsBan","getOrCreateDM","data","push","handleFriendClick","isFriend","dark","username"],"mappings":"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","sourcesContent":["import { Flex, Text, useDisclosure } from \"@chakra-ui/react\";\nimport { sendFriendRequest } from \"api/handler/account\";\nimport { getOrCreateDirectMessage } from \"api/handler/dm\";\nimport ModActionModal from \"components/modals/ModActionModal\";\nimport RemoveFriendModal from \"components/modals/RemoveFriendModal\";\nimport React, { useState } from \"react\";\nimport { Item, Menu, theme } from \"react-contexify\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function MemberContextMenu({ member, isOwner, id }) {\n  const history = useHistory();\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const {\n    isOpen: modIsOpen,\n    onOpen: modOnOpen,\n    onClose: modOnClose,\n  } = useDisclosure();\n  const [isBan, setIsBan] = useState(false);\n\n  const getOrCreateDM = async () => {\n    const { data } = await getOrCreateDirectMessage(member.id);\n    if (data) {\n      history.push(`/channels/me/${data.id}`);\n    }\n  };\n\n  const handleFriendClick = async () => {\n    if (!member.isFriend) {\n      await sendFriendRequest(member.id);\n    } else {\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <Menu id={id} theme={theme.dark}>\n        <Item onClick={getOrCreateDM} className={\"menu-item\"}>\n          <Flex align=\"center\" justify=\"space-between\" w=\"full\">\n            <Text>Message</Text>\n          </Flex>\n        </Item>\n        <Item onClick={handleFriendClick} className={\"menu-item\"}>\n          <Flex align=\"center\" justify=\"space-between\" w=\"full\">\n            <Text>{member.isFriend ? \"Remove\" : \"Add\"} Friend</Text>\n          </Flex>\n        </Item>\n        {isOwner && (\n          <>\n            <Item\n              onClick={() => {\n                setIsBan(false);\n                modOnOpen();\n              }}\n              className={\"delete-item\"}\n            >\n              <Flex align=\"center\" justify=\"space-between\" w=\"full\">\n                <Text>Kick {member.username}</Text>\n              </Flex>\n            </Item>\n            <Item\n              onClick={() => {\n                setIsBan(true);\n                modOnOpen();\n              }}\n              className={\"delete-item\"}\n            >\n              <Flex align=\"center\" justify=\"space-between\" w=\"full\">\n                <Text>Ban {member.username}</Text>\n              </Flex>\n            </Item>\n          </>\n        )}\n      </Menu>\n      {isOpen && <RemoveFriendModal id={member.id} isOpen onClose={onClose} />}\n      {modIsOpen && (\n        <ModActionModal\n          member={member}\n          isOpen={modIsOpen}\n          isBan={isBan}\n          onClose={modOnClose}\n        />\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}