{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport userStore from \"stores/userStore\";\nimport getSocket from \"api/getSocket\";\nimport homeStore from \"stores/homeStore\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GlobalState({\n  children\n}) {\n  _s();\n\n  const current = userStore(state => state.current);\n  const inc = homeStore(state => state.increment);\n  useEffect(() => {\n    if (current) {\n      const incrementNotification = () => {\n        if (!window.location.pathname.includes(\"/channels/me\")) {\n          inc();\n        }\n      };\n\n      const disconnect = () => {\n        socket.emit(\"toggleOffline\");\n        socket.disconnect();\n      };\n\n      const socket = getSocket();\n      socket.emit(\"toggleOnline\");\n      socket.emit(\"joinUser\", current === null || current === void 0 ? void 0 : current.id);\n      socket.on(\"push_to_top\", () => {\n        incrementNotification();\n      });\n      socket.on(\"send_request\", () => {\n        incrementNotification();\n      });\n      window.addEventListener(\"beforeunload\", disconnect);\n      return () => disconnect();\n    }\n  }, [current, inc]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n}\n\n_s(GlobalState, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = GlobalState;\n\nvar _c;\n\n$RefreshReg$(_c, \"GlobalState\");","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/sections/GlobalState.js"],"names":["React","useEffect","userStore","getSocket","homeStore","GlobalState","children","current","state","inc","increment","incrementNotification","window","location","pathname","includes","disconnect","socket","emit","id","on","addEventListener"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,SAAP,MAAsB,eAAtB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;;;AAEA,eAAe,SAASC,WAAT,CAAqB;AAAEC,EAAAA;AAAF,CAArB,EAAmC;AAAA;;AAChD,QAAMC,OAAO,GAAGL,SAAS,CAAEM,KAAD,IAAWA,KAAK,CAACD,OAAlB,CAAzB;AACA,QAAME,GAAG,GAAGL,SAAS,CAAEI,KAAD,IAAWA,KAAK,CAACE,SAAlB,CAArB;AAEAT,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIM,OAAJ,EAAa;AACX,YAAMI,qBAAqB,GAAG,MAAM;AAClC,YAAI,CAACC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,QAAzB,CAAkC,cAAlC,CAAL,EAAwD;AACtDN,UAAAA,GAAG;AACJ;AACF,OAJD;;AAMA,YAAMO,UAAU,GAAG,MAAM;AACvBC,QAAAA,MAAM,CAACC,IAAP,CAAY,eAAZ;AACAD,QAAAA,MAAM,CAACD,UAAP;AACD,OAHD;;AAKA,YAAMC,MAAM,GAAGd,SAAS,EAAxB;AACAc,MAAAA,MAAM,CAACC,IAAP,CAAY,cAAZ;AACAD,MAAAA,MAAM,CAACC,IAAP,CAAY,UAAZ,EAAwBX,OAAxB,aAAwBA,OAAxB,uBAAwBA,OAAO,CAAEY,EAAjC;AAEAF,MAAAA,MAAM,CAACG,EAAP,CAAU,aAAV,EAAyB,MAAM;AAC7BT,QAAAA,qBAAqB;AACtB,OAFD;AAIAM,MAAAA,MAAM,CAACG,EAAP,CAAU,cAAV,EAA0B,MAAM;AAC9BT,QAAAA,qBAAqB;AACtB,OAFD;AAIAC,MAAAA,MAAM,CAACS,gBAAP,CAAwB,cAAxB,EAAwCL,UAAxC;AAEA,aAAO,MAAMA,UAAU,EAAvB;AACD;AACF,GA7BQ,EA6BN,CAACT,OAAD,EAAUE,GAAV,CA7BM,CAAT;AA+BA,sBAAO;AAAA,cAAGH;AAAH,mBAAP;AACD;;GApCuBD,W;;KAAAA,W","sourcesContent":["import React, { useEffect } from \"react\";\nimport userStore from \"stores/userStore\";\nimport getSocket from \"api/getSocket\";\nimport homeStore from \"stores/homeStore\";\n\nexport default function GlobalState({ children }) {\n  const current = userStore((state) => state.current);\n  const inc = homeStore((state) => state.increment);\n\n  useEffect(() => {\n    if (current) {\n      const incrementNotification = () => {\n        if (!window.location.pathname.includes(\"/channels/me\")) {\n          inc();\n        }\n      };\n\n      const disconnect = () => {\n        socket.emit(\"toggleOffline\");\n        socket.disconnect();\n      };\n\n      const socket = getSocket();\n      socket.emit(\"toggleOnline\");\n      socket.emit(\"joinUser\", current?.id);\n\n      socket.on(\"push_to_top\", () => {\n        incrementNotification();\n      });\n\n      socket.on(\"send_request\", () => {\n        incrementNotification();\n      });\n\n      window.addEventListener(\"beforeunload\", disconnect);\n\n      return () => disconnect();\n    }\n  }, [current, inc]);\n\n  return <>{children}</>;\n}\n"]},"metadata":{},"sourceType":"module"}