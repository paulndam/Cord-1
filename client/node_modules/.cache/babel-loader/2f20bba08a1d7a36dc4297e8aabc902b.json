{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Box,Button,Modal,ModalBody,ModalCloseButton,ModalContent,ModalFooter,ModalHeader,ModalOverlay,Slider,SliderFilledTrack,SliderThumb,SliderTrack}from\"@chakra-ui/react\";import React,{useCallback,useState}from\"react\";import Cropper from\"react-easy-crop\";import getCroppedImg from\"utils/cropImage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CropImageModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,applyCrop=_ref.applyCrop,initialImage=_ref.initialImage;var _useState=useState({x:0,y:0}),_useState2=_slicedToArray(_useState,2),crop=_useState2[0],setCrop=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),zoom=_useState4[0],setZoom=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),croppedAreaPixels=_useState6[0],setCroppedAreaPixels=_useState6[1];var onCropComplete=useCallback(function(croppedArea,croppedAreaPixels){setCroppedAreaPixels(croppedAreaPixels);},[]);var showCroppedImage=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var croppedImage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getCroppedImg(initialImage,croppedAreaPixels);case 3:croppedImage=_context.sent;applyCrop(croppedImage);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[croppedAreaPixels,initialImage,applyCrop]);return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,isCentered:true,closeOnOverlayClick:false,children:[/*#__PURE__*/_jsx(ModalOverlay,{}),/*#__PURE__*/_jsxs(ModalContent,{bg:\"brandGray.light\",children:[/*#__PURE__*/_jsx(ModalHeader,{fontWeight:\"bold\",children:\"EDIT MEDIA\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(Box,{h:\"400px\",overflow:\"hidden\",position:\"relative\",children:/*#__PURE__*/_jsx(Cropper,{image:initialImage,crop:crop,zoom:zoom,aspect:1,cropShape:\"round\",onCropChange:setCrop,onCropComplete:onCropComplete,onZoomChange:setZoom})}),/*#__PURE__*/_jsxs(Slider,{\"aria-label\":\"zoom\",min:1,max:3,step:0.01,value:zoom,onChange:function onChange(value){return setZoom(value);},my:\"4\",children:[/*#__PURE__*/_jsx(SliderTrack,{children:/*#__PURE__*/_jsx(SliderFilledTrack,{})}),/*#__PURE__*/_jsx(SliderThumb,{})]})]}),/*#__PURE__*/_jsxs(ModalFooter,{bg:\"brandGray.dark\",children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,fontSize:\"14px\",mr:6,variant:\"link\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{background:\"highlight.standard\",color:\"white\",type:\"submit\",fontSize:\"14px\",_hover:{bg:\"highlight.hover\"},_active:{bg:\"highlight.active\"},_focus:{boxShadow:\"none\"},onClick:showCroppedImage,children:\"Apply\"})]})]})]});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/CropImageModal.js"],"names":["Box","Button","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","Slider","SliderFilledTrack","SliderThumb","SliderTrack","React","useCallback","useState","Cropper","getCroppedImg","CropImageModal","isOpen","onClose","applyCrop","initialImage","x","y","crop","setCrop","zoom","setZoom","croppedAreaPixels","setCroppedAreaPixels","onCropComplete","croppedArea","showCroppedImage","croppedImage","console","error","value","bg","boxShadow"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Slider,\n  SliderFilledTrack,\n  SliderThumb,\n  SliderTrack,\n} from \"@chakra-ui/react\";\nimport React, { useCallback, useState } from \"react\";\nimport Cropper from \"react-easy-crop\";\nimport getCroppedImg from \"utils/cropImage\";\n\nexport default function CropImageModal({\n  isOpen,\n  onClose,\n  applyCrop,\n  initialImage,\n}) {\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);\n\n  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\n    setCroppedAreaPixels(croppedAreaPixels);\n  }, []);\n\n  const showCroppedImage = useCallback(async () => {\n    try {\n      const croppedImage = await getCroppedImg(initialImage, croppedAreaPixels);\n      applyCrop(croppedImage);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [croppedAreaPixels, initialImage, applyCrop]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCentered\n      closeOnOverlayClick={false}\n    >\n      <ModalOverlay />\n\n      <ModalContent bg=\"brandGray.light\">\n        <ModalHeader fontWeight=\"bold\">EDIT MEDIA</ModalHeader>\n        <ModalCloseButton />\n        <ModalBody>\n          <Box h=\"400px\" overflow=\"hidden\" position=\"relative\">\n            <Cropper\n              image={initialImage}\n              crop={crop}\n              zoom={zoom}\n              aspect={1}\n              cropShape=\"round\"\n              onCropChange={setCrop}\n              onCropComplete={onCropComplete}\n              onZoomChange={setZoom}\n            />\n          </Box>\n          <Slider\n            aria-label=\"zoom\"\n            min={1}\n            max={3}\n            step={0.01}\n            value={zoom}\n            onChange={(value) => setZoom(value)}\n            my=\"4\"\n          >\n            <SliderTrack>\n              <SliderFilledTrack />\n            </SliderTrack>\n            <SliderThumb />\n          </Slider>\n        </ModalBody>\n\n        <ModalFooter bg=\"brandGray.dark\">\n          <Button onClick={onClose} fontSize={\"14px\"} mr={6} variant=\"link\">\n            Cancel\n          </Button>\n          <Button\n            background=\"highlight.standard\"\n            color=\"white\"\n            type=\"submit\"\n            fontSize={\"14px\"}\n            _hover={{ bg: \"highlight.hover\" }}\n            _active={{ bg: \"highlight.active\" }}\n            _focus={{ boxShadow: \"none\" }}\n            onClick={showCroppedImage}\n          >\n            Apply\n          </Button>\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}