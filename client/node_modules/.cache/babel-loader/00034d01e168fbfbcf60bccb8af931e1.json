{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Box,Button,Flex,Heading,Image,Link,Text}from\"@chakra-ui/react\";import{Form,Formik}from\"formik\";import{Link as RLink,useHistory}from\"react-router-dom\";import InputField from\"components/shared/InputField\";import{register}from\"api/handler/auth\";import userStore from\"stores/userStore\";import toErrorMap from\"utils/toErrorMap\";import{RegisterSchema}from\"validation/auth.schema\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var history=useHistory();var setUser=userStore(function(state){return state.setUser;});var handleRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var setErrors,_yield$register,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref.setErrors;_context.prev=1;_context.next=4;return register(values);case 4:_yield$register=_context.sent;data=_yield$register.data;if(data){setUser(data);history.push(\"/channels/me\");}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setErrors(toErrorMap(_context.t0));case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleRegister(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Flex,{minHeight:\"100vh\",width:\"full\",align:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsxs(Box,{px:4,width:\"full\",maxWidth:\"500px\",textAlign:\"center\",children:[/*#__PURE__*/_jsx(Flex,{mb:\"4\",justify:\"center\",children:/*#__PURE__*/_jsx(Image,{src:\"/logo.png\",w:\"80px\"})}),/*#__PURE__*/_jsxs(Box,{p:4,borderRadius:4,background:\"brandGray.light\",children:[/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsx(Heading,{fontSize:\"24px\",children:\"Welcome to Discord\"})}),/*#__PURE__*/_jsx(Box,{my:4,textAlign:\"left\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\",username:\"\",password:\"\"},validationSchema:RegisterSchema,onSubmit:handleRegister,children:function children(_ref3){var isSubmitting=_ref3.isSubmitting;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(InputField,{label:\"Email\",name:\"email\",autoComplete:\"email\",type:\"email\"}),/*#__PURE__*/_jsx(InputField,{label:\"username\",name:\"username\"}),/*#__PURE__*/_jsx(InputField,{label:\"password\",name:\"password\",autoComplete:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(Button,{background:\"highlight.standard\",color:\"white\",width:\"full\",mt:4,type:\"submit\",isLoading:isSubmitting,_hover:{bg:\"highlight.hover\"},_active:{bg:\"highlight.active\"},_focus:{boxShadow:\"none\"},children:\"Register\"}),/*#__PURE__*/_jsxs(Text,{mt:\"4\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(Link,{as:RLink,to:\"/login\",textColor:\"highlight.standard\",children:\"Sign In\"})]})]});}})})]})]})});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/pages/Register.js"],"names":["Box","Button","Flex","Heading","Image","Link","Text","Form","Formik","RLink","useHistory","InputField","register","userStore","toErrorMap","RegisterSchema","Register","history","setUser","state","handleRegister","values","setErrors","data","push","console","log","email","username","password","isSubmitting","bg","boxShadow"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Flex,\n  Heading,\n  Image,\n  Link,\n  Text,\n} from \"@chakra-ui/react\";\nimport { Form, Formik } from \"formik\";\nimport { Link as RLink, useHistory } from \"react-router-dom\";\nimport InputField from \"components/shared/InputField\";\nimport { register } from \"api/handler/auth\";\nimport userStore from \"stores/userStore\";\nimport toErrorMap from \"utils/toErrorMap\";\nimport { RegisterSchema } from \"validation/auth.schema\";\n\nexport default function Register() {\n  const history = useHistory();\n  const setUser = userStore((state) => state.setUser);\n\n  const handleRegister = async (values, { setErrors }) => {\n    try {\n      const { data } = await register(values);\n      if (data) {\n        setUser(data);\n        history.push(\"/channels/me\");\n      }\n    } catch (error) {\n      console.log(error);\n      setErrors(toErrorMap(error));\n    }\n  };\n\n  return (\n    <Flex minHeight=\"100vh\" width=\"full\" align=\"center\" justifyContent=\"center\">\n      <Box px={4} width=\"full\" maxWidth=\"500px\" textAlign=\"center\">\n        <Flex mb=\"4\" justify=\"center\">\n          <Image src=\"/logo.png\" w=\"80px\" />\n        </Flex>\n        <Box p={4} borderRadius={4} background=\"brandGray.light\">\n          <Box textAlign=\"center\">\n            <Heading fontSize=\"24px\">Welcome to Discord</Heading>\n          </Box>\n          <Box my={4} textAlign=\"left\">\n            <Formik\n              initialValues={{ email: \"\", username: \"\", password: \"\" }}\n              validationSchema={RegisterSchema}\n              onSubmit={handleRegister}\n            >\n              {({ isSubmitting }) => (\n                <Form>\n                  <InputField\n                    label=\"Email\"\n                    name=\"email\"\n                    autoComplete=\"email\"\n                    type=\"email\"\n                  />\n\n                  <InputField label=\"username\" name=\"username\" />\n\n                  <InputField\n                    label=\"password\"\n                    name=\"password\"\n                    autoComplete=\"password\"\n                    type=\"password\"\n                  />\n\n                  <Button\n                    background=\"highlight.standard\"\n                    color=\"white\"\n                    width=\"full\"\n                    mt={4}\n                    type=\"submit\"\n                    isLoading={isSubmitting}\n                    _hover={{ bg: \"highlight.hover\" }}\n                    _active={{ bg: \"highlight.active\" }}\n                    _focus={{ boxShadow: \"none\" }}\n                  >\n                    Register\n                  </Button>\n                  <Text mt=\"4\">\n                    Already have an account?{\" \"}\n                    <Link as={RLink} to=\"/login\" textColor=\"highlight.standard\">\n                      Sign In\n                    </Link>\n                  </Text>\n                </Form>\n              )}\n            </Formik>\n          </Box>\n        </Box>\n      </Box>\n    </Flex>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}