{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Avatar,AvatarBadge,Flex,IconButton,ListItem,Text,useDisclosure}from\"@chakra-ui/react\";import React from\"react\";import{FaEllipsisV}from\"react-icons/fa\";import{useQueryClient}from\"react-query\";import{useHistory}from\"react-router-dom\";import{getOrCreateDirectMessage}from\"api/handler/dm\";import{dmKey}from\"utils/querykeys\";import RemoveFriendModal from\"components/modals/RemoveFriendModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FriendsListItem(_ref){var friend=_ref.friend;var _useDisclosure=useDisclosure(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose;var cache=useQueryClient();var history=useHistory();function getDMChannel(){return _getDMChannel.apply(this,arguments);}function _getDMChannel(){_getDMChannel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getOrCreateDir,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getOrCreateDirectMessage(friend.id);case 2:_yield$getOrCreateDir=_context.sent;data=_yield$getOrCreateDir.data;if(data){cache.invalidateQueries(dmKey);history.push(\"/channels/me/\".concat(data.id));}case 5:case\"end\":return _context.stop();}}},_callee);}));return _getDMChannel.apply(this,arguments);}return/*#__PURE__*/_jsxs(ListItem,{p:\"3\",mx:\"3\",_hover:{bg:\"brandGray.dark\",borderRadius:\"5px\"},children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",w:\"full\",onClick:getDMChannel,_hover:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(Avatar,{size:\"sm\",src:friend.image,children:/*#__PURE__*/_jsx(AvatarBadge,{boxSize:\"1.25em\",bg:friend.isOnline?\"green.500\":\"gray.500\"})}),/*#__PURE__*/_jsx(Text,{ml:\"2\",children:friend.username})]}),/*#__PURE__*/_jsx(IconButton,{icon:/*#__PURE__*/_jsx(FaEllipsisV,{}),borderRadius:\"50%\",\"aria-label\":\"remove friend\",onClick:function onClick(e){e.preventDefault();onOpen();}})]}),isOpen&&/*#__PURE__*/_jsx(RemoveFriendModal,{id:friend.id,isOpen:true,onClose:onClose})]});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/items/FriendsListItem.js"],"names":["Avatar","AvatarBadge","Flex","IconButton","ListItem","Text","useDisclosure","React","FaEllipsisV","useQueryClient","useHistory","getOrCreateDirectMessage","dmKey","RemoveFriendModal","FriendsListItem","friend","isOpen","onOpen","onClose","cache","history","getDMChannel","id","data","invalidateQueries","push","bg","borderRadius","cursor","image","isOnline","username","e","preventDefault"],"mappings":"qYAAA,OACEA,MADF,CAEEC,WAFF,CAGEC,IAHF,CAIEC,UAJF,CAKEC,QALF,CAMEC,IANF,CAOEC,aAPF,KAQO,kBARP,CASA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,cAAT,KAA+B,aAA/B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,wBAAT,KAAyC,gBAAzC,CACA,OAASC,KAAT,KAAsB,iBAAtB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qCAA9B,C,wFAEA,cAAe,SAASC,CAAAA,eAAT,MAAqC,IAAVC,CAAAA,MAAU,MAAVA,MAAU,oBACdT,aAAa,EADC,CAC1CU,MAD0C,gBAC1CA,MAD0C,CAClCC,MADkC,gBAClCA,MADkC,CAC1BC,OAD0B,gBAC1BA,OAD0B,CAElD,GAAMC,CAAAA,KAAK,CAAGV,cAAc,EAA5B,CACA,GAAMW,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CAHkD,QAKnCW,CAAAA,YALmC,8IAKlD,wLACyBV,CAAAA,wBAAwB,CAACI,MAAM,CAACO,EAAR,CADjD,4CACUC,IADV,uBACUA,IADV,CAGE,GAAIA,IAAJ,CAAU,CACRJ,KAAK,CAACK,iBAAN,CAAwBZ,KAAxB,EACAQ,OAAO,CAACK,IAAR,wBAA6BF,IAAI,CAACD,EAAlC,GACD,CANH,sDALkD,+CAclD,mBACE,MAAC,QAAD,EACE,CAAC,CAAC,GADJ,CAEE,EAAE,CAAC,GAFL,CAGE,MAAM,CAAE,CACNI,EAAE,CAAE,gBADE,CAENC,YAAY,CAAE,KAFR,CAHV,wBAQE,MAAC,IAAD,EAAM,KAAK,CAAC,QAAZ,CAAqB,OAAO,CAAC,eAA7B,wBACE,MAAC,IAAD,EACE,KAAK,CAAC,QADR,CAEE,CAAC,CAAE,MAFL,CAGE,OAAO,CAAEN,YAHX,CAIE,MAAM,CAAE,CAAEO,MAAM,CAAE,SAAV,CAJV,wBAME,KAAC,MAAD,EAAQ,IAAI,CAAC,IAAb,CAAkB,GAAG,CAAEb,MAAM,CAACc,KAA9B,uBACE,KAAC,WAAD,EACE,OAAO,CAAC,QADV,CAEE,EAAE,CAAEd,MAAM,CAACe,QAAP,CAAkB,WAAlB,CAAgC,UAFtC,EADF,EANF,cAYE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,UAAcf,MAAM,CAACgB,QAArB,EAZF,GADF,cAeE,KAAC,UAAD,EACE,IAAI,cAAE,KAAC,WAAD,IADR,CAEE,YAAY,CAAC,KAFf,CAGE,aAAW,eAHb,CAIE,OAAO,CAAE,iBAACC,CAAD,CAAO,CACdA,CAAC,CAACC,cAAF,GACAhB,MAAM,GACP,CAPH,EAfF,GARF,CAiCGD,MAAM,eAAI,KAAC,iBAAD,EAAmB,EAAE,CAAED,MAAM,CAACO,EAA9B,CAAkC,MAAM,KAAxC,CAAyC,OAAO,CAAEJ,OAAlD,EAjCb,GADF,CAqCD","sourcesContent":["import {\n  Avatar,\n  AvatarBadge,\n  Flex,\n  IconButton,\n  ListItem,\n  Text,\n  useDisclosure,\n} from \"@chakra-ui/react\";\nimport React from \"react\";\nimport { FaEllipsisV } from \"react-icons/fa\";\nimport { useQueryClient } from \"react-query\";\nimport { useHistory } from \"react-router-dom\";\nimport { getOrCreateDirectMessage } from \"api/handler/dm\";\nimport { dmKey } from \"utils/querykeys\";\nimport RemoveFriendModal from \"components/modals/RemoveFriendModal\";\n\nexport default function FriendsListItem({ friend }) {\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const cache = useQueryClient();\n  const history = useHistory();\n\n  async function getDMChannel() {\n    const { data } = await getOrCreateDirectMessage(friend.id);\n\n    if (data) {\n      cache.invalidateQueries(dmKey);\n      history.push(`/channels/me/${data.id}`);\n    }\n  }\n\n  return (\n    <ListItem\n      p=\"3\"\n      mx=\"3\"\n      _hover={{\n        bg: \"brandGray.dark\",\n        borderRadius: \"5px\",\n      }}\n    >\n      <Flex align=\"center\" justify=\"space-between\">\n        <Flex\n          align=\"center\"\n          w={\"full\"}\n          onClick={getDMChannel}\n          _hover={{ cursor: \"pointer\" }}\n        >\n          <Avatar size=\"sm\" src={friend.image}>\n            <AvatarBadge\n              boxSize=\"1.25em\"\n              bg={friend.isOnline ? \"green.500\" : \"gray.500\"}\n            />\n          </Avatar>\n          <Text ml=\"2\">{friend.username}</Text>\n        </Flex>\n        <IconButton\n          icon={<FaEllipsisV />}\n          borderRadius=\"50%\"\n          aria-label=\"remove friend\"\n          onClick={(e) => {\n            e.preventDefault();\n            onOpen();\n          }}\n        />\n      </Flex>\n      {isOpen && <RemoveFriendModal id={friend.id} isOpen onClose={onClose} />}\n    </ListItem>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}