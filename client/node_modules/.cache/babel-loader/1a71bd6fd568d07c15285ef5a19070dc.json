{"ast":null,"code":"var _jsxFileName = \"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/GuildSettingsModal.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Avatar, Box, Button, Divider, Flex, IconButton, LightMode, Modal, ModalBody, ModalCloseButton, ModalContent, ModalFooter, ModalHeader, ModalOverlay, Text, Tooltip, useDisclosure } from \"@chakra-ui/react\";\nimport { deleteGuild, editGuild, getBanList, invalidateInviteLinks, unbanMember } from \"api/handler/guilds\";\nimport { Form, Formik } from \"formik\";\nimport React, { useRef, useState } from \"react\";\nimport { BiUnlink } from \"react-icons/bi\";\nimport { FaRegTrashAlt } from \"react-icons/fa\";\nimport { ImHammer2 } from \"react-icons/im\";\nimport { IoCheckmarkCircle, IoPersonRemove } from \"react-icons/io5\";\nimport { useQuery, useQueryClient } from \"react-query\";\nimport useGetCurrentGuild from \"hooks/useGetCurrentGuild\";\nimport toErrorMap from \"utils/toErrorMap\";\nimport { GuildSchema } from \"validation/guild.schema\";\nimport channelScrollbarCss from \"../layouts/guild/css/ChannelScrollerCSS\";\nimport InputField from \"components/shared/InputField\";\nimport CropImageModal from \"./CropImageModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GuildSettingsModal({\n  guildId,\n  isOpen,\n  onClose\n}) {\n  _s();\n\n  const guild = useGetCurrentGuild(guildId);\n  const [screen, setScreen] = useState(\"START\");\n  const [isReset, setIsReset] = useState(false);\n\n  const goBack = () => setScreen(\"START\");\n\n  const submitClose = () => {\n    setScreen(\"START\");\n    onClose();\n  };\n\n  const {\n    isOpen: cropperIsOpen,\n    onOpen: cropperOnOpen,\n    onClose: cropperOnClose\n  } = useDisclosure();\n  const inputFile = useRef(null);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [cropImage, setCropImage] = useState(\"\");\n  const [croppedImage, setCroppedImage] = useState(null);\n\n  async function handleEditGuild(values, {\n    setErrors,\n    resetForm\n  }) {\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", values.name);\n      formData.append(\"image\", croppedImage !== null && croppedImage !== void 0 ? croppedImage : imageUrl);\n      const {\n        data\n      } = await editGuild(guildId, formData);\n\n      if (data) {\n        resetForm();\n        onClose();\n      }\n    } catch (error) {\n      setErrors(toErrorMap(error));\n    }\n  }\n\n  function applyCrop(file) {\n    setImageUrl(URL.createObjectURL(file));\n    setCroppedImage(new File([file], \"icon\"));\n    cropperOnClose();\n  }\n\n  async function handleInvalidateInvites() {\n    const {\n      data\n    } = await invalidateInviteLinks(guild.id);\n\n    if (data) {\n      setIsReset(true);\n    }\n  }\n\n  if (!guild) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    isCentered: true,\n    children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), screen === \"START\" && /*#__PURE__*/_jsxDEV(ModalContent, {\n      bg: \"brandGray.light\",\n      children: [/*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: {\n          name: guild.name\n        },\n        validationSchema: GuildSchema,\n        onSubmit: handleEditGuild,\n        children: ({\n          isSubmitting\n        }) => /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n            textAlign: \"center\",\n            fontWeight: \"bold\",\n            pb: 0,\n            children: \"Server Overview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n            children: [/*#__PURE__*/_jsxDEV(Flex, {\n              mb: \"4\",\n              justify: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                textAlign: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                  label: \"Change Icon\",\n                  \"aria-label\": \"Change Icon\",\n                  children: /*#__PURE__*/_jsxDEV(Avatar, {\n                    size: \"xl\",\n                    name: guild === null || guild === void 0 ? void 0 : guild.name,\n                    bg: \"brandGray.darker\",\n                    color: \"#fff\",\n                    src: imageUrl || \"\",\n                    _hover: {\n                      cursor: \"pointer\",\n                      opacity: 0.5\n                    },\n                    onClick: () => inputFile.current.click()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  mt: \"2\",\n                  _hover: {\n                    cursor: \"pointer\",\n                    color: \"brandGray.accent\"\n                  },\n                  onClick: () => {\n                    setCroppedImage(null);\n                    setImageUrl(null);\n                  },\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                name: \"image\",\n                accept: \"image/*\",\n                ref: inputFile,\n                hidden: true,\n                onChange: async e => {\n                  if (!e.currentTarget.files) return;\n                  setCropImage(URL.createObjectURL(e.currentTarget.files[0]));\n                  cropperOnOpen();\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(InputField, {\n              label: \"server name\",\n              name: \"name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              my: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              fontWeight: \"semibold\",\n              mb: 2,\n              children: \"Additional Configuration\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Flex, {\n              align: \"center\",\n              justify: \"space-between\",\n              mb: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleInvalidateInvites,\n                fontSize: \"14px\",\n                rightIcon: isReset ? /*#__PURE__*/_jsxDEV(IoCheckmarkCircle, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 44\n                }, this) : /*#__PURE__*/_jsxDEV(BiUnlink, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 68\n                }, this),\n                colorScheme: isReset ? \"green\" : \"gray\",\n                children: \"Invalidate Links\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setScreen(\"BANLIST\"),\n                fontSize: \"14px\",\n                rightIcon: /*#__PURE__*/_jsxDEV(ImHammer2, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 34\n                }, this),\n                children: \"Bans\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Flex, {\n              align: \"center\",\n              justify: \"space-between\",\n              mb: \"2\",\n              children: /*#__PURE__*/_jsxDEV(LightMode, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => setScreen(\"CONFIRM\"),\n                  colorScheme: \"red\",\n                  variant: \"ghost\",\n                  fontSize: \"14px\",\n                  textColor: \"menuRed\",\n                  rightIcon: /*#__PURE__*/_jsxDEV(FaRegTrashAlt, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 36\n                  }, this),\n                  children: \"Delete Server\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n            bg: \"brandGray.dark\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: onClose,\n              mr: 6,\n              variant: \"link\",\n              fontSize: \"14px\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              background: \"highlight.standard\",\n              color: \"white\",\n              type: \"submit\",\n              _hover: {\n                bg: \"highlight.hover\"\n              },\n              _active: {\n                bg: \"highlight.active\"\n              },\n              _focus: {\n                boxShadow: \"none\"\n              },\n              isLoading: isSubmitting,\n              fontSize: \"14px\",\n              children: \"Save Changes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), cropperIsOpen && /*#__PURE__*/_jsxDEV(CropImageModal, {\n        isOpen: cropperIsOpen,\n        onClose: cropperOnClose,\n        initialImage: cropImage,\n        applyCrop: applyCrop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), screen === \"CONFIRM\" && /*#__PURE__*/_jsxDEV(DeleteGuildModal, {\n      goBack: goBack,\n      submitClose: submitClose,\n      name: guild.name,\n      guildId: guildId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this), screen === \"BANLIST\" && /*#__PURE__*/_jsxDEV(BanListModal, {\n      goBack: goBack,\n      guildId: guildId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GuildSettingsModal, \"uVVYq38etZB3TgF6tjeqEPpl6pQ=\", false, function () {\n  return [useGetCurrentGuild, useDisclosure];\n});\n\n_c = GuildSettingsModal;\n\nfunction DeleteGuildModal({\n  goBack,\n  submitClose,\n  name,\n  guildId\n}) {\n  async function handleDeleteGuild() {\n    submitClose();\n    await deleteGuild(guildId);\n  }\n\n  return /*#__PURE__*/_jsxDEV(ModalContent, {\n    bg: \"brandGray.light\",\n    children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n      fontWeight: \"bold\",\n      pb: \"0\",\n      children: [\"Delete \", name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n      pb: 3,\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        children: [\"Are you sure you want to delete \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 43\n        }, this), \"? This cannot be undone.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n      bg: \"brandGray.dark\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        mr: 6,\n        variant: \"link\",\n        onClick: goBack,\n        fontSize: \"14px\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LightMode, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          colorScheme: \"red\",\n          fontSize: \"14px\",\n          onClick: handleDeleteGuild,\n          children: \"Delete Server\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = DeleteGuildModal;\n\nfunction BanListModal({\n  goBack,\n  guildId\n}) {\n  _s2();\n\n  const key = `bans-${guildId}`;\n  const {\n    data\n  } = useQuery(key, () => getBanList(guildId).then(response => response.data));\n  const cache = useQueryClient();\n\n  const unbanUser = async id => {\n    const {\n      data\n    } = await unbanMember(guildId, id);\n\n    if (data) {\n      cache.setQueryData(key, d => {\n        return d === null || d === void 0 ? void 0 : d.filter(b => b.id !== id);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ModalContent, {\n    bg: \"brandGray.light\",\n    maxH: \"500px\",\n    children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n      fontWeight: \"bold\",\n      pb: \"0\",\n      children: [data === null || data === void 0 ? void 0 : data.length, \" Bans\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n      pb: 3,\n      overflowY: \"auto\",\n      css: channelScrollbarCss,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        mb: 2,\n        children: \"Bans are by account. Click on the icon to unban.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), data === null || data === void 0 ? void 0 : data.map(m => /*#__PURE__*/_jsxDEV(Flex, {\n        p: \"3\",\n        _hover: {\n          bg: \"brandGray.dark\",\n          borderRadius: \"5px\"\n        },\n        align: \"center\",\n        justify: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          align: \"center\",\n          w: \"full\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            size: \"sm\",\n            src: m.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            ml: \"2\",\n            children: m.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          icon: /*#__PURE__*/_jsxDEV(IoPersonRemove, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 21\n          }, this),\n          borderRadius: \"50%\",\n          \"aria-label\": \"unban user\",\n          onClick: async e => {\n            e.preventDefault();\n            await unbanUser(m.id);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this)), (data === null || data === void 0 ? void 0 : data.length) === 0 && /*#__PURE__*/_jsxDEV(Text, {\n        children: \"No bans yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n      bg: \"brandGray.dark\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        mr: 6,\n        variant: \"link\",\n        onClick: goBack,\n        fontSize: \"14px\",\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(BanListModal, \"W5pv4hL6nCnBwNPFAFNm+o97Q8U=\", false, function () {\n  return [useQuery, useQueryClient];\n});\n\n_c3 = BanListModal;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GuildSettingsModal\");\n$RefreshReg$(_c2, \"DeleteGuildModal\");\n$RefreshReg$(_c3, \"BanListModal\");","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/GuildSettingsModal.js"],"names":["Avatar","Box","Button","Divider","Flex","IconButton","LightMode","Modal","ModalBody","ModalCloseButton","ModalContent","ModalFooter","ModalHeader","ModalOverlay","Text","Tooltip","useDisclosure","deleteGuild","editGuild","getBanList","invalidateInviteLinks","unbanMember","Form","Formik","React","useRef","useState","BiUnlink","FaRegTrashAlt","ImHammer2","IoCheckmarkCircle","IoPersonRemove","useQuery","useQueryClient","useGetCurrentGuild","toErrorMap","GuildSchema","channelScrollbarCss","InputField","CropImageModal","GuildSettingsModal","guildId","isOpen","onClose","guild","screen","setScreen","isReset","setIsReset","goBack","submitClose","cropperIsOpen","onOpen","cropperOnOpen","cropperOnClose","inputFile","imageUrl","setImageUrl","cropImage","setCropImage","croppedImage","setCroppedImage","handleEditGuild","values","setErrors","resetForm","formData","FormData","append","name","data","error","applyCrop","file","URL","createObjectURL","File","handleInvalidateInvites","id","isSubmitting","cursor","opacity","current","click","color","e","currentTarget","files","bg","boxShadow","DeleteGuildModal","handleDeleteGuild","BanListModal","key","then","response","cache","unbanUser","setQueryData","d","filter","b","length","map","m","borderRadius","image","username","preventDefault"],"mappings":"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","sourcesContent":["import {\n  Avatar,\n  Box,\n  Button,\n  Divider,\n  Flex,\n  IconButton,\n  LightMode,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Text,\n  Tooltip,\n  useDisclosure,\n} from \"@chakra-ui/react\";\nimport {\n  deleteGuild,\n  editGuild,\n  getBanList,\n  invalidateInviteLinks,\n  unbanMember,\n} from \"api/handler/guilds\";\nimport { Form, Formik } from \"formik\";\nimport React, { useRef, useState } from \"react\";\nimport { BiUnlink } from \"react-icons/bi\";\nimport { FaRegTrashAlt } from \"react-icons/fa\";\nimport { ImHammer2 } from \"react-icons/im\";\nimport { IoCheckmarkCircle, IoPersonRemove } from \"react-icons/io5\";\nimport { useQuery, useQueryClient } from \"react-query\";\nimport useGetCurrentGuild from \"hooks/useGetCurrentGuild\";\nimport toErrorMap from \"utils/toErrorMap\";\nimport { GuildSchema } from \"validation/guild.schema\";\nimport channelScrollbarCss from \"../layouts/guild/css/ChannelScrollerCSS\";\nimport InputField from \"components/shared/InputField\";\nimport CropImageModal from \"./CropImageModal\";\n\nexport default function GuildSettingsModal({ guildId, isOpen, onClose }) {\n  const guild = useGetCurrentGuild(guildId);\n  const [screen, setScreen] = useState(\"START\");\n  const [isReset, setIsReset] = useState(false);\n\n  const goBack = () => setScreen(\"START\");\n  const submitClose = () => {\n    setScreen(\"START\");\n    onClose();\n  };\n\n  const {\n    isOpen: cropperIsOpen,\n    onOpen: cropperOnOpen,\n    onClose: cropperOnClose,\n  } = useDisclosure();\n\n  const inputFile = useRef(null);\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [cropImage, setCropImage] = useState(\"\");\n  const [croppedImage, setCroppedImage] = useState(null);\n\n  async function handleEditGuild(values, { setErrors, resetForm }) {\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", values.name);\n      formData.append(\"image\", croppedImage ?? imageUrl);\n      const { data } = await editGuild(guildId, formData);\n      if (data) {\n        resetForm();\n        onClose();\n      }\n    } catch (error) {\n      setErrors(toErrorMap(error));\n    }\n  }\n\n  function applyCrop(file) {\n    setImageUrl(URL.createObjectURL(file));\n    setCroppedImage(new File([file], \"icon\"));\n    cropperOnClose();\n  }\n\n  async function handleInvalidateInvites() {\n    const { data } = await invalidateInviteLinks(guild.id);\n\n    if (data) {\n      setIsReset(true);\n    }\n  }\n\n  if (!guild) return null;\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCentered>\n      <ModalOverlay />\n      {screen === \"START\" && (\n        <ModalContent bg=\"brandGray.light\">\n          <Formik\n            initialValues={{\n              name: guild.name,\n            }}\n            validationSchema={GuildSchema}\n            onSubmit={handleEditGuild}\n          >\n            {({ isSubmitting }) => (\n              <Form>\n                <ModalHeader textAlign=\"center\" fontWeight=\"bold\" pb={0}>\n                  Server Overview\n                </ModalHeader>\n                <ModalCloseButton />\n                <ModalBody>\n                  <Flex mb=\"4\" justify=\"center\">\n                    <Box textAlign={\"center\"}>\n                      <Tooltip label=\"Change Icon\" aria-label=\"Change Icon\">\n                        <Avatar\n                          size=\"xl\"\n                          name={guild?.name}\n                          bg={\"brandGray.darker\"}\n                          color={\"#fff\"}\n                          src={imageUrl || \"\"}\n                          _hover={{ cursor: \"pointer\", opacity: 0.5 }}\n                          onClick={() => inputFile.current.click()}\n                        />\n                      </Tooltip>\n                      <Text\n                        mt={\"2\"}\n                        _hover={{\n                          cursor: \"pointer\",\n                          color: \"brandGray.accent\",\n                        }}\n                        onClick={() => {\n                          setCroppedImage(null);\n                          setImageUrl(null);\n                        }}\n                      >\n                        Remove\n                      </Text>\n                    </Box>\n                    <input\n                      type=\"file\"\n                      name=\"image\"\n                      accept=\"image/*\"\n                      ref={inputFile}\n                      hidden\n                      onChange={async (e) => {\n                        if (!e.currentTarget.files) return;\n                        setCropImage(\n                          URL.createObjectURL(e.currentTarget.files[0])\n                        );\n                        cropperOnOpen();\n                      }}\n                    />\n                  </Flex>\n\n                  <InputField label=\"server name\" name=\"name\" />\n\n                  <Divider my={\"4\"} />\n\n                  <Text fontWeight={\"semibold\"} mb={2}>\n                    Additional Configuration\n                  </Text>\n\n                  <Flex align={\"center\"} justify={\"space-between\"} mb={\"2\"}>\n                    <Button\n                      onClick={handleInvalidateInvites}\n                      fontSize={\"14px\"}\n                      rightIcon={isReset ? <IoCheckmarkCircle /> : <BiUnlink />}\n                      colorScheme={isReset ? \"green\" : \"gray\"}\n                    >\n                      Invalidate Links\n                    </Button>\n                    <Button\n                      onClick={() => setScreen(\"BANLIST\")}\n                      fontSize={\"14px\"}\n                      rightIcon={<ImHammer2 />}\n                    >\n                      Bans\n                    </Button>\n                  </Flex>\n                  <Flex align={\"center\"} justify={\"space-between\"} mb={\"2\"}>\n                    <LightMode>\n                      <Button\n                        onClick={() => setScreen(\"CONFIRM\")}\n                        colorScheme={\"red\"}\n                        variant=\"ghost\"\n                        fontSize={\"14px\"}\n                        textColor={\"menuRed\"}\n                        rightIcon={<FaRegTrashAlt />}\n                      >\n                        Delete Server\n                      </Button>\n                    </LightMode>\n                  </Flex>\n                </ModalBody>\n\n                <ModalFooter bg=\"brandGray.dark\">\n                  <Button\n                    onClick={onClose}\n                    mr={6}\n                    variant=\"link\"\n                    fontSize={\"14px\"}\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    background=\"highlight.standard\"\n                    color=\"white\"\n                    type=\"submit\"\n                    _hover={{ bg: \"highlight.hover\" }}\n                    _active={{ bg: \"highlight.active\" }}\n                    _focus={{ boxShadow: \"none\" }}\n                    isLoading={isSubmitting}\n                    fontSize={\"14px\"}\n                  >\n                    Save Changes\n                  </Button>\n                </ModalFooter>\n              </Form>\n            )}\n          </Formik>\n          {cropperIsOpen && (\n            <CropImageModal\n              isOpen={cropperIsOpen}\n              onClose={cropperOnClose}\n              initialImage={cropImage}\n              applyCrop={applyCrop}\n            />\n          )}\n        </ModalContent>\n      )}\n      {screen === \"CONFIRM\" && (\n        <DeleteGuildModal\n          goBack={goBack}\n          submitClose={submitClose}\n          name={guild.name}\n          guildId={guildId}\n        />\n      )}\n      {screen === \"BANLIST\" && (\n        <BanListModal goBack={goBack} guildId={guildId} />\n      )}\n    </Modal>\n  );\n}\n\nfunction DeleteGuildModal({ goBack, submitClose, name, guildId }) {\n  async function handleDeleteGuild() {\n    submitClose();\n    await deleteGuild(guildId);\n  }\n\n  return (\n    <ModalContent bg=\"brandGray.light\">\n      <ModalHeader fontWeight=\"bold\" pb=\"0\">\n        Delete {name}\n      </ModalHeader>\n      <ModalBody pb={3}>\n        <Text>\n          Are you sure you want to delete <b>{name}</b>? This cannot be undone.\n        </Text>\n      </ModalBody>\n\n      <ModalFooter bg=\"brandGray.dark\">\n        <Button mr={6} variant=\"link\" onClick={goBack} fontSize={\"14px\"}>\n          Cancel\n        </Button>\n        <LightMode>\n          <Button\n            colorScheme=\"red\"\n            fontSize={\"14px\"}\n            onClick={handleDeleteGuild}\n          >\n            Delete Server\n          </Button>\n        </LightMode>\n      </ModalFooter>\n    </ModalContent>\n  );\n}\n\nfunction BanListModal({ goBack, guildId }) {\n  const key = `bans-${guildId}`;\n  const { data } = useQuery(key, () =>\n    getBanList(guildId).then((response) => response.data)\n  );\n  const cache = useQueryClient();\n\n  const unbanUser = async (id) => {\n    const { data } = await unbanMember(guildId, id);\n    if (data) {\n      cache.setQueryData(key, (d) => {\n        return d?.filter((b) => b.id !== id);\n      });\n    }\n  };\n\n  return (\n    <ModalContent bg=\"brandGray.light\" maxH={\"500px\"}>\n      <ModalHeader fontWeight=\"bold\" pb=\"0\">\n        {data?.length} Bans\n      </ModalHeader>\n      <ModalBody pb={3} overflowY={\"auto\"} css={channelScrollbarCss}>\n        <Text mb={2}>Bans are by account. Click on the icon to unban.</Text>\n\n        {data?.map((m) => (\n          <Flex\n            p={\"3\"}\n            _hover={{\n              bg: \"brandGray.dark\",\n              borderRadius: \"5px\",\n            }}\n            align=\"center\"\n            justify=\"space-between\"\n          >\n            <Flex align=\"center\" w={\"full\"}>\n              <Avatar size=\"sm\" src={m.image} />\n              <Text ml=\"2\">{m.username}</Text>\n            </Flex>\n            <IconButton\n              icon={<IoPersonRemove />}\n              borderRadius=\"50%\"\n              aria-label=\"unban user\"\n              onClick={async (e) => {\n                e.preventDefault();\n                await unbanUser(m.id);\n              }}\n            />\n          </Flex>\n        ))}\n        {data?.length === 0 && <Text>No bans yet.</Text>}\n      </ModalBody>\n\n      <ModalFooter bg=\"brandGray.dark\">\n        <Button mr={6} variant=\"link\" onClick={goBack} fontSize={\"14px\"}>\n          Back\n        </Button>\n      </ModalFooter>\n    </ModalContent>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}