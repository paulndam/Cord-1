{"ast":null,"code":"import _regeneratorRuntime from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Button,LightMode,Modal,ModalBody,ModalContent,ModalFooter,ModalHeader,ModalOverlay,Text}from\"@chakra-ui/react\";import{removeFriend}from\"api/handler/account\";import React from\"react\";import{useQuery,useQueryClient}from\"react-query\";import useGetFriend from\"hooks/useGetFriend\";import{fKey}from\"utils/querykeys\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RemoveFriendModal(_ref){var id=_ref.id,isOpen=_ref.isOpen,onClose=_ref.onClose;var user=useGetFriend(id);var cache=useQueryClient();function handleRemoveFriend(){return _handleRemoveFriend.apply(this,arguments);}function _handleRemoveFriend(){_handleRemoveFriend=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$removeFriend,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onClose();_context.next=3;return removeFriend(id);case 3:_yield$removeFriend=_context.sent;data=_yield$removeFriend.data;if(data){//cache.invalidateQueries(fKey)\ncache.setQueryData(fKey,function(friends){return friends===null||friends===void 0?void 0:friends.filter(function(friend){return friend.id!==id;});});}case 6:case\"end\":return _context.stop();}}},_callee);}));return _handleRemoveFriend.apply(this,arguments);}return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,isCentered:true,children:[/*#__PURE__*/_jsx(ModalOverlay,{}),/*#__PURE__*/_jsxs(ModalContent,{bg:\"brandGray.light\",children:[/*#__PURE__*/_jsxs(ModalHeader,{textTransform:\"uppercase\",fontWeight:\"bold\",mb:0,pb:0,children:[\"Remove \",user.username]}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(Text,{mb:\"4\",children:[\"Are you sure you want to permanently remove \",/*#__PURE__*/_jsx(\"b\",{children:user.username}),\" \",\"from your friends?\"]})}),/*#__PURE__*/_jsxs(ModalFooter,{bg:\"brandGray.dark\",children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,mr:6,variant:\"link\",fontSize:\"14px\",children:\"Cancel\"}),/*#__PURE__*/_jsx(LightMode,{children:/*#__PURE__*/_jsx(Button,{colorScheme:\"red\",fontSize:\"14px\",onClick:handleRemoveFriend,children:\"Remove Friend\"})})]})]})]});}","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/src/components/modals/RemoveFriendModal.js"],"names":["Button","LightMode","Modal","ModalBody","ModalContent","ModalFooter","ModalHeader","ModalOverlay","Text","removeFriend","React","useQuery","useQueryClient","useGetFriend","fKey","RemoveFriendModal","id","isOpen","onClose","user","cache","handleRemoveFriend","data","setQueryData","friends","filter","friend","username"],"mappings":"qYAAA,OACEA,MADF,CAEEC,SAFF,CAGEC,KAHF,CAIEC,SAJF,CAKEC,YALF,CAMEC,WANF,CAOEC,WAPF,CAQEC,YARF,CASEC,IATF,KAUO,kBAVP,CAWA,OAASC,YAAT,KAA6B,qBAA7B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,cAAnB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,YAAP,KAAyB,oBAAzB,CACA,OAASC,IAAT,KAAqB,iBAArB,C,wFAEA,cAAe,SAASC,CAAAA,iBAAT,MAAoD,IAAvBC,CAAAA,EAAuB,MAAvBA,EAAuB,CAAnBC,MAAmB,MAAnBA,MAAmB,CAAXC,OAAW,MAAXA,OAAW,CACjE,GAAMC,CAAAA,IAAI,CAAGN,YAAY,CAACG,EAAD,CAAzB,CACA,GAAMI,CAAAA,KAAK,CAAGR,cAAc,EAA5B,CAFiE,QAIlDS,CAAAA,kBAJkD,gKAIjE,gKACEH,OAAO,GADT,sBAEyBT,CAAAA,YAAY,CAACO,EAAD,CAFrC,0CAEUM,IAFV,qBAEUA,IAFV,CAIE,GAAIA,IAAJ,CAAU,CACR;AACAF,KAAK,CAACG,YAAN,CAAmBT,IAAnB,CAAyB,SAACU,OAAD,CAAa,CACpC,MAAOA,CAAAA,OAAP,SAAOA,OAAP,iBAAOA,OAAO,CAAEC,MAAT,CAAgB,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACV,EAAP,GAAcA,EAA1B,EAAhB,CAAP,CACD,CAFD,EAGD,CATH,sDAJiE,qDAgBjE,mBACE,MAAC,KAAD,EAAO,MAAM,CAAEC,MAAf,CAAuB,OAAO,CAAEC,OAAhC,CAAyC,UAAU,KAAnD,wBACE,KAAC,YAAD,IADF,cAGE,MAAC,YAAD,EAAc,EAAE,CAAC,iBAAjB,wBACE,MAAC,WAAD,EACE,aAAa,CAAE,WADjB,CAEE,UAAU,CAAC,MAFb,CAGE,EAAE,CAAE,CAHN,CAIE,EAAE,CAAE,CAJN,qBAMUC,IAAI,CAACQ,QANf,GADF,cASE,KAAC,SAAD,wBACE,MAAC,IAAD,EAAM,EAAE,CAAE,GAAV,uEAC8C,mBAAIR,IAAI,CAACQ,QAAT,EAD9C,CACqE,GADrE,wBADF,EATF,cAgBE,MAAC,WAAD,EAAa,EAAE,CAAC,gBAAhB,wBACE,KAAC,MAAD,EAAQ,OAAO,CAAET,OAAjB,CAA0B,EAAE,CAAE,CAA9B,CAAiC,OAAO,CAAC,MAAzC,CAAgD,QAAQ,CAAE,MAA1D,oBADF,cAIE,KAAC,SAAD,wBACE,KAAC,MAAD,EACE,WAAW,CAAC,KADd,CAEE,QAAQ,CAAE,MAFZ,CAGE,OAAO,CAAEG,kBAHX,2BADF,EAJF,GAhBF,GAHF,GADF,CAqCD","sourcesContent":["import {\n  Button,\n  LightMode,\n  Modal,\n  ModalBody,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  Text,\n} from \"@chakra-ui/react\";\nimport { removeFriend } from \"api/handler/account\";\nimport React from \"react\";\nimport { useQuery, useQueryClient } from \"react-query\";\nimport useGetFriend from \"hooks/useGetFriend\";\nimport { fKey } from \"utils/querykeys\";\n\nexport default function RemoveFriendModal({ id, isOpen, onClose }) {\n  const user = useGetFriend(id);\n  const cache = useQueryClient();\n\n  async function handleRemoveFriend() {\n    onClose();\n    const { data } = await removeFriend(id);\n\n    if (data) {\n      //cache.invalidateQueries(fKey)\n      cache.setQueryData(fKey, (friends) => {\n        return friends?.filter((friend) => friend.id !== id);\n      });\n    }\n  }\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCentered>\n      <ModalOverlay />\n\n      <ModalContent bg=\"brandGray.light\">\n        <ModalHeader\n          textTransform={\"uppercase\"}\n          fontWeight=\"bold\"\n          mb={0}\n          pb={0}\n        >\n          Remove {user.username}\n        </ModalHeader>\n        <ModalBody>\n          <Text mb={\"4\"}>\n            Are you sure you want to permanently remove <b>{user.username}</b>{\" \"}\n            from your friends?\n          </Text>\n        </ModalBody>\n\n        <ModalFooter bg=\"brandGray.dark\">\n          <Button onClick={onClose} mr={6} variant=\"link\" fontSize={\"14px\"}>\n            Cancel\n          </Button>\n          <LightMode>\n            <Button\n              colorScheme=\"red\"\n              fontSize={\"14px\"}\n              onClick={handleRemoveFriend}\n            >\n              Remove Friend\n            </Button>\n          </LightMode>\n        </ModalFooter>\n      </ModalContent>\n    </Modal>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}