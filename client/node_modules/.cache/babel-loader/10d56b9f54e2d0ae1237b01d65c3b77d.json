{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useLayoutEffect, useCallback, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || child instanceof Node && parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage$1(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  if (itemCount === 0) {\n    return -1;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\n\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this;\n\n      _this = _Component.call(this, _props) || this; // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n\n        var _ref = _temp === void 0 ? {} : _temp,\n            _ref$refKey = _ref.refKey,\n            refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n            ref = _ref.ref,\n            rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro; // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n\n\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (!isOpen) {\n            return;\n          }\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (!isOpen) {\n            return;\n          }\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n            onClick = _ref3.onClick;\n\n        _ref3.onPress;\n\n        var onKeyDown = _ref3.onKeyDown,\n            onKeyUp = _ref3.onKeyUp,\n            onBlur = _ref3.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n              _this.reset({\n                type: blurButton\n              });\n            }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n            onKeyDown = _ref4.onKeyDown,\n            onBlur = _ref4.onBlur,\n            onChange = _ref4.onChange,\n            onInput = _ref4.onInput;\n\n        _ref4.onChangeText;\n\n        var rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        {\n          onChangeKey = 'onChange';\n        }\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n            _ref5$refKey = _ref5.refKey,\n            refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n            ref = _ref5.ref,\n            props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n            _ref6$suppressRefErro = _ref6.suppressRefError,\n            suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n            onMouseMove = _ref7.onMouseMove,\n            onMouseDown = _ref7.onMouseDown,\n            onClick = _ref7.onClick;\n\n        _ref7.onPress;\n\n        var index = _ref7.index,\n            _ref7$item = _ref7.item,\n            item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n      /* istanbul ignore if (react-native) */\n\n\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function onMouseUp(event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function onTouchStart() {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function onTouchMove() {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref10.highlightedIndex;\n\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref11.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      {\n        this.updateStatus();\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage$1,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\n\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200); // istanbul ignore next\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction useElementIds(_ref) {\n  var _ref$id = _ref.id,\n      id = _ref$id === void 0 ? \"downshift-\" + generateId() : _ref$id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId,\n      inputId = _ref.inputId;\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n\nvar defaultProps$3 = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\n\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex;\n\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document)) {\n        handleBlur();\n      }\n    };\n\n    var onTouchStart = function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function onTouchEnd(event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document, false)) {\n        handleBlur();\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\n\n\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\n/* istanbul ignore next */\n\n\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    var isInitialMountRef = useRef(true);\n\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n\n        if (isInitialMountRef.current) {\n          if (!Object.keys(propCallInfo).length) {\n            // eslint-disable-next-line no-console\n            console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n            return;\n          }\n        }\n\n        var suppressRefError = propCallInfo.suppressRefError,\n            refKey = propCallInfo.refKey,\n            elementRef = propCallInfo.elementRef;\n\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n      isInitialMountRef.current = false;\n    });\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\n\nfunction useA11yMessageSetter(getA11yMessage, dependencyArray, _ref2) {\n  var isInitialMount = _ref2.isInitialMount,\n      highlightedIndex = _ref2.highlightedIndex,\n      items = _ref2.items,\n      environment = _ref2.environment,\n      rest = _objectWithoutPropertiesLoose(_ref2, [\"isInitialMount\", \"highlightedIndex\", \"items\", \"environment\"]); // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n\n    updateA11yStatus(function () {\n      return getA11yMessage(_extends({\n        highlightedIndex: highlightedIndex,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length\n      }, rest));\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n}\n\nfunction useScrollIntoView(_ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n      isOpen = _ref3.isOpen,\n      itemRefs = _ref3.itemRefs,\n      getItemNodeFromIndex = _ref3.getItemNodeFromIndex,\n      menuElement = _ref3.menuElement,\n      scrollIntoViewProp = _ref3.scrollIntoView; // used not to scroll on highlight by mouse.\n\n  var shouldScrollRef = useRef(true); // Scroll on highlighted item if change comes from keyboard.\n\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref4) {\n    var isInitialMount = _ref4.isInitialMount,\n        props = _ref4.props,\n        state = _ref4.state; // used for checking when props are moving from controlled to uncontrolled.\n\n    var prevPropsRef = useRef(props);\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n/* eslint-disable complexity */\n\n\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n      props = action.props;\n  var changes;\n\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToString, getItemNodeFromIndex) {\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  for (var index = 0; index < items.length; index++) {\n    var offsetIndex = (index + highlightedIndex + 1) % items.length;\n\n    if (itemToString(items[offsetIndex]).toLowerCase().startsWith(lowerCasedKeysSoFar)) {\n      var element = getItemNodeFromIndex(offsetIndex);\n\n      if (!(element && element.hasAttribute('disabled'))) {\n        return offsetIndex;\n      }\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes$2 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n  }\n\n  return '';\n}\n\nvar defaultProps$2 = _extends({}, defaultProps$3, {\n  getA11yStatusMessage: getA11yStatusMessage\n}); // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$2 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n  };\n}\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$2\n});\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nuseSelect.stateChangeTypes = stateChangeTypes$2;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes$2(userProps, useSelect); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps$2, userProps);\n\n  var items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      itemToString = props.itemToString,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$2(props);\n\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({}); // used not to trigger menu blur action in some scenarios.\n\n  var shouldBlurRef = useRef(true); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIds = useElementIds(props); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]); // Effects.\n  // Sets a11y status message on changes in state.\n\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Sets a11y status message on changes in selectedItem.\n\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Scroll on highlighted item if change comes from keyboard.\n\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  }); // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500); // Cancel any pending debounced calls on mount\n\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []); // Invokes the keysSoFar callback set up above.\n\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n\n\n    if (isOpen) {\n      // istanbul ignore else\n      if (menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus toggleButton on close, but not if it was closed with (Shift+)Tab.\n\n\n    if (environment.document.activeElement === menuRef.current) {\n      // istanbul ignore else\n      if (toggleButtonRef.current) {\n        shouldBlurRef.current = false;\n        toggleButtonRef.current.focus();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  }); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: MenuBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Reset itemRefs on close.\n\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      }\n    };\n  }, [dispatch, getItemNodeFromIndex]);\n  var menuKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: MenuKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnter\n        });\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownSpaceButton\n        });\n      }\n    };\n  }, [dispatch, getItemNodeFromIndex]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        onKeyDown = _ref.onKeyDown,\n        onBlur = _ref.onBlur,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    var latestState = latest.current.state;\n\n    var menuHandleKeyDown = function menuHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && menuKeyDownHandlers[key]) {\n        menuKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: MenuKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var menuHandleBlur = function menuHandleBlur() {\n      // if the blur was a result of selection, we don't trigger this action.\n      if (shouldBlurRef.current === false) {\n        shouldBlurRef.current = true;\n        return;\n      }\n\n      var shouldBlur = !mouseAndTouchTrackersRef.current.isMouseDown;\n      /* istanbul ignore else */\n\n      if (shouldBlur) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    };\n\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.labelId, _extends2.tabIndex = -1, _extends2), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIds.getItemId(latestState.highlightedIndex)\n    }, {\n      onMouseLeave: callAllEventHandlers(onMouseLeave, menuHandleMouseLeave),\n      onKeyDown: callAllEventHandlers(onKeyDown, menuHandleKeyDown),\n      onBlur: callAllEventHandlers(onBlur, menuHandleBlur)\n    }, rest);\n  }, [dispatch, latest, menuKeyDownHandlers, mouseAndTouchTrackersRef, setGetterPropCallInfo, elementIds, getItemNodeFromIndex]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        _ref4$suppressRefErro = _ref4.suppressRefError,\n        suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3.id = elementIds.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-labelledby'] = elementIds.labelId + \" \" + elementIds.toggleButtonId, _extends3), rest);\n\n    if (!rest.disabled) {\n      toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n      toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n    }\n\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, latest, toggleButtonKeyDownHandlers, setGetterPropCallInfo, elementIds, getItemNodeFromIndex]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        item = _ref5.item,\n        index = _ref5.index,\n        onMouseMove = _ref5.onMouseMove,\n        onClick = _ref5.onClick,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"refKey\", \"ref\"]);\n\n    var _latest$current = latest.current,\n        latestState = _latest$current.state,\n        latestProps = _latest$current.props;\n\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var itemProps = _extends((_extends4 = {\n      role: 'option',\n      'aria-selected': \"\" + (itemIndex === latestState.highlightedIndex),\n      id: elementIds.getItemId(itemIndex)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends4), rest);\n\n    if (!rest.disabled) {\n      itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n      itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n    }\n\n    return itemProps;\n  }, [dispatch, latest, shouldScrollRef, elementIds]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 19;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\n\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n\n  useEffect(function () {\n    if (isControlledProp(props, 'selectedItem')) {\n      if (previousSelectedItemRef.current !== props.selectedItem) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n\n      previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    }\n  });\n  return [getState(state, props), dispatch];\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\n\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  getA11yStatusMessage: getA11yStatusMessage$1,\n  circularNavigation: true\n});\n/* eslint-disable complexity */\n\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.isOpen && state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes$1(userProps, useCombobox); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps$1, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIds = useElementIds(props); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]); // Effects.\n  // Sets a11y status message on changes in state.\n\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Sets a11y status message on changes in selectedItem.\n\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Scroll on highlighted item if change comes from keyboard.\n\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  }); // Focus the input on first render if required.\n\n  useEffect(function () {\n    var focusOnOpen = initialIsOpen || defaultIsOpen || isOpen;\n\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  }); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [comboboxRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur,\n      selectItem: false\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getComboboxProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Reset itemRefs on close.\n\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        var latestState = latest.current.state;\n\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state; // if closed or no highlighted index, do nothing.\n\n        if (!latestState.isOpen || latestState.highlightedIndex < 0 || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n            return;\n          }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n  }, [dispatch, latest, getItemNodeFromIndex]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        item = _ref3.item,\n        index = _ref3.index,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onMouseMove = _ref3.onMouseMove,\n        onClick = _ref3.onClick;\n\n    _ref3.onPress;\n\n    var rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n    var _latest$current = latest.current,\n        latestProps = _latest$current.props,\n        latestState = _latest$current.state;\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === latestState.highlightedIndex), _extends3.id = elementIds.getItemId(itemIndex), _extends3), !rest.disabled && (_ref4 = {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove)\n    }, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), rest);\n  }, [dispatch, latest, shouldScrollRef, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        onClick = _ref5.onClick;\n\n    _ref5.onPress;\n\n    var _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n\n      if (!latest.current.state.isOpen && inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        onKeyDown = _ref6.onKeyDown,\n        onChange = _ref6.onChange,\n        onInput = _ref6.onInput,\n        onBlur = _ref6.onBlur;\n\n    _ref6.onChangeText;\n\n    var _ref6$refKey = _ref6.refKey,\n        refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n        ref = _ref6.ref,\n        rest = _objectWithoutPropertiesLoose(_ref6, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n        _ref7$suppressRefErro = _ref7.suppressRefError,\n        suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n\n    var inputHandleBlur = function inputHandleBlur() {\n      /* istanbul ignore else */\n      if (latestState.isOpen && !mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: InputBlur,\n          selectItem: true\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n\n    if (!rest.disabled) {\n      var _eventHandlers;\n\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n    }\n\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5.id = elementIds.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIds.getItemId(latestState.highlightedIndex)\n    }, {\n      'aria-labelledby': elementIds.labelId,\n      // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n      // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n      autoComplete: 'off',\n      value: latestState.inputValue\n    }, eventHandlers, rest);\n  }, [dispatch, inputKeyDownHandlers, latest, mouseAndTouchTrackersRef, setGetterPropCallInfo, elementIds]);\n  var getComboboxProps = useCallback(function (_temp7, _temp8) {\n    var _extends6;\n\n    var _ref8 = _temp7 === void 0 ? {} : _temp7,\n        _ref8$refKey = _ref8.refKey,\n        refKey = _ref8$refKey === void 0 ? 'ref' : _ref8$refKey,\n        ref = _ref8.ref,\n        rest = _objectWithoutPropertiesLoose(_ref8, [\"refKey\", \"ref\"]);\n\n    var _ref9 = _temp8 === void 0 ? {} : _temp8,\n        _ref9$suppressRefErro = _ref9.suppressRefError,\n        suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n    setGetterPropCallInfo('getComboboxProps', suppressRefError, refKey, comboboxRef);\n    return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n      comboboxRef.current = comboboxNode;\n    }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIds.menuId, _extends6['aria-expanded'] = latest.current.state.isOpen, _extends6), rest);\n  }, [latest, setGetterPropCallInfo, elementIds]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getComboboxProps: getComboboxProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\n\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\n\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n\n  var element = event.target;\n\n  if (element instanceof HTMLInputElement && // if element is a text input\n  element.value !== '' && ( // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\nvar propTypes = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps = {\n  itemToString: defaultProps$3.itemToString,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n}; // eslint-disable-next-line import/no-mutable-exports\n\nvar validatePropTypes = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset\n});\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n      index = action.index,\n      props = action.props,\n      selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems;\n  var changes;\n\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        var newActiveIndex = activeIndex;\n\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1))\n        }, {\n          activeIndex: _newActiveIndex\n        });\n        break;\n      }\n\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\n\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes(userProps, useMultipleSelection); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps, userProps);\n\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n      itemToString = props.itemToString,\n      environment = props.environment,\n      keyNavigationNext = props.keyNavigationNext,\n      keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, getInitialState(props), props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n\n    var _ref3 = _temp === void 0 ? {} : _temp,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        selectedItem = _ref3.selectedItem,\n        index = _ref3.index,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"]);\n\n    var latestState = latest.current.state;\n    var itemIndex = getItemIndex(index, selectedItem, latestState.selectedItems);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either selectedItem or index in getSelectedItemProps!');\n    }\n\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = index === latestState.activeIndex ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n        _ref4$refKey = _ref4.refKey,\n        refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n        ref = _ref4.ref,\n        onKeyDown = _ref4.onKeyDown,\n        onClick = _ref4.onClick,\n        _ref4$preventKeyActio = _ref4.preventKeyAction,\n        preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n        rest = _objectWithoutPropertiesLoose(_ref4, [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"]);\n\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n        _ref5$suppressRefErro = _ref5.suppressRefError,\n        suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useMultipleSelection, useSelect };","map":{"version":3,"sources":["/Users/paulndam/Documents/MERN/React-Course/Crash-Course/build-discord/client/node_modules/downshift/dist/downshift.esm.js"],"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","cloneElement","Component","useRef","useEffect","useLayoutEffect","useCallback","useReducer","useMemo","isForwardRef","computeScrollIntoView","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","Node","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","getA11yStatusMessage$1","_ref2","isOpen","resultCount","previousResultCount","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","getState","Object","keys","reduce","prevState","key","isControlledProp","undefined","normalizeArrowKey","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","getItemNodeFromIndex","circular","itemsLastIndex","newIndex","nonDisabledNewIndex","getNextNonDisabledIndex","currentElementNode","hasAttribute","index","_index","targetWithinDownshift","target","downshiftElements","document","checkActiveElement","contextNode","activeElement","validateControlledUnchanged","process","env","NODE_ENV","prevProps","nextProps","warningDescription","propKey","cleanupStatus","documentProp","getStatusDiv","textContent","setStatus","status","div","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes$3","freeze","__proto__","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","input","items","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","selectedItem","inputValue","defaultIsOpen","selectItem","item","itemToString","selectItemAtIndex","itemIndex","selectHighlightedItem","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","hasMoreStateThanType","onStateChange","onSelect","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","_this2$getState","nextHighlightedIndex","ArrowUp","_this3","_this3$getState","Enter","which","_this$getState2","itemNode","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","_this4","_this$getState3","newHighlightedIndex","End","_this5","_this$getState4","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState5","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState6","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState7","openMenu","closeMenu","updateStatus","getA11yStatusMessage","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","getState$1","stateToMerge","scrollHighlightedItemIntoView","_this6","_this$getState8","_this$getState9","componentDidMount","_this7","validateGetMenuPropsCalledCorrectly","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","scrollWhenNavigating","componentDidUpdate","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","warn","prevItem","window","stateChangeTypes","propTypes","func","number","bool","any","string","shape","_ref12","_ref13","refKeySpecified","isComposite","dropdownDefaultStateValues","callOnChangeProps","action","newState","changes","invokeOnChangeHandler","handler","capitalizeString","s","a","getA11ySelectionMessage","selectionParameters","itemToStringLocal","updateA11yStatus","getA11yMessage","useIsomorphicLayoutEffect","useElementIds","_ref$id","toggleButtonId","elementIdsRef","getItemIndex","isAcceptedCharacterKey","test","slice","toUpperCase","useLatestRef","val","useEnhancedReducer","reducer","initialState","prevStateRef","actionRef","enhancedReducer","_useReducer","dispatch","propsRef","dispatchWithProps","useControlledReducer$1","_useEnhancedReducer","defaultProps$3","circularNavigation","getDefaultValue$1","defaultStateValues","defaultPropKey","getInitialValue$1","initialPropKey","getInitialState$2","getHighlightedIndexOnOpen","offset","useMouseAndTouchTracker","downshiftElementRefs","handleBlur","mouseAndTouchTrackersRef","map","useGetterPropsCalledChecker","isInitialMountRef","propKeys","getterPropsCalledRef","acc","propCallInfo","elementRef","setGetterPropCallInfo","useA11yMessageSetter","dependencyArray","isInitialMount","useScrollIntoView","itemRefs","menuElement","scrollIntoViewProp","shouldScrollRef","useControlPropsValidator","prevPropsRef","downshiftCommonReducer","ItemMouseMove","MenuMouseLeave","ToggleButtonClick","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSetInputValue","FunctionReset","getItemIndexByCharacterKey","keysSoFar","lowerCasedKeysSoFar","toLowerCase","offsetIndex","startsWith","propTypes$2","array","isRequired","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","defaultProps$2","validatePropTypes$2","validatePropTypes","options","caller","checkPropTypes","name","MenuKeyDownArrowDown","MenuKeyDownArrowUp","MenuKeyDownEscape","MenuKeyDownHome","MenuKeyDownEnd","MenuKeyDownEnter","MenuKeyDownSpaceButton","MenuKeyDownCharacter","MenuBlur","MenuMouseLeave$1","ItemMouseMove$1","ItemClick$1","ToggleButtonClick$1","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonKeyDownCharacter","FunctionToggleMenu$1","FunctionOpenMenu$1","FunctionCloseMenu$1","FunctionSetHighlightedIndex$1","FunctionSelectItem$1","FunctionSetInputValue$1","FunctionReset$2","stateChangeTypes$2","ItemClick","FunctionSelectItem","downshiftSelectReducer","lowercasedKey","_lowercasedKey","useSelect","userProps","_useControlledReducer","toggleButtonRef","shouldBlurRef","clearTimeoutRef","elementIds","previousResultCountRef","latest","outerDispatch","toggleButtonKeyDownHandlers","menuKeyDownHandlers","newSelectedItem","setInputValue","newInputValue","labelProps","onMouseLeave","latestState","menuHandleKeyDown","menuHandleBlur","shouldBlur","menuHandleMouseLeave","tabIndex","_ref3$refKey","_ref4$suppressRefErro","toggleButtonHandleClick","toggleButtonHandleKeyDown","toggleProps","toggleButtonNode","_extends4","_latest$current","latestProps","itemHandleMouseMove","itemHandleClick","itemProps","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownEnter","InputChange","InputBlur","FunctionReset$1","ControlledPropUpdatedSelectedItem","stateChangeTypes$1","getInitialState$1","defaultInputValue","propTypes$1","useControlledReducer","previousSelectedItemRef","validatePropTypes$1","defaultProps$1","downshiftUseComboboxReducer","useCombobox","inputRef","comboboxRef","focusOnOpen","_extends5","_ref6$refKey","_ref7$suppressRefErro","inputNode","getComboboxProps","_temp8","_extends6","_ref8$refKey","_ref9$suppressRefErro","comboboxNode","activeIndex","selectedItems","getInitialValue","getDefaultValue","getInitialState","isKeyDownOperationPermitted","metaKey","ctrlKey","altKey","HTMLInputElement","selectionStart","selectionEnd","getA11yRemovalMessage","removedSelectedItem","initialSelectedItems","defaultSelectedItems","initialActiveIndex","defaultActiveIndex","onActiveIndexChange","onSelectedItemsChange","keyNavigationNext","keyNavigationPrevious","SelectedItemClick","SelectedItemKeyDownDelete","SelectedItemKeyDownBackspace","SelectedItemKeyDownNavigationNext","SelectedItemKeyDownNavigationPrevious","DropdownKeyDownNavigationPrevious","DropdownKeyDownBackspace","DropdownClick","FunctionAddSelectedItem","FunctionRemoveSelectedItem","FunctionSetSelectedItems","FunctionSetActiveIndex","downshiftMultipleSelectionReducer","newActiveIndex","_newActiveIndex","selectedItemIndex","newSelectedItems","_newActiveIndex2","useMultipleSelection","dropdownRef","previousSelectedItemsRef","selectedItemRefs","find","activeSelectedItem","selectedItemKeyDownHandlers","Delete","Backspace","dropdownKeyDownHandlers","getSelectedItemProps","selectedItemHandleClick","selectedItemHandleKeyDown","selectedItemNode","getDropdownProps","_ref4$refKey","_ref4$preventKeyActio","preventKeyAction","_ref5$suppressRefErro","dropdownHandleKeyDown","dropdownHandleClick","dropdownNode","addSelectedItem","removeSelectedItem","setSelectedItems","setActiveIndex"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useLayoutEffect, useCallback, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || child instanceof Node && parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage$1(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n\n\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  if (itemCount === 0) {\n    return -1;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\n\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this;\n\n      _this = _Component.call(this, _props) || this; // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n\n        var _ref = _temp === void 0 ? {} : _temp,\n            _ref$refKey = _ref.refKey,\n            refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n            ref = _ref.ref,\n            rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (!isOpen) {\n            return;\n          }\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (!isOpen) {\n            return;\n          }\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n            onClick = _ref3.onClick;\n            _ref3.onPress;\n            var onKeyDown = _ref3.onKeyDown,\n            onKeyUp = _ref3.onKeyUp,\n            onBlur = _ref3.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n              _this.reset({\n                type: blurButton\n              });\n            }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n            onKeyDown = _ref4.onKeyDown,\n            onBlur = _ref4.onBlur,\n            onChange = _ref4.onChange,\n            onInput = _ref4.onInput;\n            _ref4.onChangeText;\n            var rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        {\n          onChangeKey = 'onChange';\n        }\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n            _ref5$refKey = _ref5.refKey,\n            refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n            ref = _ref5.ref,\n            props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n            _ref6$suppressRefErro = _ref6.suppressRefError,\n            suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n            onMouseMove = _ref7.onMouseMove,\n            onMouseDown = _ref7.onMouseDown,\n            onClick = _ref7.onClick;\n            _ref7.onPress;\n            var index = _ref7.index,\n            _ref7$item = _ref7.item,\n            item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function onMouseUp(event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function onTouchStart() {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function onTouchMove() {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref10.highlightedIndex;\n\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref11.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      {\n        this.updateStatus();\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage$1,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\n\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200); // istanbul ignore next\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction useElementIds(_ref) {\n  var _ref$id = _ref.id,\n      id = _ref$id === void 0 ? \"downshift-\" + generateId() : _ref$id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId,\n      inputId = _ref.inputId;\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n\nvar defaultProps$3 = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\n\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex;\n\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document)) {\n        handleBlur();\n      }\n    };\n\n    var onTouchStart = function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function onTouchEnd(event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document, false)) {\n        handleBlur();\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\n\n\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\n/* istanbul ignore next */\n\n\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    var isInitialMountRef = useRef(true);\n\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n\n        if (isInitialMountRef.current) {\n          if (!Object.keys(propCallInfo).length) {\n            // eslint-disable-next-line no-console\n            console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n            return;\n          }\n        }\n\n        var suppressRefError = propCallInfo.suppressRefError,\n            refKey = propCallInfo.refKey,\n            elementRef = propCallInfo.elementRef;\n\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n      isInitialMountRef.current = false;\n    });\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\n\nfunction useA11yMessageSetter(getA11yMessage, dependencyArray, _ref2) {\n  var isInitialMount = _ref2.isInitialMount,\n      highlightedIndex = _ref2.highlightedIndex,\n      items = _ref2.items,\n      environment = _ref2.environment,\n      rest = _objectWithoutPropertiesLoose(_ref2, [\"isInitialMount\", \"highlightedIndex\", \"items\", \"environment\"]);\n\n  // Sets a11y status message on changes in state.\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n\n    updateA11yStatus(function () {\n      return getA11yMessage(_extends({\n        highlightedIndex: highlightedIndex,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length\n      }, rest));\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n}\n\nfunction useScrollIntoView(_ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n      isOpen = _ref3.isOpen,\n      itemRefs = _ref3.itemRefs,\n      getItemNodeFromIndex = _ref3.getItemNodeFromIndex,\n      menuElement = _ref3.menuElement,\n      scrollIntoViewProp = _ref3.scrollIntoView;\n  // used not to scroll on highlight by mouse.\n  var shouldScrollRef = useRef(true); // Scroll on highlighted item if change comes from keyboard.\n\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref4) {\n    var isInitialMount = _ref4.isInitialMount,\n        props = _ref4.props,\n        state = _ref4.state;\n    // used for checking when props are moving from controlled to uncontrolled.\n    var prevPropsRef = useRef(props);\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n\n/* eslint-disable complexity */\n\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n      props = action.props;\n  var changes;\n\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToString, getItemNodeFromIndex) {\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  for (var index = 0; index < items.length; index++) {\n    var offsetIndex = (index + highlightedIndex + 1) % items.length;\n\n    if (itemToString(items[offsetIndex]).toLowerCase().startsWith(lowerCasedKeysSoFar)) {\n      var element = getItemNodeFromIndex(offsetIndex);\n\n      if (!(element && element.hasAttribute('disabled'))) {\n        return offsetIndex;\n      }\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes$2 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n  }\n\n  return '';\n}\n\nvar defaultProps$2 = _extends({}, defaultProps$3, {\n  getA11yStatusMessage: getA11yStatusMessage\n}); // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$2 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n  };\n}\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nuseSelect.stateChangeTypes = stateChangeTypes$2;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes$2(userProps, useSelect); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps$2, userProps);\n\n  var items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      itemToString = props.itemToString,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$2(props);\n\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({}); // used not to trigger menu blur action in some scenarios.\n\n  var shouldBlurRef = useRef(true); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIds = useElementIds(props); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]); // Effects.\n  // Sets a11y status message on changes in state.\n\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Sets a11y status message on changes in selectedItem.\n\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Scroll on highlighted item if change comes from keyboard.\n\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  }); // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500); // Cancel any pending debounced calls on mount\n\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []); // Invokes the keysSoFar callback set up above.\n\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n\n\n    if (isOpen) {\n      // istanbul ignore else\n      if (menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus toggleButton on close, but not if it was closed with (Shift+)Tab.\n\n\n    if (environment.document.activeElement === menuRef.current) {\n      // istanbul ignore else\n      if (toggleButtonRef.current) {\n        shouldBlurRef.current = false;\n        toggleButtonRef.current.focus();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  }); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: MenuBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Reset itemRefs on close.\n\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      }\n    };\n  }, [dispatch, getItemNodeFromIndex]);\n  var menuKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: MenuKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnter\n        });\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownSpaceButton\n        });\n      }\n    };\n  }, [dispatch, getItemNodeFromIndex]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        onKeyDown = _ref.onKeyDown,\n        onBlur = _ref.onBlur,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    var latestState = latest.current.state;\n\n    var menuHandleKeyDown = function menuHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && menuKeyDownHandlers[key]) {\n        menuKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: MenuKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var menuHandleBlur = function menuHandleBlur() {\n      // if the blur was a result of selection, we don't trigger this action.\n      if (shouldBlurRef.current === false) {\n        shouldBlurRef.current = true;\n        return;\n      }\n\n      var shouldBlur = !mouseAndTouchTrackersRef.current.isMouseDown;\n      /* istanbul ignore else */\n\n      if (shouldBlur) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    };\n\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.labelId, _extends2.tabIndex = -1, _extends2), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIds.getItemId(latestState.highlightedIndex)\n    }, {\n      onMouseLeave: callAllEventHandlers(onMouseLeave, menuHandleMouseLeave),\n      onKeyDown: callAllEventHandlers(onKeyDown, menuHandleKeyDown),\n      onBlur: callAllEventHandlers(onBlur, menuHandleBlur)\n    }, rest);\n  }, [dispatch, latest, menuKeyDownHandlers, mouseAndTouchTrackersRef, setGetterPropCallInfo, elementIds, getItemNodeFromIndex]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        _ref4$suppressRefErro = _ref4.suppressRefError,\n        suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3.id = elementIds.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-labelledby'] = elementIds.labelId + \" \" + elementIds.toggleButtonId, _extends3), rest);\n\n    if (!rest.disabled) {\n      toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n      toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n    }\n\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, latest, toggleButtonKeyDownHandlers, setGetterPropCallInfo, elementIds, getItemNodeFromIndex]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        item = _ref5.item,\n        index = _ref5.index,\n        onMouseMove = _ref5.onMouseMove,\n        onClick = _ref5.onClick,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"refKey\", \"ref\"]);\n\n    var _latest$current = latest.current,\n        latestState = _latest$current.state,\n        latestProps = _latest$current.props;\n\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var itemProps = _extends((_extends4 = {\n      role: 'option',\n      'aria-selected': \"\" + (itemIndex === latestState.highlightedIndex),\n      id: elementIds.getItemId(itemIndex)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends4), rest);\n\n    if (!rest.disabled) {\n      itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n      itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n    }\n\n    return itemProps;\n  }, [dispatch, latest, shouldScrollRef, elementIds]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 19;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\n\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n\n  useEffect(function () {\n    if (isControlledProp(props, 'selectedItem')) {\n      if (previousSelectedItemRef.current !== props.selectedItem) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n\n      previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    }\n  });\n  return [getState(state, props), dispatch];\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\n\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  getA11yStatusMessage: getA11yStatusMessage$1,\n  circularNavigation: true\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.isOpen && state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes$1(userProps, useCombobox); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps$1, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIds = useElementIds(props); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]); // Effects.\n  // Sets a11y status message on changes in state.\n\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Sets a11y status message on changes in selectedItem.\n\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Scroll on highlighted item if change comes from keyboard.\n\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  }); // Focus the input on first render if required.\n\n  useEffect(function () {\n    var focusOnOpen = initialIsOpen || defaultIsOpen || isOpen;\n\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  }); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [comboboxRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur,\n      selectItem: false\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getComboboxProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Reset itemRefs on close.\n\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        var latestState = latest.current.state;\n\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state; // if closed or no highlighted index, do nothing.\n\n        if (!latestState.isOpen || latestState.highlightedIndex < 0 || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n            return;\n          }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n  }, [dispatch, latest, getItemNodeFromIndex]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        item = _ref3.item,\n        index = _ref3.index,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onMouseMove = _ref3.onMouseMove,\n        onClick = _ref3.onClick;\n        _ref3.onPress;\n        var rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n    var _latest$current = latest.current,\n        latestProps = _latest$current.props,\n        latestState = _latest$current.state;\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === latestState.highlightedIndex), _extends3.id = elementIds.getItemId(itemIndex), _extends3), !rest.disabled && (_ref4 = {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove)\n    }, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), rest);\n  }, [dispatch, latest, shouldScrollRef, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        onClick = _ref5.onClick;\n        _ref5.onPress;\n        var _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n\n      if (!latest.current.state.isOpen && inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        onKeyDown = _ref6.onKeyDown,\n        onChange = _ref6.onChange,\n        onInput = _ref6.onInput,\n        onBlur = _ref6.onBlur;\n        _ref6.onChangeText;\n        var _ref6$refKey = _ref6.refKey,\n        refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n        ref = _ref6.ref,\n        rest = _objectWithoutPropertiesLoose(_ref6, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n        _ref7$suppressRefErro = _ref7.suppressRefError,\n        suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n\n    var inputHandleBlur = function inputHandleBlur() {\n      /* istanbul ignore else */\n      if (latestState.isOpen && !mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: InputBlur,\n          selectItem: true\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n\n    if (!rest.disabled) {\n      var _eventHandlers;\n\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n    }\n\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5.id = elementIds.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIds.getItemId(latestState.highlightedIndex)\n    }, {\n      'aria-labelledby': elementIds.labelId,\n      // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n      // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n      autoComplete: 'off',\n      value: latestState.inputValue\n    }, eventHandlers, rest);\n  }, [dispatch, inputKeyDownHandlers, latest, mouseAndTouchTrackersRef, setGetterPropCallInfo, elementIds]);\n  var getComboboxProps = useCallback(function (_temp7, _temp8) {\n    var _extends6;\n\n    var _ref8 = _temp7 === void 0 ? {} : _temp7,\n        _ref8$refKey = _ref8.refKey,\n        refKey = _ref8$refKey === void 0 ? 'ref' : _ref8$refKey,\n        ref = _ref8.ref,\n        rest = _objectWithoutPropertiesLoose(_ref8, [\"refKey\", \"ref\"]);\n\n    var _ref9 = _temp8 === void 0 ? {} : _temp8,\n        _ref9$suppressRefErro = _ref9.suppressRefError,\n        suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n    setGetterPropCallInfo('getComboboxProps', suppressRefError, refKey, comboboxRef);\n    return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n      comboboxRef.current = comboboxNode;\n    }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIds.menuId, _extends6['aria-expanded'] = latest.current.state.isOpen, _extends6), rest);\n  }, [latest, setGetterPropCallInfo, elementIds]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getComboboxProps: getComboboxProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\n\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\n\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n\n  var element = event.target;\n\n  if (element instanceof HTMLInputElement && // if element is a text input\n  element.value !== '' && ( // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\nvar propTypes = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps = {\n  itemToString: defaultProps$3.itemToString,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n}; // eslint-disable-next-line import/no-mutable-exports\n\nvar validatePropTypes = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n      index = action.index,\n      props = action.props,\n      selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems;\n  var changes;\n\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        var newActiveIndex = activeIndex;\n\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1))\n        }, {\n          activeIndex: _newActiveIndex\n        });\n        break;\n      }\n\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\n\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes(userProps, useMultipleSelection); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps, userProps);\n\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n      itemToString = props.itemToString,\n      environment = props.environment,\n      keyNavigationNext = props.keyNavigationNext,\n      keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, getInitialState(props), props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n\n    var _ref3 = _temp === void 0 ? {} : _temp,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        selectedItem = _ref3.selectedItem,\n        index = _ref3.index,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"]);\n\n    var latestState = latest.current.state;\n    var itemIndex = getItemIndex(index, selectedItem, latestState.selectedItems);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either selectedItem or index in getSelectedItemProps!');\n    }\n\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = index === latestState.activeIndex ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n        _ref4$refKey = _ref4.refKey,\n        refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n        ref = _ref4.ref,\n        onKeyDown = _ref4.onKeyDown,\n        onClick = _ref4.onClick,\n        _ref4$preventKeyActio = _ref4.preventKeyAction,\n        preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n        rest = _objectWithoutPropertiesLoose(_ref4, [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"]);\n\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n        _ref5$suppressRefErro = _ref5.suppressRefError,\n        suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useMultipleSelection, useSelect };\n"]},"metadata":{},"sourceType":"module"}