(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{398:function(e,n){},514:function(e,n,t){},515:function(e,n,t){},564:function(e,n,t){"use strict";t.r(n);var r=t(585),c=t(610),a=t(1),i=t.n(a),s=t(605),o=t(331),l=t(19),u=t(584),d=t(209),b={global:function(e){return{body:{bg:Object(d.a)("gray.100","#1b1c1d")(e)}}}},j=Object(u.a)({colors:{highlight:{standard:"#7289da",hover:"#677bc4",active:"#5b6eae"},brandGray:{accent:"#8e9297",active:"#393c43",light:"#36393f",dark:"#303339",darker:"#202225",darkest:"#18191c",hover:"#32353b"},brandGreen:"#43b581",labelGray:"#72767d",menuRed:"#f04747",brandBorder:"#1A202C",accountBar:"#292b2f",memberList:"#2f3136",iconColor:"#b9bbbe",messageInput:"#40444b"},config:{initialColorMode:"dark"},styles:b,fonts:{body:"'Open Sans', sans-serif"}}),h={"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"#2f3136",width:"10px"},"&::-webkit-scrollbar-thumb":{background:"brandGray.darker",borderRadius:"18px"}},x=t(105),f=t(182),O=Object(x.a)(Object(f.persist)((function(e,n){return{current:null,setUser:function(n){return e({current:n})},logout:function(){return e({current:null})},isAuth:function(){return null!==n().current}}}),{name:"user-storage"})),p=t(329),g=t.n(p);function m(){return g()("/ws",{transports:["websocket"],upgrade:!1})}var v=Object(x.a)((function(e){return{notifCount:0,requestCount:0,increment:function(){return e((function(e){return{notifCount:e.notifCount+1}}))},reset:function(){return e((function(){return{notifCount:0}}))},resetRequest:function(){return e((function(){return{requestCount:0}}))},setRequests:function(n){return e((function(){return{requestCount:n}}))},isPending:!1,toggleDisplay:function(){return e((function(e){return{isPending:!e.isPending}}))}}})),w=t(2);function y(e){var n=e.children,t=O((function(e){return e.current})),r=v((function(e){return e.increment}));return Object(a.useEffect)((function(){if(t){var e=function(){window.location.pathname.includes("/channels/me")||r()},n=function(){c.emit("toggleOffline"),c.disconnect()},c=m();return c.emit("toggleOnline"),c.emit("joinUser",null===t||void 0===t?void 0:t.id),c.on("push_to_top",(function(){e()})),c.on("send_request",(function(){e()})),window.addEventListener("beforeunload",n),function(){return n()}}}),[t,r]),Object(w.jsx)(w.Fragment,{children:n})}var C=t(330),k=new s.a({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1/0,cacheTime:0}}});function S(e){var n=e.children;return Object(w.jsxs)(o.a,{client:k,children:[Object(w.jsx)(C.ReactQueryDevtools,{}),Object(w.jsx)(r.a,{}),Object(w.jsx)(c.a,{theme:j,children:Object(w.jsx)(y,{children:Object(w.jsx)(l.a,{children:n})})})]})}var I=t(73),z=t.n(I),_=t(41),G=t(8),R=t.n(G),A=t(13),T=t(6),D=t(602),M=t(592),E=t(312),L=t(311),P=t(313),F=t(608),q=t(593),N=t(314),W=t(173),V=t(362),B=t(315),Q=t(333),U=t.n(Q).a.create({baseURL:"/api",withCredentials:!0});U.interceptors.response.use((function(e){return e}),(function(e){switch(e.response.status){case 403:localStorage.removeItem("user-storage"),window.location.replace("/login")}return Promise.reject(e)}));var H=function(e){return U.put("/account",e,{headers:{"Content-Type":"multipart/form-data"}})},Y=function(e){return U.post("/account/".concat(e,"/friend"))},Z=function(e){return U.delete("/account/".concat(e,"/friend"))},J=function(){return U.post("/account/logout")},K=t(23),$=t(591),X="guilds",ee="dms",ne="friends",te="requests",re=function(e){return"channels-".concat(e)},ce=function(e){return"members-".concat(e)};function ae(e){var n,t;if(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.errors){var r,c,a=null===e||void 0===e||null===(r=e.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.errors,i={};return a.forEach((function(e){var n=e.field,t=e.message;i[n]=t})),i}}var ie=t(600),se=t(308),oe=t(24),le=oe.d().shape({email:oe.f().required("Email is required").defined(),password:oe.f().required("Password is required").defined()}),ue=oe.d().shape({username:oe.f().min(3).max(30).trim().required("Username is required").defined(),email:oe.f().email().lowercase().required("Email is required").defined(),password:oe.f().min(6,"Password must be at least 6 characters long").max(150).required("Password is required").defined()}),de=oe.d().shape({email:oe.f().email().lowercase().required("Email is required").defined(),username:oe.f().min(3).max(30).trim().required("Username is required").defined()}),be=oe.d().shape({newPassword:oe.f().min(6,"Password must be at least 6 characters long").max(150).required("New password is required").defined(),confirmNewPassword:oe.f().oneOf([oe.e("newPassword"),void 0],"Passwords do not match").required("Confirm new password is required").defined()}),je=oe.d().shape({currentPassword:oe.f().required("Old Password is required").defined(),newPassword:oe.f().min(6,"Password must be at least 6 characters long").max(150).required("New password is required").defined(),confirmNewPassword:oe.f().oneOf([oe.e("newPassword"),void 0],"Passwords do not match").required("Confirm new password is required").defined()}),he=oe.d().shape({email:oe.f().email().lowercase().required("Email is required").defined()}),xe=t(27),fe=t(136),Oe=t(74),pe=t(307),ge=t(309),me=t(310);function ve(e){var n=e.label,t=Object(fe.a)(e,["label"]),r=Object(K.c)(t),c=Object(T.a)(r,2),a=c[0],i=c[1],s=i.error,o=i.touched;return Object(w.jsxs)(Oe.a,{mt:4,isInvalid:null!=s&&o,children:[Object(w.jsx)(pe.a,{htmlFor:a.name,children:Object(w.jsx)(se.a,{fontSize:"12px",textTransform:"uppercase",children:n})}),Object(w.jsx)(ge.a,Object(xe.a)(Object(xe.a)({bg:"brandGray.dark",borderColor:"black",borderRadius:"3px",focusBorderColor:"highlight.standard"},a),t)),Object(w.jsx)(me.b,{children:s})]})}function we(e){var n=e.isOpen,t=e.onClose,r=Object(D.a)();function c(){return(c=Object(A.a)(R.a.mark((function e(n,c){var a,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.setErrors,e.prev=1,e.next=4,null;case 4:i=e.sent,i.data&&(r({title:"Changed Password",status:"success",duration:5e3,isClosable:!0}),t()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a(ae(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(w.jsxs)(ie.a,{isOpen:n,onClose:t,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:je,onSubmit:function(e,n){return c.apply(this,arguments)},children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",children:"Change your password"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{pb:6,children:[Object(w.jsx)(se.a,{children:"Enter your current password and a new password"}),Object(w.jsx)(ve,{label:"current password",name:"currentPassword",autoComplete:"password",type:"password"}),Object(w.jsx)(ve,{label:"new password",name:"newPassword",autoComplete:"password",type:"password"}),Object(w.jsx)(ve,{label:"confirm new password",name:"confirmNewPassword",autoComplete:"password",type:"password"})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:t,fontSize:"14px",mr:6,variant:"link",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:n,fontSize:"14px",children:"Done"})]})]})}})})]})}var ye=t(607),Ce=t(355),ke=function(e){return new Promise((function(n,t){var r=new Image;r.addEventListener("load",(function(){return n(r)})),r.addEventListener("error",(function(e){return t(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function Se(e){return e*Math.PI/180}function Ie(e,n){return ze.apply(this,arguments)}function ze(){return(ze=Object(A.a)(R.a.mark((function e(n,t){var r,c,a,i,s,o,l,u=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:0,e.next=3,ke(n);case 3:return c=e.sent,a=document.createElement("canvas"),i=a.getContext("2d"),s=Math.max(c.width,c.height),o=s/2*Math.sqrt(2)*2,a.width=o,a.height=o,i.translate(o/2,o/2),i.rotate(Se(r)),i.translate(-o/2,-o/2),i.drawImage(c,o/2-.5*c.width,o/2-.5*c.height),l=i.getImageData(0,0,o,o),a.width=t.width,a.height=t.height,i.putImageData(l,Math.round(0-o/2+.5*c.width-t.x),Math.round(0-o/2+.5*c.height-t.y)),e.abrupt("return",new Promise((function(e){a.toBlob((function(n){e(n)}),"image/jpeg")})));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){var n=e.isOpen,t=e.onClose,r=e.applyCrop,c=e.initialImage,i=Object(a.useState)({x:0,y:0}),s=Object(T.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(1),d=Object(T.a)(u,2),b=d[0],j=d[1],h=Object(a.useState)(null),x=Object(T.a)(h,2),f=x[0],O=x[1],p=Object(a.useCallback)((function(e,n){O(n)}),[]),g=Object(a.useCallback)(Object(A.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie(c,f);case 3:n=e.sent,r(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[f,c,r]);return Object(w.jsxs)(ie.a,{isOpen:n,onClose:t,isCentered:!0,closeOnOverlayClick:!1,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(ie.f,{fontWeight:"bold",children:"EDIT MEDIA"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(L.a,{h:"400px",overflow:"hidden",position:"relative",children:Object(w.jsx)(Ce.a,{image:c,crop:o,zoom:b,aspect:1,cropShape:"round",onCropChange:l,onCropComplete:p,onZoomChange:j})}),Object(w.jsxs)(ye.a,{"aria-label":"zoom",min:1,max:3,step:.01,value:b,onChange:function(e){return j(e)},my:"4",children:[Object(w.jsx)(ye.d,{children:Object(w.jsx)(ye.b,{})}),Object(w.jsx)(ye.c,{})]})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:t,fontSize:"14px",mr:6,variant:"link",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",fontSize:"14px",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},onClick:g,children:"Apply"})]})]})]})}function Ge(){var e=Object($.a)("account",(function(){return U.get("/account").then((function(e){return e.data}))})).data,n=Object(o.b)(),t=O((function(e){return e.logout})),r=O((function(e){return e.setUser})),c=Object(_.g)(),i=Object(D.a)(),s=Object(M.a)(),l=s.isOpen,u=s.onOpen,d=s.onClose,b=Object(M.a)(),j=b.isOpen,h=b.onOpen,x=b.onClose,f=Object(a.useRef)(null),p=Object(a.useState)((null===e||void 0===e?void 0:e.image)||""),g=Object(T.a)(p,2),m=g[0],v=g[1],y=Object(a.useState)(""),C=Object(T.a)(y,2),k=C[0],S=C[1],I=Object(a.useState)(null),z=Object(T.a)(I,2),G=z[0];z[1];function Q(){return(Q=Object(A.a)(R.a.mark((function e(){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:r=e.sent,r.data&&(n.clear(),t(),c.push("/"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(A.a)(R.a.mark((function e(n,t){var c,a,s,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.setErrors,e.prev=1,(a=new FormData).append("email",n.email),a.append("username",n.username),a.append("image",null!==G&&void 0!==G?G:m),e.next=8,H(a);case 8:s=e.sent,(o=s.data)&&(r(o),i({title:"Account Updated \ud83d\ude0e ",status:"success",duration:4e3,isClosable:!0})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),c(ae(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Z(e){e.currentTarget.files&&(S(URL.createObjectURL(e.currentTarget.files[0])),h())}return e?Object(w.jsxs)(E.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:[Object(w.jsxs)(L.a,{px:4,width:"full",maxWidth:"500px",children:[Object(w.jsx)(E.a,{mb:"4",justify:"center",children:Object(w.jsx)(P.a,{fontSize:"24px",children:"MY ACCOUNT"})}),Object(w.jsxs)(L.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(w.jsx)(L.a,{children:Object(w.jsx)(K.b,{initialValues:{email:e.email,username:e.username,image:null},validationSchema:de,onSubmit:function(e,n){return Y.apply(this,arguments)},children:function(n){var t=n.isSubmitting,r=n.values;return Object(w.jsxs)(K.a,{children:[Object(w.jsxs)(E.a,{mb:"4",justify:"center",children:[Object(w.jsx)(F.a,{label:"Change Avatar","aria-label":"Change Avatar",children:Object(w.jsx)(q.a,{size:"xl",name:e.username,src:m||e.image,_hover:{cursor:"pointer",opacity:.5},onClick:function(){return f.current.click()}})}),Object(w.jsx)("input",{type:"file",name:"image",accept:"image/*",ref:f,hidden:!0,onChange:Z})]}),Object(w.jsxs)(L.a,{my:4,children:[Object(w.jsx)(ve,{value:r.email,type:"email",placeholder:"Email",label:"Email",name:"email",autoComplete:"email"}),Object(w.jsx)(ve,{value:r.username,placeholder:"Username",label:"Username",name:"username",autoComplete:"username"}),Object(w.jsxs)(E.a,{my:8,align:"end",children:[Object(w.jsx)(N.a,{}),Object(w.jsx)(W.a,{mr:4,colorScheme:"white",variant:"outline",onClick:c.goBack,fontSize:"14px",children:"Close"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{type:"submit",colorScheme:"green",isLoading:t,fontSize:"14px",children:"Update"})})]})]})]})}})}),Object(w.jsx)(B.a,{my:"4"}),Object(w.jsx)(E.a,{children:Object(w.jsx)(P.a,{fontSize:"18px",children:"PASSWORD AND AUTHENTICATION"})}),Object(w.jsxs)(E.a,{mt:"4",children:[Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},onClick:u,fontSize:"14px",children:"Change Password"}),Object(w.jsx)(N.a,{}),Object(w.jsx)(W.a,{colorScheme:"red",variant:"outline",onClick:function(){return Q.apply(this,arguments)},fontSize:"14px",children:"Logout"})]})]})]}),l&&Object(w.jsx)(we,{isOpen:l,onClose:d}),j&&Object(w.jsx)(_e,{isOpen:j,onClose:x,initialImage:k,applyCrop:function(e){v(URL.createObjectURL(e)),S(new File([e],"avatar")),x()}})]}):null}function Re(e){var n=e.component,t=Object(fe.a)(e,["component"]),r=O((function(e){return e.current})),c=JSON.parse(localStorage.getItem("user-storage"));return Object(w.jsx)(_.b,Object(xe.a)(Object(xe.a)({},t),{},{render:function(e){var t;return r||(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.current)?Object(w.jsx)(n,Object(xe.a)({},e)):Object(w.jsx)(_.a,{to:"/login"})}}))}var Ae=t(594);function Te(){var e=Object(_.g)(),n=Object(D.a)(),t=function(){var t=Object(A.a)(R.a.mark((function t(r,c){var a,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.setErrors,t.prev=1,t.next=4,s=r.email,U.post("/account/forgot-password",{email:s});case 4:i=t.sent,i.data&&(n({title:"Reset Password",description:"If account with that email is in DataBase, they get the email",status:"success",duration:5e3,isClosable:!0}),e.push("/")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a(ae(t.t0));case 12:case"end":return t.stop()}var s}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(w.jsx)(E.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(w.jsxs)(L.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(w.jsx)(E.a,{mb:"4",justify:"center",children:Object(w.jsx)(Ae.a,{src:"/logo.png",w:"80px"})}),Object(w.jsxs)(L.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(w.jsx)(L.a,{textAlign:"center",children:Object(w.jsx)(P.a,{fontSize:"24px",children:"Forgot Password"})}),Object(w.jsx)(L.a,{my:4,textAlign:"left",children:Object(w.jsx)(K.b,{initialValues:{email:""},validationSchema:he,onSubmit:t,children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ve,{label:"Email",name:"email",autoComplete:"email",type:"email"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:n,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},fontSize:"14px",children:"Send Mail"})]})}})})]})]})})}var De=t(175);function Me(e){var n=e.showLastColumn,t=void 0!==n&&n,r=e.children;return Object(w.jsx)(De.a,{height:"100vh",templateColumns:"75px 240px 1fr ".concat(t?"240px":""," "),templateRows:"auto 1fr auto",bg:"brandGray.light",children:r})}var Ee=t(570),Le=function(e,n,t){return U.post("/messages/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})},Pe=function(e){return U.delete("/messages/".concat(e))},Fe=function(e,n){return U.put("/messages/".concat(e),{text:n})},qe=t(20),Ne=Object(x.a)((function(e,n){return{typing:[],addTyping:function(n){e((function(e){return{typing:[].concat(Object(qe.a)(e.typing),[n])}}))},removeTyping:function(n){e((function(e){return{typing:Object(qe.a)(e.typing.filter((function(e){return e!==n})))}}))},reset:function(){e((function(){return{typing:[]}}))}}}));var We=t(94),Ve=function(e){return U.post("/channels/".concat(e,"/dm"))},Be=function(e){return U.delete("/channels/".concat(e,"/dm"))},Qe=function(e){return U.post("/guilds/create",e)},Ue=function(e){return U.post("/guilds/join",e)},He=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return U.get("/guilds/".concat(e,"/invite").concat(n?"?isPermanent=true":""))},Ye=function(e){return U.delete("/guilds/".concat(e,"/invite"))},Ze=function(e){return U.get("/guilds/".concat(e,"/members"))},Je=function(e,n){return U.put("/guilds/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})},Ke=function(e){return U.delete("/guilds/".concat(e,"/delete"))},$e=function(e,n){return U.put("/guilds/".concat(e,"/member"),n)},Xe=function(e,n){return U.post("/guilds/".concat(e,"/kick"),{memberId:n})},en=function(e,n){return U.post("/guilds/".concat(e,"/bans"),{memberId:n})},nn=function(e,n){return U.delete("guilds/".concat(e,"/bans"),{data:{memberId:n}})};function tn(e){var n=e.member,t=e.isOpen,r=e.onClose,c=e.isBan,a=Object(o.b)(),i=Object(_.i)().guildId,s=c?"Ban ":"Kick ";function l(){return(l=Object(A.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(),!c){e.next=7;break}return e.next=4,en(i,n.id);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,Xe(i,n.id);case 9:e.t0=e.sent;case 10:t=e.t0,t.data&&a.invalidateQueries(ce(i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsxs)(ie.f,{textTransform:"uppercase",fontWeight:"bold",fontSize:"14px",mb:0,pb:0,children:[s,"'",n.username,"'"]}),Object(w.jsx)(ie.b,{children:Object(w.jsxs)(se.a,{mb:"4",children:["Are you sure you want to ",s.toLocaleLowerCase()," @",n.username,"?",!c&&" They will be able to rejoin again with a new invite."]})}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{colorScheme:"red",fontSize:"14px",onClick:function(){return l.apply(this,arguments)},children:s})})]})]})]})}function rn(e){var n=e.id,t=e.isOpen,r=e.onClose,c=function(e){var n=Object($.a)(ne).data;return null===n||void 0===n?void 0:n.find((function(n){return n.id===e}))}(n),a=Object(o.b)();function i(){return(i=Object(A.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.next=3,Z(n);case 3:t=e.sent,t.data&&a.setQueryData(ne,(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsxs)(ie.f,{textTransform:"uppercase",fontWeight:"bold",mb:0,pb:0,children:["Remove ",c.username]}),Object(w.jsx)(ie.b,{children:Object(w.jsxs)(se.a,{mb:"4",children:["Are you sure you want to permanently remove ",Object(w.jsx)("b",{children:c.username})," ","from your friends?"]})}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{colorScheme:"red",fontSize:"14px",onClick:function(){return i.apply(this,arguments)},children:"Remove Friend"})})]})]})]})}var cn=t(49);function an(e){var n=e.member,t=e.isOwner,r=e.id,c=Object(_.g)(),i=Object(M.a)(),s=i.isOpen,o=i.onOpen,l=i.onClose,u=Object(M.a)(),d=u.isOpen,b=u.onOpen,j=u.onClose,h=Object(a.useState)(!1),x=Object(T.a)(h,2),f=x[0],O=x[1],p=function(){var e=Object(A.a)(R.a.mark((function e(){var t,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(n.id);case 2:t=e.sent,(r=t.data)&&c.push("/channels/me/".concat(r.id));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(A.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isFriend){e.next=5;break}return e.next=3,Y(n.id);case 3:e.next=6;break;case 5:o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(cn.b,{id:r,theme:cn.c.dark,children:[Object(w.jsx)(cn.a,{onClick:p,className:"menu-item",children:Object(w.jsx)(E.a,{align:"center",justify:"space-between",w:"full",children:Object(w.jsx)(se.a,{children:"Message"})})}),Object(w.jsx)(cn.a,{onClick:g,className:"menu-item",children:Object(w.jsx)(E.a,{align:"center",justify:"space-between",w:"full",children:Object(w.jsxs)(se.a,{children:[n.isFriend?"Remove":"Add"," Friend"]})})}),t&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(cn.a,{onClick:function(){O(!1),b()},className:"delete-item",children:Object(w.jsx)(E.a,{align:"center",justify:"space-between",w:"full",children:Object(w.jsxs)(se.a,{children:["Kick ",n.username]})})}),Object(w.jsx)(cn.a,{onClick:function(){O(!0),b()},className:"delete-item",children:Object(w.jsx)(E.a,{align:"center",justify:"space-between",w:"full",children:Object(w.jsxs)(se.a,{children:["Ban ",n.username]})})})]})]}),s&&Object(w.jsx)(rn,{id:n.id,isOpen:!0,onClose:l}),d&&Object(w.jsx)(tn,{member:n,isOpen:d,isBan:f,onClose:j})]})}var sn=t(102),on=t.n(sn),ln=t(341),un=t.n(ln);function dn(e){return on()(e).calendar()}function bn(e){return on()(e).format("MMMM D, YYYY")}function jn(e){var n=e.message,t=e.isOpen,r=e.onClose;function c(){return(c=Object(A.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.next=3,Pe(n.id);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(ie.f,{fontWeight:"bold",mb:0,pb:0,children:"Delete Message"}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(se.a,{mb:"4",children:"Are you sure you want to delete this message?"}),Object(w.jsx)(E.a,{alignItems:"center",my:"2",mr:"1",justify:"space-between",boxShadow:"dark-lg",py:2,children:Object(w.jsxs)(E.a,{children:[Object(w.jsx)(q.a,{h:"40px",w:"40px",ml:"4",mt:"1",src:n.user.image}),Object(w.jsxs)(L.a,{ml:"3",children:[Object(w.jsxs)(E.a,{alignItems:"center",children:[Object(w.jsx)(se.a,{children:n.user.username}),Object(w.jsx)(se.a,{fontSize:"12px",color:"brandGray.accent",ml:"3",children:dn(n.createdAt)})]}),Object(w.jsx)(se.a,{children:n.text})]})]})})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{colorScheme:"red",fontSize:"14px",onClick:function(){return c.apply(this,arguments)},children:"Delete"})})]})]})]})}function hn(e){var n=e.message,t=e.isOpen,r=e.onClose,c=Object(a.useState)(n.text),i=Object(T.a)(c,2),s=i[0],o=i[1];function l(){return(l=Object(A.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&s.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Fe(n.id,s.trim());case 4:r();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(ie.f,{fontWeight:"bold",mb:0,pb:0,children:"Edit Message"}),Object(w.jsx)(ie.b,{children:Object(w.jsx)(E.a,{alignItems:"center",my:"2",mr:"1",justify:"space-between",boxShadow:"dark-lg",py:2,children:Object(w.jsxs)(E.a,{alignItems:"center",children:[Object(w.jsx)(q.a,{h:"40px",w:"40px",ml:"4",src:n.user.image}),Object(w.jsxs)(L.a,{ml:"3",children:[Object(w.jsxs)(E.a,{alignItems:"center",children:[Object(w.jsx)(se.a,{children:n.user.username}),Object(w.jsx)(se.a,{fontSize:"12px",color:"brandGray.accent",ml:"3",children:dn(n.createdAt)})]}),Object(w.jsx)(ge.a,{value:s,onChange:function(e){return o(e.target.value)},bg:"brandGray.dark",borderColor:"black",borderRadius:"3px",focusBorderColor:"none"})]})]})})}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{colorScheme:"green",fontSize:"14px",onClick:function(){return l.apply(this,arguments)},children:"Save"})})]})]})]})}on.a.extend(un.a);var xn=t(603);function fn(e){var n,t=e.member,r=e.children;return Object(w.jsxs)(xn.a,{isLazy:!0,placement:"right-start",children:[Object(w.jsx)(xn.e,{children:r}),Object(w.jsxs)(xn.b,{w:"80%",children:[Object(w.jsx)(xn.d,{bg:"brandGray.darker",borderRadius:"md",children:Object(w.jsx)(E.a,{mt:2,align:"center",justify:"center",children:Object(w.jsxs)(L.a,{children:[Object(w.jsx)(q.a,{src:t.image,size:"xl",children:Object(w.jsx)(q.b,{boxSize:"0.9em",bg:t.isOnline?"green.500":"gray.500"})}),Object(w.jsx)(se.a,{mt:2,textAlign:"center",color:"#fff",fontWeight:"semibold",children:null!==(n=t.nickname)&&void 0!==n?n:t.username}),t.nickname&&Object(w.jsx)(se.a,{textAlign:"center",children:t.username})]})})}),Object(w.jsx)(xn.c,{bg:"brandGray.dark",children:Object(w.jsx)(se.a,{textColor:"brandGray.accent",fontSize:"12px",textAlign:"center",children:"Right click user for more actions"})})]})]})}function On(e){var n=Object($.a)(X).data;return null===n||void 0===n?void 0:n.find((function(n){return n.id===e}))}var pn=t(43),gn=t(97),mn=t(107);t(514);function vn(e){var n=e.message,t=n.url,r=n.text,c=n.filetype,a=n.createdAt,i=n.updatedAt;if(t&&c){if(c.startsWith("image/"))return Object(w.jsx)(L.a,{boxSize:"sm",my:"2",h:"full",children:Object(w.jsx)(Ae.a,{fit:"contain",src:t,alt:"",borderRadius:"md"})});if(c.startsWith("audio/"))return Object(w.jsx)(L.a,{my:"2",children:Object(w.jsx)("audio",{controls:!0,children:Object(w.jsx)("source",{src:t,type:c})})})}return Object(w.jsxs)(E.a,{alignItems:"center",children:[Object(w.jsx)(se.a,{children:r}),a!==i&&Object(w.jsx)(se.a,{fontSize:"10px",ml:"1",color:"labelGray",children:"(edited)"})]})}function wn(e){var n,t,r,c=e.message,i=e.isCompact,s=void 0!==i&&i,o=Object(a.useState)(!1),l=Object(T.a)(o,2),u=l[0],d=l[1],b=O((function(e){return e.current})),j=(null===b||void 0===b?void 0:b.id)===c.user.id,h=On(Object(_.i)().guildId),x=void 0!==h&&h.ownerId===(null===b||void 0===b?void 0:b.id),f=j||x||c.url,p=Object(M.a)(),g=p.isOpen,m=p.onOpen,v=p.onClose,y=Object(M.a)(),C=y.isOpen,k=y.onOpen,S=y.onClose,I="".concat(c.user.id,"-").concat(Math.random().toString(36).substr(2,5)),z=Object(cn.d)({id:c.id}).show,G=Object(cn.d)({id:I}).show;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(E.a,{alignItems:"center",mr:"1",mt:s?"0":"3",_hover:{bg:"brandGray.hover"},justify:"space-between",onMouseLeave:function(){return d(!1)},onMouseEnter:function(){return d(!0)},children:Object(w.jsx)(E.a,{w:"full",children:s?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L.a,{ml:"3",minW:"44px",textAlign:"center",children:Object(w.jsx)(se.a,{fontSize:"10px",color:"brandGray.accent",mt:"1",hidden:!u,children:(r=c.createdAt,on()(r).format("h:mm A"))})}),Object(w.jsx)(L.a,{ml:"3",w:"full",onContextMenu:z,children:Object(w.jsx)(vn,{message:c})}),u&&f?Object(w.jsx)(L.a,{onClick:z,mr:"2",_hover:{cursor:"pointer"},h:"5px",children:Object(w.jsx)(pn.b,{})}):Object(w.jsx)(L.a,{mr:"6"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(fn,{member:c.user,children:Object(w.jsx)(q.a,{h:"40px",w:"40px",ml:"4",mt:"1",src:c.user.image,_hover:{cursor:"pointer"},onContextMenu:function(e){j||G(e)}})}),Object(w.jsxs)(L.a,{ml:"3",w:"full",onContextMenu:z,children:[Object(w.jsxs)(E.a,{alignItems:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{alignItems:"center",children:[Object(w.jsx)(se.a,{color:null!==(n=c.user.color)&&void 0!==n?n:void 0,children:null!==(t=c.user.nickname)&&void 0!==t?t:c.user.username}),Object(w.jsx)(se.a,{fontSize:"12px",color:"brandGray.accent",ml:"2",children:dn(c.createdAt)})]}),u&&f&&Object(w.jsx)(L.a,{onClick:z,mr:"2",_hover:{cursor:"pointer"},children:Object(w.jsx)(pn.b,{})})]}),Object(w.jsx)(vn,{message:c})]})]})})}),f&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(cn.b,{id:c.id,theme:cn.c.dark,children:[c.filetype?Object(w.jsx)(cn.a,{className:"menu-item",onClick:function(){c.url&&function(e){var n=window.open(e,"_blank","noopener,noreferrer");n&&(n.opener=null)}(c.url)},children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",w:"full",children:[Object(w.jsx)(se.a,{children:"Open Link"}),Object(w.jsx)(We.a,{as:gn.b})]})}):j?Object(w.jsx)(cn.a,{className:"menu-item",onClick:k,children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",w:"full",children:[Object(w.jsx)(se.a,{children:"Edit Message"}),Object(w.jsx)(We.a,{as:mn.b})]})}):null,(j||x)&&Object(w.jsx)(cn.a,{onClick:m,className:"delete-item",children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",w:"full",children:[Object(w.jsx)(se.a,{children:"Delete Message"}),Object(w.jsx)(We.a,{as:pn.e})]})})]}),g&&Object(w.jsx)(jn,{message:c,isOpen:g,onClose:v}),C&&Object(w.jsx)(hn,{message:c,isOpen:C,onClose:S})]}),!j&&Object(w.jsx)(an,{member:c.user,isOwner:x,id:I})]})}function yn(e){var n=e.date;return Object(w.jsxs)(E.a,{textAlign:"center",align:"center",mt:"2",mx:"4",children:[Object(w.jsx)(B.a,{}),Object(w.jsx)(se.a,{w:["75%","75%","75%","40%","25%"],fontSize:"12px",color:"brandGray.accent",children:bn(n)}),Object(w.jsx)(B.a,{})]},n)}function Cn(e,n){var t=Object($.a)(n).data;return null===t||void 0===t?void 0:t.find((function(n){return n.id===e}))}function kn(e){var n=Object($.a)(ee).data;return null===n||void 0===n?void 0:n.find((function(n){return n.id===e}))}function Sn(){return void 0===Object(_.i)().guildId?Object(w.jsx)(zn,{}):Object(w.jsx)(In,{})}function In(){var e=Object(_.i)(),n=e.guildId,t=Cn(e.channelId,re(n));return Object(w.jsx)(E.a,{alignItems:"center",mb:"2",justify:"center",children:Object(w.jsxs)(L.a,{textAlign:"center",children:[Object(w.jsxs)(P.a,{children:["Welcome to #",null===t||void 0===t?void 0:t.name]}),Object(w.jsxs)(se.a,{children:["This is the start of the #",null===t||void 0===t?void 0:t.name," channel"]})]})})}function zn(){var e=kn(Object(_.i)().channelId);return Object(w.jsxs)(L.a,{m:"4",children:[Object(w.jsx)(L.a,{h:"40px"}),Object(w.jsx)(q.a,{h:"80px",w:"80px",src:null===e||void 0===e?void 0:e.user.image}),Object(w.jsx)(P.a,{mt:2,children:null===e||void 0===e?void 0:e.user.username}),Object(w.jsxs)(se.a,{textColor:"brandGray.accent",children:["This is the beginning of your direct message history with @",null===e||void 0===e?void 0:e.user.username]}),Object(w.jsx)(B.a,{mt:2})]})}var _n=t(342),Gn=t(611),Rn={"&::-webkit-scrollbar":{width:"0"}};function An(e){var n=e.children;return Object(w.jsx)(De.b,{id:"chatGrid",gridColumn:3,gridRow:"2",bg:"brandGray.light",mr:"5px",display:"flex",flexDirection:"column-reverse",overflowY:"auto",css:h,children:n})}function Tn(){var e=Object(_.i)().channelId,n=Object(a.useState)(!0),t=Object(T.a)(n,2),r=t[0],c=t[1],s="messages-".concat(e),l=Object(Gn.a)(s,function(){var n=Object(A.a)(R.a.mark((function n(t){var r,a,i,s;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageParam,a=void 0===r?null:r,n.next=3,o=e,l=a,U.get("/messages/".concat(o,"/").concat(l?"?cursor=".concat(l):""," "));case 3:if(i=n.sent,35===(s=i.data).length){n.next=8;break}return c(!1),n.abrupt("return",s);case 8:case"end":return n.stop()}var o,l}),n)})));return function(e){return n.apply(this,arguments)}}(),{getNextPageParam:function(e){return r&&e.length?e[e.length-1].createdAt:""}}),u=l.data,d=l.isLoading,b=l.fetchNextPage;if(function(e,n){var t=O((function(e){return e.current})),r=Ne(),c=Object(o.b)();Object(a.useEffect)((function(){r.reset();var a=m();return a.emit("joinChannel",e),a.on("new_message",(function(e){c.setQueryData(n,(function(n){return null===n||void 0===n||n.pages[0].unshift(e),n}))})),a.on("edit_message",(function(e){c.setQueryData(n,(function(n){var t=-1,r=-1;return null===n||void 0===n||n.pages.forEach((function(n,c){-1!==(r=n.findIndex((function(n){return n.id===e.id})))&&(t=c)})),-1!==t&&-1!==r&&(n.pages[t][r]=e),n}))})),a.on("delete_message",(function(e){c.setQueryData(n,(function(n){var t=-1;return null===n||void 0===n||n.pages.forEach((function(n,r){-1!==n.findIndex((function(n){return n.id===e.id}))&&(t=r)})),-1!==t&&(n.pages[t]=null===n||void 0===n?void 0:n.pages[t].filter((function(n){return n.id!==e.id}))),n}))})),a.on("addToTyping",(function(e){e!==(null===t||void 0===t?void 0:t.username)&&r.addTyping(e)})),a.on("removeFromTyping",(function(e){e!==(null===t||void 0===t?void 0:t.username)&&r.removeTyping(e)})),function(){a.emit("leaveRoom",e),a.disconnect()}}),[e,c,n,t])}(e,s),d)return Object(w.jsx)(An,{children:Object(w.jsx)(E.a,{align:"center",justify:"center",h:"full",children:Object(w.jsx)(Ee.a,{size:"xl",thickness:"4px"})})});var j=function(e,n){return e.user.id===n.user.id&&(e.createdAt!==n.createdAt&&(t=e.createdAt,r=n.createdAt,on()(t).diff(on()(r),"minutes")<=5));var t,r},h=u?u.pages.flatMap((function(e){return e})):[];return Object(w.jsxs)(An,{children:[Object(w.jsx)(L.a,{h:"10px",mt:4}),Object(w.jsx)(L.a,{as:_n.a,css:Rn,dataLength:h.length,next:b,style:{display:"flex",flexDirection:"column-reverse"},inverse:!0,hasMore:r,loader:h.length>0&&Object(w.jsx)(E.a,{align:"center",justify:"center",h:"50px",children:Object(w.jsx)(Ee.a,{})}),scrollableTarget:"chatGrid",children:h.map((function(e,n){return Object(w.jsxs)(i.a.Fragment,{children:[Object(w.jsx)(wn,{message:e,isCompact:j(e,h[Math.min(n+1,h.length-1)])}),(t=e.createdAt,r=h[Math.min(n+1,h.length-1)].createdAt,!on()(t).isSame(on()(r),"day")&&Object(w.jsx)(yn,{date:e.createdAt}))]},e.id);var t,r}))}),!r&&Object(w.jsx)(Sn,{})]})}var Dn=t(317),Mn=t(596),En=t(354),Ln=(t(515),t(316)),Pn=t(612);function Fn(e){var n=e.label,t=e.position,r=e.disabled,c=void 0!==r&&r,a=e.children;return Object(w.jsx)(F.a,{hasArrow:!0,label:n,placement:t,isDisabled:c,bg:"brandGray.darkest",color:"white",fontWeight:"semibold",py:1,px:3,children:a})}var qn=["image/jpg","image/jpeg","audio/mp3","image/png"],Nn=oe.d().shape({file:oe.c().nullable().test("fileSize","The file is too large",(function(e){return(null===e||void 0===e?void 0:e.size)<5e6})).test("type","Only the following formats are accepted: Image and Audio",(function(e){return e&&qn.includes(e.type)}))});function Wn(){var e=Object(_.i)().channelId,n=Object(M.a)(),t=n.isOpen,r=n.onOpen,c=n.onClose,i=Object(a.useRef)(null),s=Object(a.useState)(!1),o=Object(T.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(0),b=Object(T.a)(d,2),j=b[0],h=b[1],x=Object(a.useState)({}),f=Object(T.a)(x,2),O=f[0],p=f[1],g=function(){p({}),h(0),c()},m=function(){var n=Object(A.a)(R.a.mark((function n(t){var c;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return u(!0),n.prev=3,n.next=6,Nn.validate({file:t});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(3),p(n.t0.errors),r(),n.abrupt("return");case 13:return(c=new FormData).append("file",t),n.next=17,Le(e,c,(function(e){var n=Math.round(100*e.loaded/e.total);h(n),n>=100&&h(0)}));case 17:case"end":return n.stop()}}),n,null,[[3,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(w.jsxs)(Ln.a,{color:"iconColor",_hover:{cursor:"pointer",color:"#fcfcfc"},onClick:function(){return i.current.click()},children:[Object(w.jsx)(We.a,{as:mn.a,boxSize:"20px"}),Object(w.jsx)("input",{type:"file",ref:i,hidden:!0,disabled:l,onChange:function(){var e=Object(A.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.currentTarget.files){e.next=2;break}return e.abrupt("return");case 2:m(n.currentTarget.files[0]).then((function(){u(!1),n.target.value=""}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),O&&Object(w.jsxs)(ie.a,{size:"sm",isOpen:t,onClose:g,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",textAlign:"center",children:[Object(w.jsx)(ie.f,{pb:"0",children:"Error Uploading File"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsxs)(se.a,{mb:"2",children:["Reason: ",O]}),Object(w.jsx)(se.a,{children:"Max file size is 5.00 MB"}),Object(w.jsx)(se.a,{children:"Only Images and mp3 allowed"})]})]})]}),j>0&&Object(w.jsx)(ie.a,{size:"sm",isOpen:j>0,closeOnOverlayClick:!1,onClose:g,isCentered:!0,children:Object(w.jsxs)(ie.d,{bg:"brandGray.darker",textAlign:"center",children:[Object(w.jsx)(ie.f,{pb:"0",children:"Upload Progress"}),Object(w.jsx)(ie.b,{children:Object(w.jsx)(Pn.a,{hasStripe:!0,isAnimated:!0,value:j})})]})})]})}function Vn(){var e=Object(a.useState)(""),n=Object(T.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(!1),i=Object(T.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(!1),u=Object(T.a)(l,2),d=u[0],b=u[1],j=Object(a.useRef)(),h=Object(_.i)(),x=h.guildId,f=h.channelId,p=void 0===x?ee:re(x),g=Object($.a)(p).data,v=null===g||void 0===g?void 0:g.find((function(e){return e.id===f})),y=m(),C=O((function(e){return e.current})),k=Ne((function(e){return e.typing}));function S(){return(S=Object(A.a)(R.a.mark((function e(n){var c,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.key){e.next=13;break}if(t&&t.trim()){e.next=3;break}return e.abrupt("return");case 3:return y.emit("stopTyping",f,null===C||void 0===C?void 0:C.username),o(!0),b(!1),(a=new FormData).append("text",t.trim()),e.next=10,Le(f,a);case 10:r(""),o(!1),null===j||void 0===j||null===(c=j.current)||void 0===c||c.focus();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(De.b,{gridColumn:3,gridRow:3,px:"20px",pb:k.length>0?"0":"26px",bg:"brandGray.light",children:[Object(w.jsxs)(Dn.a,{size:"md",bg:"messageInput",alignItems:"center",borderRadius:"8px",children:[Object(w.jsx)(Mn.a,{as:En.a,minH:"40px",transition:"height none",overflow:"hidden",w:"100%",resize:"none",minRows:1,pl:"3rem",name:"text",placeholder:(null===v||void 0===v?void 0:v.user)?"Message @".concat(null===v||void 0===v?void 0:v.user.username):"Message #".concat(null===v||void 0===v?void 0:v.name),border:"0",_focus:{border:"0"},ref:j,isDisabled:s,value:t,onChange:function(e){var n=e.target.value;1!==n.trim().length||d?0===n.length&&(y.emit("stopTyping",f,null===C||void 0===C?void 0:C.username),b(!1)):(y.emit("startTyping",f,null===C||void 0===C?void 0:C.username),b(!0)),n.length<=2e3&&r(n)},onKeyDown:function(e){return S.apply(this,arguments)}}),Object(w.jsx)(Wn,{})]}),k.length>0&&Object(w.jsxs)(E.a,{align:"center",fontSize:"12px",my:1,children:[Object(w.jsxs)("div",{className:"typing-indicator",children:[Object(w.jsx)("span",{}),Object(w.jsx)("span",{}),Object(w.jsx)("span",{})]}),Object(w.jsx)(se.a,{ml:"1",fontWeight:"semibold",children:function(e){switch(e.length){case 1:return e[0];case 2:return"".concat(e[0]," and ").concat(e[1]);case 3:return"".concat(e[0],", ").concat(e[1]," and ").concat(e[2]);default:return"Several people"}}(k)}),Object(w.jsxs)(se.a,{ml:"1",children:[1===k.length?"is":"are"," typing..."," "]})]})]})}var Bn=t(318);function Qn(){return Object(w.jsx)(L.a,{w:"8px",h:"8px",bg:"white",position:"absolute",borderRadius:"0 4px 4px 0",ml:"-4px",mt:"20px",left:0})}function Un(){return Object(w.jsx)(L.a,{w:"8px",h:"8px",bg:"white",position:"absolute",borderRadius:"0 4px 4px 0",ml:"-4px",mt:"8px",left:"75px"})}function Hn(){return Object(w.jsx)(L.a,{w:"8px",h:"40px",bg:"white",position:"absolute",borderRadius:"0 4px 4px 0",ml:"-4px",left:0,mt:"4px"})}function Yn(){return Object(w.jsx)(L.a,{w:"8px",h:"24px",bg:"white",position:"absolute",borderRadius:"0 4px 4px 0",ml:"-4px",left:0,mt:"12px"})}function Zn(e){var n=e.guild,t=Object(_.h)().pathname.includes(n.id),r=Object(a.useState)(!1),c=Object(T.a)(r,2),i=c[0],s=c[1],u=Object(o.b)();return Object(a.useEffect)((function(){n.hasNotification&&t&&u.invalidateQueries(X)})),Object(w.jsxs)(E.a,{mb:"2",justify:"center",children:[t&&Object(w.jsx)(Hn,{}),i&&Object(w.jsx)(Yn,{}),n.hasNotification&&Object(w.jsx)(Qn,{}),Object(w.jsx)(Fn,{label:n.name,position:"right",children:Object(w.jsx)(l.b,{to:"/channels/".concat(n.id,"/").concat(n.default_channel_id),children:n.icon?Object(w.jsx)(q.a,{src:n.icon,borderRadius:t?"35%":"50%",_hover:{borderRadius:"35%"},name:n.name,color:"#fff",bg:"brandGray.light",onMouseLeave:function(){return s(!1)},onMouseEnter:function(){return s(!0)}}):Object(w.jsx)(E.a,{justify:"center",align:"center",bg:t?"highlight.standard":"brandGray.light",borderRadius:t?"35%":"50%",h:"48px",w:"48px",color:t?"white":void 0,fontSize:"20px",_hover:{borderRadius:"35%",bg:"highlight.standard",color:"white"},onMouseLeave:function(){return s(!1)},onMouseEnter:function(){return s(!0)},children:n.name[0]})})})]})}var Jn=t(326),Kn=oe.d().shape({name:oe.f().min(3).max(30).required()});function $n(e){var n=e.isOpen,t=e.onClose,r=Object(a.useState)("START"),c=Object(T.a)(r,2),i=c[0],s=c[1],o=function(){return s("START")},l=function(){s("START"),t()};return Object(w.jsxs)(ie.a,{isOpen:n,onClose:l,isCentered:!0,size:"sm",children:[Object(w.jsx)(ie.g,{}),"INVITE"===i&&Object(w.jsx)(Xn,{goBack:o,submitClose:l}),"CREATE"===i&&Object(w.jsx)(et,{goBack:o,submitClose:l}),"START"===i&&Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",children:"Create a server"}),Object(w.jsx)(ie.c,{}),Object(w.jsx)(ie.b,{pb:6,children:Object(w.jsxs)(Jn.e,{spacing:"5",children:[Object(w.jsx)(se.a,{textAlign:"center",children:"Your server is where you and your friends hang out. Make yours and start talking."}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},w:"full",onClick:function(){return s("CREATE")},children:"Create My Own"}),Object(w.jsx)(B.a,{}),Object(w.jsx)(se.a,{children:"Have an invite already?"}),Object(w.jsx)(W.a,{mt:"4",background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},w:"full",onClick:function(){return s("INVITE")},children:"Join a Server"})]})})]})]})}function Xn(e){var n=e.goBack,t=e.submitClose,r=Object(o.b)(),c=Object(_.g)();function a(){return(a=Object(A.a)(R.a.mark((function e(n,a){var i,s,o,l,u,d,b;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.setErrors,""!==n.length){e.next=5;break}i({link:"Please enter a valid link"}),e.next=17;break;case 5:return e.prev=5,e.next=8,Ue(n);case 8:s=e.sent,(o=s.data)&&(r.invalidateQueries(X),t(),c.push("/channels/".concat(o.id,"/").concat(o.default_channel_id))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),u=null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status,i(404===u||400===u?{link:null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d||null===(b=d.data)||void 0===b?void 0:b.message}:ae(e.t0));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}return Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{link:""},onSubmit:function(e,n){return a.apply(this,arguments)},children:function(e){var t=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",pb:"0",children:"Join a Server"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{pb:3,children:[Object(w.jsx)(se.a,{fontSize:"14px",textColor:"brandGray.accent",children:"Enter an invite below to join an existing server"}),Object(w.jsx)(ve,{label:"invite link",name:"link"}),Object(w.jsx)(se.a,{mt:"4",fontSize:"12px",fontWeight:"semibold",textColor:"brandGray.accent",textTransform:"uppercase",children:"invite links should look like"}),Object(w.jsx)(se.a,{mt:"2",fontSize:"12px",textColor:"brandGray.accent",children:"drqgi2"}),Object(w.jsx)(se.a,{fontSize:"12px",textColor:"brandGray.accent",children:"https://discord.gg/drqgi2"})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{mr:6,variant:"link",onClick:n,fontSize:"14px",children:"Back"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:t,fontSize:"14px",children:"Join Server"})]})]})}})})}function et(e){var n=e.goBack,t=e.submitClose,r=O((function(e){return e.current})),c=Object(_.g)(),a=Object(o.b)();function i(){return(i=Object(A.a)(R.a.mark((function e(n,r){var i,s,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.setErrors,e.prev=1,e.next=4,Qe(n);case 4:s=e.sent,(o=s.data)&&(a.setQueryData(X,(function(e){return[].concat(Object(qe.a)(e),[o])})),t(),c.push("/channels/".concat(o.id,"/").concat(o.default_channel_id))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i(ae(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{name:"".concat(r.username,"'s server")},validationSchema:Kn,onSubmit:function(e,n){return i.apply(this,arguments)},children:function(e){var t=e.isSubmitting,c=e.values;return Object(w.jsxs)(K.a,{initialValues:{name:"".concat(r.username,"'s server \ud83d\ude0e ")},children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",pb:"0",children:"Create your server"}),Object(w.jsx)(ie.c,{}),Object(w.jsx)(ie.b,{pb:3,children:Object(w.jsx)(ve,{label:"server name",name:"name",value:c.name})}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{mr:6,fontSize:"14px",variant:"link",onClick:n,children:"Back"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:t,fontSize:"14px",children:"Create"})]})]})}})})}var nt=t(108);function tt(e){var n=e.onOpen,t=Object(a.useState)(!1),r=Object(T.a)(t,2),c=r[0],i=r[1];return Object(w.jsxs)(w.Fragment,{children:[c&&Object(w.jsx)(Yn,{}),Object(w.jsx)(Fn,{label:"Add a Server",position:"right",children:Object(w.jsx)(E.a,{direction:"column",m:"auto",align:"center",justify:"center",bg:"brandGray.light",borderRadius:"50%",h:"48px",w:"48px",_hover:{cursor:"pointer",borderRadius:"35%",bg:"brandGreen",color:"white"},onClick:n,onMouseLeave:function(){return i(!1)},onMouseEnter:function(){return i(!0)},children:Object(w.jsx)(nt.c,{fontSize:"25px"})})})]})}function rt(e){var n=e.count;return Object(w.jsx)(E.a,{borderRadius:"50%",bg:"menuRed",position:"absolute",bottom:0,right:0,transform:"translate(25%, 25%)",border:"0.2em solid",borderColor:"brandBorder",w:"1.4em",h:"1.4em",justify:"center",align:"center",children:Object(w.jsx)(se.a,{fontSize:"11px",fontWeight:"bold",children:n})})}function ct(e){var n=e.count;return Object(w.jsx)(E.a,{borderRadius:"50%",bg:"menuRed",w:"1.2em",h:"1.2em",justify:"center",align:"center",ml:2,children:Object(w.jsx)(se.a,{fontSize:"11px",fontWeight:"bold",children:n})})}function at(){var e="/channels/me"===Object(_.h)().pathname,n=Object(a.useState)(!1),t=Object(T.a)(n,2),r=t[0],c=t[1],i=v((function(e){return e.notifCount})),s=v((function(e){return e.reset}));return Object(a.useEffect)((function(){e&&s()})),Object(w.jsx)(Fn,{label:"Home",position:"right",children:Object(w.jsxs)(E.a,{direction:"column",my:"2",align:"center",children:[e&&Object(w.jsx)(Hn,{}),r&&Object(w.jsx)(Yn,{}),Object(w.jsx)(l.b,{to:"/channels/me",children:Object(w.jsxs)(E.a,{direction:"column",m:"auto",align:"center",justify:"center",bg:e?"highlight.standard":"brandGray.light",borderRadius:e?"35%":"50%",h:"48px",w:"48px",color:"white",position:"relative",_hover:{cursor:"pointer",borderRadius:"35%",bg:"highlight.standard"},onMouseLeave:function(){return c(!1)},onMouseEnter:function(){return c(!0)},children:[Object(w.jsx)(it,{}),i>0&&Object(w.jsx)(rt,{count:i})]})}),Object(w.jsx)(B.a,{mt:"2",w:"40px"})]})})}function it(){return Object(w.jsx)("img",{src:"/small-logo.png",style:{padding:"5px"},alt:"logo"})}function st(){var e=Object($.a)(X,(function(){return U.get("/guilds").then((function(e){return e.data}))})).data,n=Object(M.a)(),t=n.isOpen,r=n.onOpen,c=n.onClose;return function(){var e=Object(_.g)(),n=Object(o.b)(),t=O((function(e){return e.current})),r=Object(_.h)();Object(a.useEffect)((function(){var c=m();return c.emit("joinUser",null===t||void 0===t?void 0:t.id),c.on("edit_guild",(function(e){n.setQueryData(X,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e.id}));return-1!==t&&(n[t]=Object(xe.a)(Object(xe.a)({},n[t]),{},{name:e.name,icon:e.icon})),n}))})),c.on("delete_guild",(function(t){n.setQueryData(X,(function(n){return r.pathname.includes(t)&&e.replace("/channels/me"),null===n||void 0===n?void 0:n.filter((function(e){return e.id!==t}))}))})),c.on("remove_from_guild",(function(t){n.setQueryData(X,(function(n){return r.pathname.includes(t)&&e.replace("/channels/me"),n.filter((function(e){return e.id!==t}))}))})),c.on("new_notification",(function(e){r.pathname.includes(e)||n.setQueryData(X,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e}));return-1!==t&&(n[t]=Object(xe.a)(Object(xe.a)({},n[t]),{},{hasNotification:!0})),n}))})),function(){c.emit("leaveRoom",null===t||void 0===t?void 0:t.id),c.disconnect()}}),[t,n,e,r])}(),Object(w.jsxs)(De.b,{gridColumn:1,gridRow:"1 / 4",bg:"brandGray.darker",overflowY:"auto",css:Rn,zIndex:2,children:[Object(w.jsx)(at,{}),Object(w.jsx)(Bn.e,{listStyleType:"none",ml:"0",children:null===e||void 0===e?void 0:e.map((function(e){return Object(w.jsx)(Zn,{guild:e},e.id)}))}),Object(w.jsx)(tt,{onOpen:r}),t&&Object(w.jsx)($n,{isOpen:t,onClose:c}),Object(w.jsx)(L.a,{h:"20px"})]})}var ot=t(597),lt=t(319);function ut(e){var n=e.isOpen,t=e.onClose,r=O((function(e){return e.current})),c=Object(o.b)(),a=Object(ot.a)((null===r||void 0===r?void 0:r.id)||""),i=a.hasCopied,s=a.onCopy;function l(){return(l=Object(A.a)(R.a.mark((function e(n,r){var a,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.setErrors,""!==n.id||20===n.id.length){e.next=5;break}a({id:"Enter valid ID "}),e.next=16;break;case 5:return e.prev=5,e.next=8,Y(n.id);case 8:i=e.sent,i.data&&(t(),c.invalidateQueries(te)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),a(ae(e.t0));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}return Object(w.jsxs)(ie.a,{isOpen:n,onClose:t,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{id:""},onSubmit:function(e,n){return l.apply(this,arguments)},children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{fontWeight:"bold",pb:"0",children:"ADD FRIEND"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(se.a,{mb:"4",children:"You can add a friend with their UID."}),Object(w.jsxs)(Dn.a,{mb:2,children:[Object(w.jsx)(lt.b,{bg:"#202225",borderColor:"black",children:"UID"}),Object(w.jsx)(ge.a,{bg:"brandGray.dark",borderColor:i?"brandGreen":"black",borderRadius:"3px",focusBorderColor:"highlight.standard",value:(null===r||void 0===r?void 0:r.id)||"",isReadOnly:!0}),Object(w.jsx)(Ln.b,{width:"4.5rem",children:Object(w.jsx)(W.a,{h:"1.75rem",size:"sm",bg:i?"brandGreen":"highlight.standard",color:"white",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},onClick:s,children:i?"Copied":"Copy"})})]}),Object(w.jsx)(ve,{label:"Enter a user ID",name:"id"})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",mt:"2",children:[Object(w.jsx)(W.a,{mr:6,variant:"link",onClick:t,fontSize:"14px",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:n,fontSize:"14px",children:"Send Friend Request"})]})]})}})})]})}function dt(){var e=Object(M.a)(),n=e.isOpen,t=e.onOpen,r=e.onClose,c=v((function(e){return e.toggleDisplay})),a=v((function(e){return e.isPending})),i=v((function(e){return e.requestCount}));return Object(w.jsxs)(De.b,{gridColumn:3,gridRow:"1",bg:"brandGray.light",padding:"10px",zIndex:"2",boxShadow:"md",children:[Object(w.jsxs)(E.a,{align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",ml:2,fontSize:"14px",children:[Object(w.jsx)(We.a,{as:gn.c,fontSize:"20px"}),Object(w.jsx)(se.a,{ml:"2",fontWeight:"semibold",children:"Friends"}),Object(w.jsx)(W.a,{fontSize:"14px",ml:"4",size:"xs",colorScheme:"gray",onClick:function(){a&&c()},variant:a?"ghost":"solid",children:"Friends"}),Object(w.jsxs)(W.a,{fontSize:"14px",size:"xs",ml:"2",colorScheme:"gray",variant:a?"solid":"ghost",onClick:function(){a||c()},children:["Pending",i>0&&Object(w.jsx)(rt,{count:i})]})]}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{fontSize:"14px",size:"xs",bg:"brandGreen",_hover:{bg:"brandGreen"},_active:{bg:"brandGreen"},onClick:t,children:"Add Friend"})})]}),n&&Object(w.jsx)(ut,{isOpen:n,onClose:r})]})}var bt=t(320);function jt(e){var n=e.friend,t=Object(M.a)(),r=t.isOpen,c=t.onOpen,a=t.onClose,i=Object(o.b)(),s=Object(_.g)();function l(){return(l=Object(A.a)(R.a.mark((function e(){var t,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(n.id);case 2:t=e.sent,(r=t.data)&&(i.invalidateQueries(ee),s.push("/channels/me/".concat(r.id)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(Bn.c,{p:"3",mx:"3",_hover:{bg:"brandGray.dark",borderRadius:"5px"},children:[Object(w.jsxs)(E.a,{align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",w:"full",onClick:function(){return l.apply(this,arguments)},_hover:{cursor:"pointer"},children:[Object(w.jsx)(q.a,{size:"sm",src:n.image,children:Object(w.jsx)(q.b,{boxSize:"1.25em",bg:n.isOnline?"green.500":"gray.500"})}),Object(w.jsx)(se.a,{ml:"2",children:n.username})]}),Object(w.jsx)(bt.a,{icon:Object(w.jsx)(pn.c,{}),borderRadius:"50%","aria-label":"remove friend",onClick:function(e){e.preventDefault(),c()}})]}),r&&Object(w.jsx)(rn,{id:n.id,isOpen:!0,onClose:a})]})}function ht(e){var n=e.label;return Object(w.jsx)(se.a,{fontSize:"12px",color:"brandGray.accent",textTransform:"uppercase",fontWeight:"semibold",mx:"4",mt:"4",mb:"1",w:"50%",children:n})}function xt(){var e=Object($.a)(ne,(function(){return U.get("/account/me/friends").then((function(e){return e.data}))})).data;return function(){var e=O((function(e){return e.current})),n=v((function(e){return e.setRequests})),t=Object(o.b)();Object(a.useEffect)((function(){var r=m();return r.emit("joinUser",null===e||void 0===e?void 0:e.id),r.emit("getRequestCount"),r.on("add_friend",(function(e){t.setQueryData(ne,(function(n){return[].concat(Object(qe.a)(n),[e]).sort((function(e,n){return e.username.localeCompare(n.username)}))}))})),r.on("remove_friend",(function(e){t.setQueryData(ne,(function(n){return Object(qe.a)(null===n||void 0===n?void 0:n.filter((function(n){return n.id!==e})))}))})),r.on("toggle_online",(function(e){t.setQueryData(ne,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e}));return-1!==t&&(n[t].isOnline=!0),n}))})),r.on("toggle_offline",(function(e){t.setQueryData(ne,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e}));return-1!==t&&(n[t].isOnline=!1),n}))})),r.on("requestCount",(function(e){n(e)})),function(){r.emit("leaveRoom",null===e||void 0===e?void 0:e.id),r.disconnect()}}),[t,e,n])}(),0===(null===e||void 0===e?void 0:e.length)?Object(w.jsx)(E.a,{justify:"center",align:"center",w:"full",children:Object(w.jsx)(se.a,{textColor:"brandGray.accent",children:"No one here yet"})}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Bn.e,{listStyleType:"none",ml:"0",w:"full",mt:"2",children:[Object(w.jsx)(ht,{label:"friends \u2014 ".concat((null===e||void 0===e?void 0:e.length)||0)}),null===e||void 0===e?void 0:e.map((function(e){return Object(w.jsx)(jt,{friend:e},e.id)}))]})})}var ft=t(201);function Ot(e){var n=e.request,t=Object(o.b)(),r=function(){var e=Object(A.a)(R.a.mark((function e(){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=n.id,U.post("/account/".concat(c,"/friend/accept"));case 2:if(r=e.sent,!r.data){e.next=8;break}return t.setQueryData(te,(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==n.id}))})),e.next=8,t.invalidateQueries(ne);case 8:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(A.a)(R.a.mark((function e(){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=n.id,U.post("/account/".concat(c,"/friend/cancel"));case 2:r=e.sent,r.data&&t.setQueryData(te,(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==n.id}))}));case 5:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(Bn.c,{p:"3",mx:"3",_hover:{bg:"brandGray.dark",borderRadius:"5px"},children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(q.a,{size:"sm",src:n.image}),Object(w.jsxs)(L.a,{ml:"2",children:[Object(w.jsx)(se.a,{children:n.username}),Object(w.jsx)(se.a,{fontSize:"12px",children:1===n.type?"Incoming Friend Request":"Outgoing Friend Request"})]})]}),Object(w.jsxs)(E.a,{align:"center",children:[1===n.type&&Object(w.jsx)(Fn,{label:"Accept",position:"top",children:Object(w.jsx)(bt.a,{icon:Object(w.jsx)(ft.a,{}),borderRadius:"50%","aria-label":"accept request",fontSize:"28px",onClick:r,mr:"2"})}),Object(w.jsx)(Fn,{label:"Decline",position:"top",children:Object(w.jsx)(bt.a,{icon:Object(w.jsx)(nt.a,{}),borderRadius:"50%","aria-label":"decline request",fontSize:"20px",onClick:c})})]})]})})}function pt(){var e=Object($.a)(te,(function(){return U.get("/account/me/pending").then((function(e){return e.data}))})).data,n=v((function(e){return e.resetRequest}));return Object(a.useEffect)((function(){n()})),0===(null===e||void 0===e?void 0:e.length)?Object(w.jsx)(E.a,{justify:"center",align:"center",w:"full",children:Object(w.jsx)(se.a,{textColor:"brandGray.accent",children:"There are no pending friend requests"})}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Bn.e,{listStyleType:"none",ml:"0",w:"full",mt:"2",children:[Object(w.jsx)(ht,{label:"Pending \u2014 ".concat((null===e||void 0===e?void 0:e.length)||0)}),null===e||void 0===e?void 0:e.map((function(e){return Object(w.jsx)(Ot,{request:e},e.id)}))]})})}function gt(){var e=v((function(e){return e.isPending}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(dt,{}),Object(w.jsx)(De.b,{gridColumn:3,gridRow:"2",bg:"brandGray.light",mr:"5px",display:"flex",overflowY:"auto",css:h,children:e?Object(w.jsx)(pt,{}):Object(w.jsx)(xt,{})})]})}function mt(){var e=kn(Object(_.i)().channelId);return Object(w.jsx)(De.b,{gridColumn:3,gridRow:"1",bg:"brandGray.light",padding:"10px",zIndex:"2",boxShadow:"md",children:Object(w.jsxs)(E.a,{align:"center",ml:2,children:[Object(w.jsx)(We.a,{as:pn.a,fontSize:"20px",color:"brandGray.accent"}),Object(w.jsx)(se.a,{ml:"2",fontWeight:"semibold",children:null===e||void 0===e?void 0:e.user.username}),Object(w.jsx)(L.a,{ml:"2",borderRadius:"50%",h:"10px",w:"10px",bg:(null===e||void 0===e?void 0:e.user.isOnline)?"green.500":"gray.500"})]})})}var vt=t(344);function wt(e){var n=e.dm,t="/channels/me/".concat(n.id),r=Object(_.g)(),c=Object(_.h)().pathname===t,i=Object(a.useState)(!1),s=Object(T.a)(i,2),u=s[0],d=s[1],b=Object(o.b)();function j(){return(j=Object(A.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Be(n.id);case 3:b.setQueryData(ee,(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==n.id}))})),c&&r.replace("/channels/me");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsx)(l.b,{to:"/channels/me/".concat(n.id),children:Object(w.jsx)(Bn.c,{p:"2",mx:"2",color:c?"#fff":"brandGray.accent",_hover:{bg:"brandGray.light",borderRadius:"5px",cursor:"pointer",color:"#fff"},bg:c?"brandGray.active":void 0,onMouseLeave:function(){return d(!1)},onMouseEnter:function(){return d(!0)},children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(q.a,{size:"sm",src:n.user.image,children:Object(w.jsx)(q.b,{boxSize:"1.25em",bg:n.user.isOnline?"green.500":"gray.500"})}),Object(w.jsx)(se.a,{ml:"2",children:n.user.username})]}),u&&Object(w.jsx)(We.a,{as:vt.a,onClick:function(e){return j.apply(this,arguments)}})]})})})}function yt(){return Object(w.jsxs)(E.a,{align:"center",m:"3",children:[Object(w.jsx)(L.a,{w:"32px",h:"32px",borderRadius:"50%",bg:"brandGray.light"}),Object(w.jsx)(L.a,{ml:2,height:"20px",w:"144px",bg:"brandGray.light",borderRadius:"10px"})]})}function Ct(){var e="/channels/me"===Object(_.h)().pathname,n=v((function(e){return e.requestCount}));return Object(w.jsx)(l.b,{to:"/channels/me",children:Object(w.jsxs)(E.a,{m:"2",p:"3",align:"center",justify:"space-between",color:e?"#fff":"brandGray.accent",_hover:{bg:"brandGray.light",borderRadius:"5px",cursor:"pointer",color:"#fff"},bg:e?"brandGray.active":void 0,children:[Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(We.a,{as:gn.c,fontSize:"20px"}),Object(w.jsx)(se.a,{fontSize:"14px",ml:"4",fontWeight:"semibold",children:"Friends"})]}),n>0&&Object(w.jsx)(ct,{count:n})]})})}var kt=t(202);function St(){var e=O((function(e){return e.current})),n=Object(ot.a)((null===e||void 0===e?void 0:e.id)||""),t=n.hasCopied,r=n.onCopy;return Object(w.jsxs)(E.a,{p:"10px",pos:"absolute",bottom:"0",w:"240px",bg:"accountBar",align:"center",justify:"space-between",children:[Object(w.jsx)(F.a,{hasArrow:!0,label:t?"Copied!":"Click to copy ID",placement:"top",bg:t?"brandGreen":"brandGray.darkest",color:"white",closeOnClick:!1,children:Object(w.jsxs)(E.a,{align:"center",w:"full",mr:2,_hover:{cursor:"pointer"},onClick:r,children:[Object(w.jsx)(q.a,{size:"sm",src:null===e||void 0===e?void 0:e.image}),Object(w.jsx)(se.a,{ml:"2",children:null===e||void 0===e?void 0:e.username})]})}),Object(w.jsx)(l.b,{to:"/account",children:Object(w.jsx)(F.a,{hasArrow:!0,label:"User Settings",placement:"top",bg:"brandGray.darkest",color:"white",children:Object(w.jsx)(bt.a,{icon:Object(w.jsx)(kt.a,{}),"aria-label":"settings",size:"sm",fontSize:"20px",variant:"ghost"})})})]})}var It={"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"4px"},"&::-webkit-scrollbar-thumb":{background:"brandGray.darker",borderRadius:"18px"}};function zt(){var e=Object($.a)(ee,(function(){return U.get("/channels/me/dm").then((function(e){return e.data}))})).data;return function(){var e=O((function(e){return e.current})),n=Object(o.b)();Object(a.useEffect)((function(){var t=m();return t.emit("joinUser",null===e||void 0===e?void 0:e.id),t.on("push_to_top",(function(e){n.setQueryData(ee,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e}));return 0===t||-1===t?Object(qe.a)(n):[n[t]].concat(Object(qe.a)(n.filter((function(n){return n.id!==e}))))}))})),function(){t.emit("leaveRoom",null===e||void 0===e?void 0:e.id),t.disconnect()}}),[e,n])}(),Object(w.jsxs)(De.b,{gridColumn:"2",gridRow:"1 / 4",bg:"brandGray.dark",overflowY:"hidden",_hover:{overflowY:"auto"},css:It,children:[Object(w.jsx)(Ct,{}),Object(w.jsx)(se.a,{ml:"4",textTransform:"uppercase",fontSize:"12px",fontWeight:"semibold",color:"brandGray.accent",children:"DIRECT MESSAGES"}),Object(w.jsxs)(Bn.e,{listStyleType:"none",ml:"0",mt:"4",children:[null===e||void 0===e?void 0:e.map((function(e){return Object(w.jsx)(wt,{dm:e},e.id)})),0===(null===e||void 0===e?void 0:e.length)&&Object(w.jsxs)(L.a,{children:[Object(w.jsx)(yt,{}),Object(w.jsx)(yt,{}),Object(w.jsx)(yt,{}),Object(w.jsx)(yt,{}),Object(w.jsx)(yt,{})]})]}),Object(w.jsx)(St,{})]})}function _t(){var e=Object(_.i)().channelId;return Object(w.jsxs)(Me,{children:[Object(w.jsx)(st,{}),Object(w.jsx)(zt,{}),void 0===e?Object(w.jsx)(gt,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(mt,{}),Object(w.jsx)(Tn,{}),Object(w.jsx)(Vn,{})]})]})}var Gt=t(321);function Rt(){var e=Object(_.i)().link,n=Object(a.useState)(null),t=Object(T.a)(n,2),r=t[0],c=t[1],i=Object(o.b)(),s=Object(_.g)();return Object(a.useEffect)((function(){function n(){return(n=Object(A.a)(R.a.mark((function n(){var t,r,a,o,l,u;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ue({link:e});case 3:t=n.sent,(r=t.data)&&(i.invalidateQueries(X),s.push("/channels/".concat(r.id,"/").concat(r.default_channel_id))),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),o=null===n.t0||void 0===n.t0||null===(a=n.t0.response)||void 0===a?void 0:a.status,c(400===o||404===o?{link:null===n.t0||void 0===n.t0||null===(l=n.t0.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.message}:"Something went wrong please try later");case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,s,i]),Object(w.jsx)(E.a,{minHeight:"100vh",align:"center",justify:"center",h:"full",children:Object(w.jsxs)(L.a,{textAlign:"center",children:[Object(w.jsx)(E.a,{mb:"4",justify:"center",children:Object(w.jsx)(Ae.a,{src:"/logo.png",w:"80px"})}),Object(w.jsx)(se.a,{children:"Fetching server info. Please wait."}),Object(w.jsx)(se.a,{children:"You will be automatically redirected."}),r&&Object(w.jsxs)(L.a,{children:[Object(w.jsx)(se.a,{my:"2",textColor:"menuRed",children:r}),Object(w.jsxs)(se.a,{children:["Click"," ",Object(w.jsx)(Gt.a,{as:l.b,to:"/channels/me",color:"highlight.standard",children:"here"})," ","to return."]})]})]})})}function At(){return Object(w.jsx)(E.a,{bottom:0,as:"footer",align:"center",justify:"center",w:"100%",p:8,children:Object(w.jsx)(L.a,{textAlign:"center",children:Object(w.jsx)(se.a,{fontSize:"xl",children:Object(w.jsx)("span",{children:"Discord | 2021"})})})})}function Tt(){return Object(w.jsx)("svg",{width:"124",height:"34",viewBox:"0 0 124 34",className:"logo-3LF899",children:Object(w.jsxs)("g",{fill:"currentColor",children:[Object(w.jsx)("path",{d:"M18.1558 14.297C17.1868 14.297 16.4218 15.13 16.4218 16.167C16.4218 17.204 17.2038 18.037 18.1558 18.037C19.1248 18.037 19.8898 17.204 19.8898 16.167C19.8898 15.13 19.1078 14.297 18.1558 14.297ZM11.9508 14.297C10.9818 14.297 10.2168 15.13 10.2168 16.167C10.2168 17.204 10.9988 18.037 11.9508 18.037C12.9198 18.037 13.6848 17.204 13.6848 16.167C13.7018 15.13 12.9198 14.297 11.9508 14.297Z"}),Object(w.jsx)("path",{d:"M26.4178 0.152954H3.63783C1.71683 0.152954 0.152832 1.71695 0.152832 3.63795V26.418C0.152832 28.339 1.71683 29.903 3.63783 29.903H22.9158L22.0148 26.792L24.1908 28.798L26.2478 30.685L29.9198 33.864V3.63795C29.9028 1.71695 28.3388 0.152954 26.4178 0.152954ZM19.8558 22.168C19.8558 22.168 19.2438 21.437 18.7338 20.808C20.9608 20.179 21.8108 18.802 21.8108 18.802C21.1138 19.261 20.4508 19.584 19.8558 19.805C19.0058 20.162 18.1898 20.383 17.3908 20.536C15.7588 20.842 14.2628 20.757 12.9878 20.519C12.0188 20.332 11.1858 20.077 10.4888 19.788C10.0978 19.635 9.67283 19.448 9.24783 19.21C9.19683 19.176 9.14583 19.159 9.09483 19.125C9.06083 19.108 9.04383 19.091 9.02683 19.091C8.72083 18.921 8.55083 18.802 8.55083 18.802C8.55083 18.802 9.36683 20.145 11.5258 20.791C11.0158 21.437 10.3868 22.185 10.3868 22.185C6.62983 22.066 5.20183 19.618 5.20183 19.618C5.20183 14.195 7.64983 9.79195 7.64983 9.79195C10.0978 7.97295 12.4098 8.02395 12.4098 8.02395L12.5798 8.22795C9.51983 9.09495 8.12583 10.438 8.12583 10.438C8.12583 10.438 8.49983 10.234 9.12883 9.96195C10.9478 9.16295 12.3928 8.95895 12.9878 8.89095C13.0898 8.87395 13.1748 8.85695 13.2768 8.85695C14.3138 8.72095 15.4868 8.68695 16.7108 8.82295C18.3258 9.00995 20.0598 9.48595 21.8278 10.438C21.8278 10.438 20.4848 9.16295 17.5948 8.29595L17.8328 8.02395C17.8328 8.02395 20.1618 7.97295 22.5928 9.79195C22.5928 9.79195 25.0408 14.195 25.0408 19.618C25.0408 19.601 23.6128 22.049 19.8558 22.168ZM45.5258 7.42895H39.8818V13.77L43.6388 17.153V10.999H45.6448C46.9198 10.999 47.5488 11.611 47.5488 12.597V17.306C47.5488 18.292 46.9538 18.955 45.6448 18.955H39.8648V22.542H45.5088C48.5348 22.559 51.3738 21.046 51.3738 17.578V12.512C51.3908 8.97595 48.5518 7.42895 45.5258 7.42895ZM75.1058 17.578V12.376C75.1058 10.506 78.4718 10.081 79.4918 11.951L82.6028 10.693C81.3788 8.00695 79.1518 7.22495 77.2988 7.22495C74.2728 7.22495 71.2808 8.97595 71.2808 12.376V17.578C71.2808 21.012 74.2728 22.729 77.2308 22.729C79.1348 22.729 81.4128 21.794 82.6708 19.346L79.3388 17.816C78.5228 19.907 75.1058 19.397 75.1058 17.578ZM64.8208 13.09C63.6478 12.835 62.8658 12.41 62.8148 11.679C62.8828 9.92795 65.5858 9.85995 67.1668 11.543L69.6658 9.62195C68.1018 7.71795 66.3338 7.20795 64.5148 7.20795C61.7438 7.20795 59.0578 8.77195 59.0578 11.73C59.0578 14.603 61.2678 16.15 63.6988 16.524C64.9398 16.694 66.3168 17.187 66.2828 18.037C66.1808 19.652 62.8488 19.567 61.3358 17.731L58.9218 19.992C60.3328 21.811 62.2538 22.729 64.0558 22.729C66.8268 22.729 69.9038 21.131 70.0228 18.207C70.1928 14.518 67.5068 13.583 64.8208 13.09ZM53.4308 22.525H57.2388V7.42895H53.4308V22.525ZM117.64 7.42895H111.996V13.77L115.753 17.153V10.999H117.759C119.034 10.999 119.663 11.611 119.663 12.597V17.306C119.663 18.292 119.068 18.955 117.759 18.955H111.979V22.542H117.64C120.666 22.559 123.505 21.046 123.505 17.578V12.512C123.505 8.97595 120.666 7.42895 117.64 7.42895ZM89.9468 7.22495C86.8188 7.22495 83.7078 8.92495 83.7078 12.41V17.561C83.7078 21.012 86.8358 22.746 89.9808 22.746C93.1088 22.746 96.2198 21.012 96.2198 17.561V12.41C96.2198 8.94195 93.0748 7.22495 89.9468 7.22495ZM92.3948 17.561C92.3948 18.649 91.1708 19.21 89.9638 19.21C88.7398 19.21 87.5158 18.683 87.5158 17.561V12.41C87.5158 11.305 88.7058 10.71 89.8958 10.71C91.1368 10.71 92.3948 11.237 92.3948 12.41V17.561ZM109.888 12.41C109.803 8.87395 107.389 7.44595 104.278 7.44595H98.2428V22.542H102.102V17.748H102.782L106.284 22.542H111.044L106.93 17.357C108.749 16.779 109.888 15.198 109.888 12.41ZM104.346 14.45H102.102V10.999H104.346C106.743 10.999 106.743 14.45 104.346 14.45Z"})]})})}function Dt(){var e=O((function(e){return e.current}));return Object(w.jsxs)(E.a,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",w:"100%",mb:8,p:8,children:[Object(w.jsx)(E.a,{align:"center",children:Object(w.jsx)(Tt,{})}),Object(w.jsx)(E.a,{align:"center",justify:"flex-end",children:e?Object(w.jsx)(l.b,{to:"/channels/me",children:Object(w.jsx)(W.a,{_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},size:"md",rounded:"md",variant:"outline",children:"Open App"})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(l.b,{to:"/login",children:Object(w.jsx)(W.a,{color:"white",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},size:"md",rounded:"md",variant:"outline",mx:"4",children:"Login"})}),Object(w.jsx)(l.b,{to:"/register",children:Object(w.jsx)(W.a,{_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},size:"md",rounded:"md",variant:"outline",children:"Register"})})]})})]})}function Mt(e){var n=e.children;return Object(w.jsxs)(E.a,{direction:"column",align:"center",maxW:{xl:"1200px"},m:"0 auto",children:[Object(w.jsx)(Dt,{}),n,Object(w.jsx)(At,{})]})}function Et(e){var n=e.title,t=e.subtitle,r=e.image,c=e.ctaLink,a=e.ctaText,i=Object(fe.a)(e,["title","subtitle","image","ctaLink","ctaText"]);return Object(w.jsxs)(E.a,Object(xe.a)(Object(xe.a)({align:"center",justify:{base:"center",md:"space-around",xl:"space-between"},direction:{base:"column-reverse",md:"row"},wrap:"nowrap",minH:"70vh",px:8,mb:16},i),{},{children:[Object(w.jsxs)(Jn.b,{spacing:4,w:{base:"80%",md:"40%"},align:["center","center","flex-start","flex-start"],children:[Object(w.jsx)(P.a,{as:"h1",size:"xl",fontWeight:"bold",textAlign:["center","center","left","left"],children:n}),Object(w.jsx)(P.a,{as:"h2",size:"md",opacity:"0.8",fontWeight:"normal",lineHeight:1.5,textAlign:["center","center","left","left"],children:t}),Object(w.jsx)(l.b,{to:c,children:Object(w.jsx)(W.a,{colorScheme:"blue",borderRadius:"8px",py:"4",px:"4",lineHeight:"1",size:"md",children:a})}),Object(w.jsxs)(se.a,{fontSize:"xs",mt:2,textAlign:"center",opacity:"0.6",children:["Got an account already?"," ",Object(w.jsx)(Gt.a,{as:l.b,to:"/login",children:"Sign in"})]})]}),Object(w.jsx)(L.a,{w:{base:"80%",sm:"60%",md:"50%"},mb:{base:12,md:0},children:Object(w.jsx)(Ae.a,{src:r,size:"50%",rounded:"1rem"})})]}))}function Lt(){return Object(w.jsx)(Mt,{children:Object(w.jsx)(Et,{title:"An invite-only place with plenty of room to talk",subtitle:"Discord servers are organized into topic-based channels where you can collaborate, share, and just talk about your day without clogging up a group chat.",image:"/landing.svg",ctaText:"Get Started",ctaLink:"/register"})})}function Pt(){var e=Object(_.g)(),n=O((function(e){return e.setUser})),t=function(){var t=Object(A.a)(R.a.mark((function t(r,c){var a,i,s,o,l;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.setErrors,t.prev=1,t.next=4,u=r,U.post("/account/login",u);case 4:i=t.sent,(s=i.data)&&(n(s),e.push("/channels/me")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),401===(null===t.t0||void 0===t.t0||null===(o=t.t0.response)||void 0===o?void 0:o.status)?a({password:"Invalid email or password \ud83d\ude22"}):404===(null===t.t0||void 0===t.t0||null===(l=t.t0.response)||void 0===l?void 0:l.status)?a({email:"No user found with this email \ud83d\ude1f "}):(console.log(t.t0),a(ae(t.t0)));case 12:case"end":return t.stop()}var u}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(w.jsx)(E.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(w.jsxs)(L.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(w.jsx)(E.a,{mb:"4",justify:"center",children:Object(w.jsx)(Ae.a,{src:"/discord-logo.png",w:"80px"})}),Object(w.jsxs)(L.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(w.jsx)(L.a,{textAlign:"center",children:Object(w.jsx)(P.a,{fontSize:"24px",children:"Welcome Back"})}),Object(w.jsx)(L.a,{my:4,textAlign:"left",children:Object(w.jsx)(K.b,{initialValues:{email:"",password:""},validationSchema:le,onSubmit:t,children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ve,{label:"Email",name:"email",autoComplete:"email",type:"email"}),Object(w.jsx)(ve,{label:"password",name:"password",autoComplete:"password",type:"password"}),Object(w.jsx)(L.a,{mt:4,children:Object(w.jsx)(Gt.a,{as:l.b,to:"/forgot-password",textColor:"highlight.standard",children:"Forgot Password?"})}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:n,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},children:"Login"}),Object(w.jsxs)(se.a,{mt:"4",children:["Don't have an account yet?"," ",Object(w.jsx)(Gt.a,{as:l.b,to:"/register",textColor:"highlight.standard",children:"Sign Up"})]})]})}})})]})]})})}function Ft(){var e=Object(_.g)(),n=O((function(e){return e.setUser})),t=function(){var t=Object(A.a)(R.a.mark((function t(r,c){var a,i,s;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.setErrors,t.prev=1,t.next=4,o=r,U.post("/account/register",o);case 4:i=t.sent,(s=i.data)&&(n(s),e.push("/channels/me")),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a(ae(t.t0));case 13:case"end":return t.stop()}var o}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(w.jsx)(E.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(w.jsxs)(L.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(w.jsx)(E.a,{mb:"4",justify:"center",children:Object(w.jsx)(Ae.a,{src:"/logo.png",w:"80px"})}),Object(w.jsxs)(L.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(w.jsx)(L.a,{textAlign:"center",children:Object(w.jsx)(P.a,{fontSize:"24px",children:"Welcome to Discord"})}),Object(w.jsx)(L.a,{my:4,textAlign:"left",children:Object(w.jsx)(K.b,{initialValues:{email:"",username:"",password:""},validationSchema:ue,onSubmit:t,children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ve,{label:"Email",name:"email",autoComplete:"email",type:"email"}),Object(w.jsx)(ve,{label:"username",name:"username"}),Object(w.jsx)(ve,{label:"password",name:"password",autoComplete:"password",type:"password"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:n,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},children:"Register"}),Object(w.jsxs)(se.a,{mt:"4",children:["Already have an account?"," ",Object(w.jsx)(Gt.a,{as:l.b,to:"/login",textColor:"highlight.standard",children:"Sign In"})]})]})}})})]})]})})}function qt(){var e=Object(_.i)().token,n=O((function(e){return e.setUser})),t=Object(_.g)(),r=Object(a.useState)(""),c=Object(T.a)(r,2),i=c[0],s=c[1],o=function(){var r=Object(A.a)(R.a.mark((function r(c,a){var i,o,l,u;return R.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=a.setErrors,r.prev=1,r.next=4,d=Object(xe.a)(Object(xe.a)({},c),{},{token:e}),U.post("/account/reset-password",d);case 4:o=r.sent,(l=o.data)&&(n(l),t.push("/channels/me")),r.next=15;break;case 9:r.prev=9,r.t0=r.catch(1),console.log(r.t0),(u=ae(r.t0))&&s(u.token),i(u);case 15:case"end":return r.stop()}var d}),r,null,[[1,9]])})));return function(e,n){return r.apply(this,arguments)}}();return Object(w.jsx)(E.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(w.jsxs)(L.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(w.jsx)(E.a,{mb:"4",justify:"center",children:Object(w.jsx)(Ae.a,{src:"/logo.png",w:"80px"})}),Object(w.jsxs)(L.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(w.jsx)(L.a,{textAlign:"center",children:Object(w.jsx)(P.a,{fontSize:"24px",children:"Reset Password"})}),Object(w.jsxs)(L.a,{my:4,textAlign:"left",children:[Object(w.jsx)(K.b,{initialValues:{newPassword:"",confirmNewPassword:""},validationSchema:be,onSubmit:o,children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ve,{label:"New Password",name:"newPassword",autoComplete:"new-password",type:"password"}),Object(w.jsx)(ve,{label:"Confirm New Password",name:"confirmNewPassword",type:"password"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:n,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},children:"Reset Password"})]})}}),i?Object(w.jsxs)(E.a,{direction:"column",mt:"4",justify:"center",align:"center",children:[Object(w.jsx)(se.a,{children:"Invalid or expired token."}),Object(w.jsx)(Gt.a,{as:l.b,to:"/forgot-password",color:"red",children:"Click here to get a new token"})]}):null]})]})]})})}var Nt=Object(x.a)(Object(f.persist)((function(e,n){return{showMembers:!0,toggleShowMembers:function(){return e({showMembers:!n().showMembers})}}}),{name:"settings-storage"})),Wt=t(345);function Vt(){var e=Nt((function(e){return e.toggleShowMembers})),n=Object(_.i)(),t=n.guildId,r=Cn(n.channelId,re(t));return Object(w.jsx)(De.b,{gridColumn:3,gridRow:"1",bg:"brandGray.light",padding:"10px",zIndex:"2",boxShadow:"md",children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(pn.d,{}),Object(w.jsx)(se.a,{ml:"2",fontWeight:"semibold",children:null===r||void 0===r?void 0:r.name})]}),Object(w.jsx)(We.a,{as:Wt.a,fontSize:"20px",mr:"2",_hover:{cursor:"pointer"},onClick:e})]})})}var Bt=function(e,n){return U.post("/channels/".concat(e),n)},Qt=function(e,n,t){return U.put("/channels/".concat(e,"/").concat(n),t)},Ut=function(e,n){return U.delete("/channels/".concat(e,"/").concat(n))};var Ht=t(598),Yt=t(203),Zt=oe.d().shape({name:oe.f().min(3).max(30).required("This field is required"),isPublic:oe.b().optional().default(!0),members:oe.a(oe.f().optional().max(20,"Must provide memberIds")).optional()});function Jt(e){var n=e.guildId,t=e.channelId,r=e.isOpen,c=e.onClose,i=ce(n),s=Object($.a)(i,(function(){return Ze(n).then((function(e){return e.data}))})).data,o=Cn(t,re(n)),l=[],u=Object(a.useState)([]),d=Object(T.a)(u,2),b=d[0],j=d[1],h=Object(a.useState)("START"),x=Object(T.a)(h,2),f=x[0],O=x[1];function p(){return(p=Object(A.a)(R.a.mark((function e(r,a){var i,s,o,l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.setErrors,s=a.resetForm,e.prev=1,o=[],b.map((function(e){return o.push(e.value)})),e.next=6,Qt(n,t,Object(xe.a)(Object(xe.a)({},r),{},{members:o}));case 6:l=e.sent,l.data&&(s(),c()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i(ae(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}null===s||void 0===s||s.map((function(e){return l.push({label:e.username,value:e.id,image:e.image})}));Object($.a)("".concat(t,"-members"),Object(A.a)(R.a.mark((function e(){var n,t,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null;case 2:return n=e.sent,t=n.data,r=l.filter((function(e){return t.includes(e.value)})),j(r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).data;var g=function(e){j((function(n){return[].concat(Object(qe.a)(n),[e])}))},m=function(e){return Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(q.a,{mr:2,size:"sm",src:e.image}),Object(w.jsx)(se.a,{textColor:"#000",children:e.label})]})};return o?Object(w.jsxs)(ie.a,{isOpen:r,onClose:c,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),"START"===f&&Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{name:o.name,isPublic:o.isPublic},validationSchema:Zt,onSubmit:function(e,n){return p.apply(this,arguments)},children:function(e){var n=e.isSubmitting,t=e.setFieldValue,r=e.values;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",children:"Channel Settings"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(ve,{label:"channel name",name:"name"}),Object(w.jsxs)(Oe.a,{display:"flex",alignItems:"center",justifyContent:"space-between",mt:"4",children:[Object(w.jsx)(pe.a,{mb:"0",children:Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(nt.b,{}),Object(w.jsx)(se.a,{ml:"2",children:"Private Channel"})]})}),Object(w.jsx)(Ht.a,{defaultChecked:!r.isPublic,onChange:function(e){t("isPublic",!e.target.checked)}})]}),Object(w.jsx)(se.a,{mt:"4",fontSize:"14px",textColor:"brandGray.accent",children:"By making a channel private, only selected members will be able to view this channel"}),!r.isPublic&&Object(w.jsx)(L.a,{mt:"2",pb:0,children:Object(w.jsx)(Yt.CUIAutoComplete,{label:"Who can access this channel",placeholder:"",onCreateItem:g,items:l,selectedItems:b,itemRenderer:m,onSelectedItemsChange:function(e){return function(e){e&&j(e)}(e.selectedItems)}})}),Object(w.jsx)(B.a,{my:"2"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{onClick:function(){return O("CONFIRM")},colorScheme:"red",variant:"ghost",fontSize:"14px",rightIcon:Object(w.jsx)(pn.e,{}),children:"Delete Channel"})})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:c,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:n,fontSize:"14px",children:"Save Changes"})]})]})}})}),"CONFIRM"===f&&Object(w.jsx)(Kt,{goBack:function(){return O("START")},submitClose:function(){O("START"),c()},name:o.name,channelId:o.id,guildId:n})]}):null}function Kt(e){var n=e.goBack,t=e.submitClose,r=e.name,c=e.channelId,a=e.guildId;function i(){return(i=Object(A.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,Ut(a,c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(ie.f,{fontWeight:"bold",pb:"0",children:"Delete Channel"}),Object(w.jsx)(ie.b,{pb:3,children:Object(w.jsxs)(se.a,{children:["Are you sure you want to delete #",r,"? This cannot be undone."]})}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{mr:6,variant:"link",onClick:n,fontSize:"14px",children:"Cancel"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{colorScheme:"red",fontSize:"14px",onClick:function(){return i.apply(this,arguments)},children:"Delete Channel"})})]})]})}function $t(e){var n=e.channel,t=e.guildId,r="/channels/".concat(t,"/").concat(n.id),c=Object(_.h)().pathname===r,i=Object(a.useState)(!1),s=Object(T.a)(i,2),u=s[0],d=s[1],b=O((function(e){return e.current})),j=On(t),h=Object(M.a)(),x=h.isOpen,f=h.onOpen,p=h.onClose,g=Object(o.b)();return Object(a.useEffect)((function(){n.hasNotification&&c&&g.setQueryData(re(t),(function(e){var t=null===e||void 0===e?void 0:e.findIndex((function(e){return e.id===n.id}));return-1!==t&&(e[t]=Object(xe.a)(Object(xe.a)({},e[t]),{},{hasNotification:!1})),e}))})),Object(w.jsx)(l.b,{to:r,children:Object(w.jsxs)(Bn.c,{p:"5px",m:"0 10px",color:c||n.hasNotification?"#fff":"brandGray.accent",_hover:{bg:"brandGray.light",borderRadius:"5px",cursor:"pointer",color:"#fff"},bg:c?"brandGray.active":void 0,mb:"2px",onMouseLeave:function(){return d(!1)},onMouseEnter:function(){return d(!0)},children:[n.hasNotification&&Object(w.jsx)(Un,{}),Object(w.jsxs)(E.a,{align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(We.a,{as:n.isPublic?pn.d:pn.g,color:"brandGray.accent"}),Object(w.jsx)(se.a,{ml:"2",children:n.name})]}),(null===b||void 0===b?void 0:b.id)===(null===j||void 0===j?void 0:j.ownerId)&&(u||x)&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(We.a,{as:mn.c,color:"brandGray.accent",fontSize:"12px",_hover:{color:"#fff"},onClick:function(e){e.preventDefault(),f()}}),x&&Object(w.jsx)(Jt,{guildId:t,channelId:n.id,isOpen:x,onClose:p})]})]})]})})}var Xt=t(604),er=t(350),nr=t(351),tr=oe.d().shape({nickname:oe.f().nullable().min(3).max(30),color:oe.f().nullable().matches(/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i,"The color must be a valid hex color")});function rr(e){var n=e.guildId,t=e.isOpen,r=e.onClose,c=O((function(e){return e.current})),a=Object($.a)("settings-".concat(n),(function(){return(e=n,U.get("/guilds/".concat(e,"/member"))).then((function(e){return e.data}));var e})).data;function i(){return(i=Object(A.a)(R.a.mark((function e(t,c){var a,i,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.setErrors,i=c.setFieldValue,e.prev=1,"#fff"===t.color&&i("color",null),e.next=5,$e(n,t);case 5:s=e.sent,s.data&&r(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a(ae(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return a?Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{color:a.color,nickname:a.nickname},validationSchema:tr,onSubmit:function(e,n){return i.apply(this,arguments)},children:function(e){var n,t,a=e.isSubmitting,i=e.setFieldValue,s=e.values;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{fontWeight:"bold",pb:0,children:"Change Appearance"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(ve,{color:null!==(n=s.color)&&void 0!==n?n:void 0,label:"nickname",name:"nickname",value:null!==(t=s.nickname)&&void 0!==t?t:c.username}),Object(w.jsx)(se.a,{mt:"2",ml:"1",color:"brandGray.accent",_hover:{cursor:"pointer",color:"highlight.standard"},fontSize:"14px",onClick:function(){return i("nickname",null)},children:"Reset Nickname"}),Object(w.jsx)(B.a,{my:"4"}),Object(w.jsx)(nr.a,{color:s.color||"#fff",onChangeComplete:function(e){e&&i("color",e.hex)},className:"picker"}),Object(w.jsx)(se.a,{mt:"2",ml:"1",color:"brandGray.accent",_hover:{cursor:"pointer",color:"highlight.standard"},fontSize:"14px",onClick:function(){return i("color","#fff")},children:"Reset Color"})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:a,fontSize:"14px",children:"Save"})]})]})}})})]}):null}var cr=t(349),ar=t(252),ir={"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"4px"},"&::-webkit-scrollbar-thumb":{background:"brandGray.darker",borderRadius:"18px"}};function sr(e){var n=e.guildId,t=e.isOpen,r=e.onClose,c=On(n),i=Object(a.useState)("START"),s=Object(T.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(!1),d=Object(T.a)(u,2),b=d[0],j=d[1],h=function(){return l("START")},x=Object(M.a)(),f=x.isOpen,O=x.onOpen,p=x.onClose,g=Object(a.useRef)(null),m=Object(a.useState)(""),v=Object(T.a)(m,2),y=v[0],C=v[1],k=Object(a.useState)(""),S=Object(T.a)(k,2),I=S[0],z=S[1],_=Object(a.useState)(null),G=Object(T.a)(_,2),D=G[0],P=G[1];function N(){return(N=Object(A.a)(R.a.mark((function e(t,c){var a,i,s,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.setErrors,i=c.resetForm,e.prev=1,(s=new FormData).append("name",t.name),s.append("image",null!==D&&void 0!==D?D:y),e.next=7,Je(n,s);case 7:o=e.sent,o.data&&(i(),r()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a(ae(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Q(){return U.apply(this,arguments)}function U(){return(U=Object(A.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(c.id);case 2:n=e.sent,n.data&&j(!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c?Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),"START"===o&&Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(K.b,{initialValues:{name:c.name},validationSchema:Kn,onSubmit:function(e,n){return N.apply(this,arguments)},children:function(e){var n=e.isSubmitting;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",pb:0,children:"Server Overview"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsxs)(E.a,{mb:"4",justify:"center",children:[Object(w.jsxs)(L.a,{textAlign:"center",children:[Object(w.jsx)(F.a,{label:"Change Icon","aria-label":"Change Icon",children:Object(w.jsx)(q.a,{size:"xl",name:null===c||void 0===c?void 0:c.name,bg:"brandGray.darker",color:"#fff",src:y||"",_hover:{cursor:"pointer",opacity:.5},onClick:function(){return g.current.click()}})}),Object(w.jsx)(se.a,{mt:"2",_hover:{cursor:"pointer",color:"brandGray.accent"},onClick:function(){P(null),C(null)},children:"Remove"})]}),Object(w.jsx)("input",{type:"file",name:"image",accept:"image/*",ref:g,hidden:!0,onChange:function(){var e=Object(A.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.currentTarget.files){e.next=2;break}return e.abrupt("return");case 2:z(URL.createObjectURL(n.currentTarget.files[0])),O();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),Object(w.jsx)(ve,{label:"server name",name:"name"}),Object(w.jsx)(B.a,{my:"4"}),Object(w.jsx)(se.a,{fontWeight:"semibold",mb:2,children:"Additional Configuration"}),Object(w.jsxs)(E.a,{align:"center",justify:"space-between",mb:"2",children:[Object(w.jsx)(W.a,{onClick:Q,fontSize:"14px",rightIcon:b?Object(w.jsx)(ar.a,{}):Object(w.jsx)(ft.b,{}),colorScheme:b?"green":"gray",children:"Invalidate Links"}),Object(w.jsx)(W.a,{onClick:function(){return l("BANLIST")},fontSize:"14px",rightIcon:Object(w.jsx)(cr.a,{}),children:"Bans"})]}),Object(w.jsx)(E.a,{align:"center",justify:"space-between",mb:"2",children:Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{onClick:function(){return l("CONFIRM")},colorScheme:"red",variant:"ghost",fontSize:"14px",textColor:"menuRed",rightIcon:Object(w.jsx)(pn.e,{}),children:"Delete Server"})})})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,mr:6,variant:"link",fontSize:"14px",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:n,fontSize:"14px",children:"Save Changes"})]})]})}}),f&&Object(w.jsx)(_e,{isOpen:f,onClose:p,initialImage:I,applyCrop:function(e){C(URL.createObjectURL(e)),P(new File([e],"icon")),p()}})]}),"CONFIRM"===o&&Object(w.jsx)(or,{goBack:h,submitClose:function(){l("START"),r()},name:c.name,guildId:n}),"BANLIST"===o&&Object(w.jsx)(lr,{goBack:h,guildId:n})]}):null}function or(e){var n=e.goBack,t=e.submitClose,r=e.name,c=e.guildId;function a(){return(a=Object(A.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,Ke(c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsxs)(ie.f,{fontWeight:"bold",pb:"0",children:["Delete ",r]}),Object(w.jsx)(ie.b,{pb:3,children:Object(w.jsxs)(se.a,{children:["Are you sure you want to delete ",Object(w.jsx)("b",{children:r}),"? This cannot be undone."]})}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{mr:6,variant:"link",onClick:n,fontSize:"14px",children:"Cancel"}),Object(w.jsx)(V.c,{children:Object(w.jsx)(W.a,{colorScheme:"red",fontSize:"14px",onClick:function(){return a.apply(this,arguments)},children:"Delete Server"})})]})]})}function lr(e){var n=e.goBack,t=e.guildId,r="bans-".concat(t),c=Object($.a)(r,(function(){return(e=t,U.get("guilds/".concat(e,"/bans"))).then((function(e){return e.data}));var e})).data,a=Object(o.b)(),i=function(){var e=Object(A.a)(R.a.mark((function e(n){var c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(t,n);case 2:c=e.sent,c.data&&a.setQueryData(r,(function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(w.jsxs)(ie.d,{bg:"brandGray.light",maxH:"500px",children:[Object(w.jsxs)(ie.f,{fontWeight:"bold",pb:"0",children:[null===c||void 0===c?void 0:c.length," Bans"]}),Object(w.jsxs)(ie.b,{pb:3,overflowY:"auto",css:ir,children:[Object(w.jsx)(se.a,{mb:2,children:"Bans are by account. Click on the icon to unban."}),null===c||void 0===c?void 0:c.map((function(e){return Object(w.jsxs)(E.a,{p:"3",_hover:{bg:"brandGray.dark",borderRadius:"5px"},align:"center",justify:"space-between",children:[Object(w.jsxs)(E.a,{align:"center",w:"full",children:[Object(w.jsx)(q.a,{size:"sm",src:e.image}),Object(w.jsx)(se.a,{ml:"2",children:e.username})]}),Object(w.jsx)(bt.a,{icon:Object(w.jsx)(ar.b,{}),borderRadius:"50%","aria-label":"unban user",onClick:function(){var n=Object(A.a)(R.a.mark((function n(t){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,i(e.id);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})]})})),0===(null===c||void 0===c?void 0:c.length)&&Object(w.jsx)(se.a,{children:"No bans yet."})]}),Object(w.jsx)(ie.e,{bg:"brandGray.dark",children:Object(w.jsx)(W.a,{mr:6,variant:"link",onClick:n,fontSize:"14px",children:"Back"})})]})}function ur(e){var n=e.label,t=e.icon,r=e.handleClick;return Object(w.jsx)(Xt.d,{_hover:{bg:"highlight.standard",borderRadius:"2px"},onClick:r,children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",w:"full",children:[Object(w.jsx)(se.a,{children:n}),Object(w.jsx)(We.a,{as:t})]})})}function dr(e){var n=e.label,t=e.icon,r=e.handleClick;return Object(w.jsx)(Xt.d,{_hover:{bg:"menuRed",color:"#fff",borderRadius:"2px"},onClick:r,children:Object(w.jsxs)(E.a,{align:"center",justify:"space-between",w:"full",children:[Object(w.jsx)(se.a,{children:n}),Object(w.jsx)(We.a,{as:t})]})})}function br(e){var n=e.children;return Object(w.jsx)(Xt.e,{bg:"brandGray.darkest",px:"2",children:n})}function jr(e){var n=e.channelOpen,t=e.inviteOpen,r=Object(_.i)().guildId,c=On(r),a=Object(_.g)(),i=Object(o.b)(),s=O((function(e){return e.current})),l=(null===c||void 0===c?void 0:c.ownerId)===(null===s||void 0===s?void 0:s.id),u=Object(M.a)(),d=u.isOpen,b=u.onOpen,j=u.onClose,h=Object(M.a)(),x=h.isOpen,f=h.onOpen,p=h.onClose,g=function(){var e=Object(A.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=r,U.delete("guilds/".concat(t));case 2:n=e.sent,n.data&&(i.setQueryData(X,(function(e){return e.filter((function(e){return e.id!==(null===c||void 0===c?void 0:c.id)}))})),a.replace("/channels/me"));case 5:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(De.b,{gridColumn:2,gridRow:"1",bg:"brandGray.light",padding:"10px",zIndex:"2",boxShadow:"md",children:[Object(w.jsx)(Xt.a,{placement:"bottom-end",isLazy:!0,children:function(e){var r=e.isOpen;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(E.a,{justify:"space-between",align:"center",children:[Object(w.jsx)(P.a,{fontSize:"20px",children:null===c||void 0===c?void 0:c.name}),Object(w.jsx)(Xt.b,{children:Object(w.jsx)(We.a,{as:r?gn.d:gn.a})})]}),Object(w.jsxs)(br,{children:[Object(w.jsx)(ur,{label:"Invite People",icon:pn.h,handleClick:t}),l&&Object(w.jsx)(ur,{label:"Server Settings",icon:kt.a,handleClick:b}),l&&Object(w.jsx)(ur,{label:"Create Channel",icon:mn.a,handleClick:n}),Object(w.jsx)(Xt.c,{}),Object(w.jsx)(ur,{label:"Change Appearance",icon:pn.f,handleClick:f}),!l&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Xt.c,{}),Object(w.jsx)(dr,{label:"Leave Server",icon:er.a,handleClick:g})]})]})]})}}),d&&Object(w.jsx)(sr,{guildId:r,isOpen:d,onClose:j}),x&&Object(w.jsx)(rr,{guildId:r,isOpen:x,onClose:p})]})}function hr(e){var n=e.guildId,t=e.isOpen,r=e.onClose,c=ce(n),i=Object($.a)(c,(function(){return Ze(n).then((function(e){return e.data}))})).data;function s(){return(s=Object(A.a)(R.a.mark((function e(t,c){var a,i,s,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.setErrors,i=c.resetForm,e.prev=1,s=[],d.map((function(e){return s.push(e.value)})),e.next=6,Bt(n,Object(xe.a)(Object(xe.a)({},t),{},{members:s}));case 6:o=e.sent,o.data&&(i(),r()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a(ae(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var o=[],l=Object(a.useState)([]),u=Object(T.a)(l,2),d=u[0],b=u[1];null===i||void 0===i||i.map((function(e){return o.push({label:e.username,value:e.id,image:e.image})}));var j=function(e){b((function(n){return[].concat(Object(qe.a)(n),[e])}))},h=function(e){return Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(q.a,{mr:2,size:"sm",src:e.image}),Object(w.jsx)(se.a,{textColor:"#000",children:e.label})]})};return Object(w.jsxs)(ie.a,{isOpen:t,onClose:r,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsx)(ie.d,{bg:"brandGray.light",children:Object(w.jsx)(K.b,{initialValues:{name:"",isPublic:!0},validationSchema:Zt,onSubmit:function(e,n){return s.apply(this,arguments)},children:function(e){var n=e.isSubmitting,t=e.setFieldValue,c=e.values;return Object(w.jsxs)(K.a,{children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",children:"Create Text Channel"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(ve,{label:"channel name",name:"name"}),Object(w.jsxs)(Oe.a,{display:"flex",alignItems:"center",justifyContent:"space-between",mt:"4",children:[Object(w.jsx)(pe.a,{htmlFor:"email-alerts",mb:"0",children:Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(nt.b,{}),Object(w.jsx)(se.a,{ml:"2",children:"Private Channel"})]})}),Object(w.jsx)(Ht.a,{onChange:function(e){t("isPublic",!e.target.checked)}})]}),Object(w.jsx)(se.a,{mt:"4",fontSize:"14px",textColor:"brandGray.accent",children:"By making a channel private, only selected members will be able to view this channel"}),!c.isPublic&&Object(w.jsx)(L.a,{mt:"2",pb:0,children:Object(w.jsx)(Yt.CUIAutoComplete,{label:"Who can access this channel",placeholder:"",onCreateItem:j,items:o,selectedItems:d,itemRenderer:h,onSelectedItemsChange:function(e){return function(e){e&&b(e)}(e.selectedItems)}})})]}),Object(w.jsxs)(ie.e,{bg:"brandGray.dark",children:[Object(w.jsx)(W.a,{onClick:r,fontSize:"14px",mr:6,variant:"link",children:"Cancel"}),Object(w.jsx)(W.a,{background:"highlight.standard",color:"white",type:"submit",fontSize:"14px",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:n,children:"Create Channel"})]})]})}})})]})}var xr=t(606);function fr(e){var n=e.isOpen,t=e.onClose,r=Object(_.i)().guildId,c=Object(a.useState)(""),i=Object(T.a)(c,2),s=i[0],o=i[1],l=Object(ot.a)(s),u=l.hasCopied,d=l.onCopy,b=Object(a.useState)(!1),j=Object(T.a)(b,2),h=j[0],x=j[1];return Object(a.useEffect)((function(){n&&function(){var e=Object(A.a)(R.a.mark((function e(){var n,t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(r,h);case 2:n=e.sent,(t=n.data)&&o(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n,r,h]),Object(w.jsxs)(ie.a,{isOpen:n,onClose:t,isCentered:!0,children:[Object(w.jsx)(ie.g,{}),Object(w.jsxs)(ie.d,{bg:"brandGray.light",children:[Object(w.jsx)(ie.f,{textAlign:"center",fontWeight:"bold",pb:"0",children:"Invite Link"}),Object(w.jsx)(ie.c,{}),Object(w.jsxs)(ie.b,{children:[Object(w.jsx)(se.a,{mb:"4",children:"Share this link with others to grant access to this server"}),Object(w.jsx)(xr.a,{onChange:function(e){return x(e.target.checked)},mb:4,children:"Make it unlimited / Never reset"}),Object(w.jsxs)(Dn.a,{children:[Object(w.jsx)(ge.a,{bg:"brandGray.dark",borderColor:u?"brandGreen":"black",borderRadius:"3px",focusBorderColor:"highlight.standard",value:s,isReadOnly:!0}),Object(w.jsx)(Ln.b,{width:"4.5rem",children:Object(w.jsx)(W.a,{h:"1.75rem",size:"sm",bg:u?"brandGreen":"highlight.standard",color:"white",type:"submit",fontSize:"14px",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},onClick:d,children:u?"Copied":"Copy"})})]}),Object(w.jsx)(se.a,{my:"2",fontSize:"12px",children:h?"Your invite link won't expire":"Your invite link expires in 1 day and can only be used once"})]}),Object(w.jsx)(ie.e,{bg:"brandGray.dark"})]})]})}function Or(){var e=Object(M.a)(),n=e.isOpen,t=e.onOpen,r=e.onClose,c=Object(M.a)(),i=c.isOpen,s=c.onOpen,l=c.onClose,u=Object(_.i)().guildId,d=re(u),b=Object($.a)(d,(function(){return(e=u,U.get("/channels/".concat(e))).then((function(e){return e.data}));var e})).data;return function(e,n){var t=Object(_.h)(),r=Object(_.g)(),c=Object(o.b)(),i=On(e);Object(a.useEffect)((function(){var a=m();a.emit("joinGuild",e);var s=function(){a.emit("leaveGuild",e),a.disconnect()};return a.on("add_channel",(function(e){c.invalidateQueries(n)})),a.on("edit_channel",(function(e){c.setQueryData(n,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e.id}));return-1!==t?n[t]=e:e.isPublic&&n.push(e),n}))})),a.on("delete_channel",(function(a){c.setQueryData(n,(function(n){var c="/channels/".concat(e,"/").concat(a);return t.pathname===c&&i&&(a===i.default_channel_id?r.replace("/channels/me"):r.replace("".concat(i.default_channel_id))),null===n||void 0===n?void 0:n.filter((function(e){return e.id!==a}))}))})),a.on("new_notification",(function(r){var a="/channels/".concat(e,"/").concat(r);t.pathname!==a&&c.setQueryData(n,(function(e){var n=null===e||void 0===e?void 0:e.findIndex((function(e){return e.id===r}));return-1!==n&&(e[n]=Object(xe.a)(Object(xe.a)({},e[n]),{},{hasNotification:!0})),e}))})),window.addEventListener("beforeunload",s),function(){return s()}}),[e,n,c,r,t,i])}(u,d),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(jr,{channelOpen:s,inviteOpen:t}),Object(w.jsxs)(De.b,{gridColumn:2,gridRow:"2/4",bg:"brandGray.dark",overflowY:"hidden",_hover:{overflowY:"auto"},css:ir,children:[n&&Object(w.jsx)(fr,{isOpen:n,onClose:r}),i&&Object(w.jsx)(hr,{guildId:u,onClose:l,isOpen:i}),Object(w.jsxs)(Bn.e,{listStyleType:"none",ml:"0",mt:"4",children:[null===b||void 0===b?void 0:b.map((function(e){return Object(w.jsx)($t,{channel:e,guildId:u},e.id)})),Object(w.jsx)(L.a,{h:"16"})]}),Object(w.jsx)(St,{})]})]})}function pr(e){var n=e.member,t=Object(_.i)().guildId,r=O((function(e){return e.current})),c=On(t),a=void 0!==c&&c.ownerId===(null===r||void 0===r?void 0:r.id),i=Object(cn.d)({id:n.id}).show;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Bn.c,{p:"2",mx:"10px",color:"brandGray.accent",_hover:{bg:"brandGray.light",borderRadius:"5px",cursor:"pointer",color:"#fff"},onContextMenu:i,children:Object(w.jsxs)(E.a,{align:"center",children:[Object(w.jsx)(q.a,{size:"sm",src:n.image,children:Object(w.jsx)(q.b,{boxSize:"1.25em",bg:n.isOnline?"green.500":"gray.500"})}),Object(w.jsx)(se.a,{ml:"2",children:n.username})]})}),n.id!==(null===r||void 0===r?void 0:r.id)&&Object(w.jsx)(an,{member:n,isOwner:a,id:n.id})]})}var gr={"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"4px"},"&::-webkit-scrollbar-thumb":{background:"brandGray.darker",borderRadius:"18px"}};function mr(){var e=Object(_.i)().guildId,n=ce(e),t=Object($.a)(n,(function(){return Ze(e).then((function(e){return e.data}))})).data,r=[],c=[];return t&&t.forEach((function(e){e.isOnline?r.push(e):c.push(e)})),function(e,n){var t=Object(o.b)();Object(a.useEffect)((function(){var r=m();return r.emit("joinGuild",e),r.on("add_member",(function(e){t.setQueryData(n,(function(n){return[].concat(Object(qe.a)(n),[e]).sort((function(e,n){return e.username.localeCompare(n.username)}))}))})),r.on("remove_member",(function(e){t.setQueryData(n,(function(n){return Object(qe.a)(null===n||void 0===n?void 0:n.filter((function(n){return n.id!==e})))}))})),r.on("toggle_online",(function(e){t.invalidateQueries(n)})),r.on("toggle_offline",(function(e){t.setQueryData(n,(function(n){var t=null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e}));return-1!==t&&(n[t].isOnline=!1),n}))})),function(){r.emit("leaveRoom",e),r.disconnect()}}),[n,t,e])}(e,n),Object(w.jsx)(De.b,{gridColumn:4,gridRow:"1 / 4",bg:"memberList",overflowY:"hidden",_hover:{overflowY:"auto"},css:gr,children:Object(w.jsxs)(Bn.e,{listStyleType:"none",ml:"0",children:[Object(w.jsx)(ht,{label:"online\u2014".concat(r.length)}),r.map((function(e){return Object(w.jsx)(pr,{member:e},e.id)})),Object(w.jsx)(ht,{label:"offline\u2014".concat(c.length)}),c.map((function(e){return Object(w.jsx)(pr,{member:e},e.id)}))]})})}function vr(){var e=Nt((function(e){return e.showMembers}));return Object(w.jsxs)(Me,{showLastColumn:e,children:[Object(w.jsx)(st,{}),Object(w.jsx)(Or,{}),Object(w.jsx)(Vt,{}),Object(w.jsx)(Tn,{}),Object(w.jsx)(Vn,{}),e&&Object(w.jsx)(mr,{})]})}function wr(){return Object(w.jsxs)(_.d,{children:[Object(w.jsx)(_.b,{exact:!0,path:"/",component:Lt}),Object(w.jsx)(_.b,{path:"/login",component:Pt}),Object(w.jsx)(_.b,{path:"/register",component:Ft}),Object(w.jsx)(_.b,{path:"/forgot-password",component:Te}),Object(w.jsx)(_.b,{path:"/reset-password/:token",component:qt}),Object(w.jsx)(Re,{exact:!0,path:"/channels/me",component:_t}),Object(w.jsx)(Re,{exact:!0,path:"/channels/me/:channelId",component:_t}),Object(w.jsx)(Re,{exact:!0,path:"/channels/:guildId/:channelId",component:vr}),Object(w.jsx)(Re,{exact:!0,path:"/account",component:Ge}),Object(w.jsx)(Re,{exact:!0,path:"/:link",component:Rt})]})}z.a.render(Object(w.jsx)(S,{children:Object(w.jsx)(wr,{})}),document.getElementById("root"))}},[[564,1,2]]]);
//# sourceMappingURL=main.a7d6d9bc.chunk.js.map